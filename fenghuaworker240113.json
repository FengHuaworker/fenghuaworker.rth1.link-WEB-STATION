{"settings.rth":{"home":"index.html","time":1705139844},"index.html":"<!DOCTYPE html>\r\n<html lang=\"zh-CN\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>FengHuaStation</title>\r\n    <style>\r\n        .container {\r\n            display: flex;\r\n            flex-wrap: wrap;\r\n            justify-content: center;\r\n        }\r\n        .item {\r\n            width: 100%;\r\n            text-align: left;\r\n            background-color: #fff;\r\n            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);\r\n            padding: 20px;\r\n            margin: 10px 0;\r\n        }\r\n        .item h3 {\r\n            margin-top: 0;\r\n        }\r\n        .deadline {\r\n            margin-top: 30px;\r\n        }\r\n        .countdown {\r\n            font-size: 1.2em;\r\n            font-weight: bold;\r\n        }\r\n        .contact {\r\n            background-color: #f7f7f7;\r\n            padding: 20px;\r\n            text-align: center;\r\n        }\r\n        .contact p {\r\n            margin-top: 0;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <h1>FengHuaStation·冲刺期末</h1>\r\n    <p><b>欢迎来到 FengHuaStation！</b></p>\r\n    <p>官方邮箱：FengHuaworker@qq.com</p>\r\n    <hr>\r\n    <div class=\"container\">\r\n        <div class=\"item\">\r\n            <h3>风华报的欢迎语</h3>\r\n            <p>\r\n                欢迎来到风华报的官方网站！风华报是由厦门一中初一16班创办的一份产业，它凝聚了我们的智慧与热情。我们致力于为读者提供有深度、有温度的新闻报道和分析，让您在阅读中不仅能了解事实，还能感受到我们的思考与关怀。\r\n\t\t\t\t在这个网站上，您将看到我们班级的最新动态，包括我们的学习、生活、活动等方面。我们将及时更新，让您随时掌握我们的最新情况。同时，我们也会预告即将举行的活动，让您提前了解并参与其中。此外，我们还会回顾过去的精彩瞬间，让您一同感受我们的成长与快乐。\r\n\t\t\t\t为了给您提供最好的内容，我们全体成员将全力以赴，用心采编，力求给您带来高质量的阅读体验。我们希望您喜欢我们的网站，更希望您能在这里找到您想要的信息和共鸣。\r\n\t\t\t\t再次感谢您的光临，请随时关注我们的更新，与我们一同见证风华报的成长。我们相信，在您的支持下，风华报一定会越办越好，成为厦门一中初一16班的骄傲！\r\n            </p>\r\n        </div>\r\n        <div class=\"item\">\r\n            <h3>活动</h3>\r\n    <div class=\"container\">\r\n        <p>目前有2个活动正在进行：</p>\r\n        <div class=\"item\">\r\n            <h3>1st：小说征集</h3>\r\n            <p>请参考实体版面HD以获取更多详情。</p>\r\n            <div class=\"deadline\">\r\n                <h3>截止日期：永久</h3>\r\n                <div class=\"countdown\">\r\n                    <span id=\"countdown1\"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n        <div class=\"item\">\r\n            <h3>关于我们</h3>\r\n            <div class=\"contact\">\r\n                <p>官方邮箱：FengHuaworker@qq.com</p>\r\n                <p>风华社区官方普通FANBOOK社区：<a href=\"https://in.fanbook.cn/aARQNF3R\" target=\"_blank\">点击这里</a></p>\r\n\t\t\t\t<p>风华社区官方自营AIFANBOOK社区：<a href=\"https://in.fanbook.cn/h9lhNFKR\" target=\"_blank\">点击这里</a></p>\r\n\t\t\t\t<p>风华社区官方下载站：<a href=\"https://fenghuaworker{$rthSuffix}/download.html\"_blank\">点击这里</a></p>\r\n\t\t\t\t<p>风华网新闻日志：<a href=\"https://fenghuaworker{$rthSuffix}/news.html\"_blank\">点击这里</a></p>\r\n\t\t\t\t<p>风华网旧闻日志：<a href=\"https://fenghuaworker{$rthSuffix}/passnews.html\"_blank\">点击这里</a></p>\r\n\t\t\t\t<p>风华社区官方普通FANBOOK社区：<a href=\"https://in.fanbook.cn/aARQNF3R\" target=\"_blank\">点击这里</a></p>\r\n\t\t\t\t<p>风华社区404页面预览：<a href=\"https://fenghuaworker{$rthSuffix}/404.html\"\" target=\"_blank\">点击这里</a></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <footer>\r\n        <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n    </footer>\r\n    <script>\r\n    </script>\r\n</body>\r\n</html>","404.html":"<!DOCTYPE html>\r\n<html lang=\"zh\">\r\n<head>\r\n\t<meta charset=\"UTF-8\">\r\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n\t<title>你454输错了？</title>\r\n\t<style>\r\n\t\tbody {\r\n\t\t\tfont-family: 'Arial', sans-serif;\r\n\t\t\tbackground-color: #f2f2f2;\r\n\t\t\tdisplay: flex;\r\n\t\t\tjustify-content: center;\r\n\t\t\talign-items: center;\r\n\t\t\theight: 100vh;\r\n\t\t\tmargin: 0;\r\n\t\t}\r\n\r\n\t\t.error-container {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 20px;\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tbox-shadow: 0 0 10px rgba(0, 0, 0, 0.1);\r\n\t\t\twidth: 400px;\r\n\t\t}\r\n\r\n\t\th1 {\r\n\t\t\tfont-size: 100px;\r\n\t\t\tmargin-bottom: 20px;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\r\n\t\tp {\r\n\t\t\tfont-size: 20px;\r\n\t\t\tcolor: #555;\r\n\t\t\tmargin-bottom: 40px;\r\n\t\t}\r\n\r\n\t\ta {\r\n\t\t\tcolor: #0077cc;\r\n\t\t\tfont-size: 16px;\r\n\t\t\ttext-decoration: none;\r\n\t\t\tborder-radius: 4px;\r\n\t\t\tpadding: 8px 16px;\r\n\t\t\tbackground-color: #f2f2f2;\r\n\t\t\tmargin-top: 20px;\r\n\t\t\tdisplay: inline-block;\r\n\t\t}\r\n\r\n\t\ta:hover {\r\n\t\t\tbackground-color: #0077cc;\r\n\t\t\tcolor: #fff;\r\n\t\t}\r\n\t</style>\r\n</head>\r\n<body>\r\n\t<div class=\"error-container\">\r\n\t\t<h1>404</h1>\r\n\t\t<p>页面未找到</p>\r\n\t\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n\t\t<footer>\r\n    \t\t<p>版权所有 &copy; 2024 FengHuaStation</p>\r\n\t\t</footer>\r\n\t</div>\r\n</body>\r\n</html>","download.html":"<!DOCTYPE html>\r\n<html lang=\"zh\">\r\n<head>\r\n<meta charset=\"UTF-8\">\r\n<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n<style>\r\n    body {\r\n        font-family: 'Arial, sans-serif';\r\n        margin: 0;\r\n        padding: 0;\r\n    }\r\n    \r\n    header {\r\n        background-color: #333;\r\n        color: #fff;\r\n        padding: 10px;\r\n        text-align: center;\r\n    }\r\n    \r\n    main {\r\n        padding: 20px;\r\n    }\r\n    \r\n    @media (max-width: 600px) {\r\n        header {\r\n            padding: 5px;\r\n        }\r\n        \r\n        main {\r\n            padding: 10px;\r\n        }\r\n    }\r\n    \r\n    @media (min-width: 601px) {\r\n        header {\r\n            padding: 10px;\r\n        }\r\n        \r\n        main {\r\n            padding: 20px;\r\n        }\r\n    }\r\n    \r\n    footer {\r\n        background-color: #333;\r\n        color: #fff;\r\n        padding: 10px;\r\n        text-align: center;\r\n    }\r\n</style>\r\n</head>\r\n<body>\r\n<header>\r\n    <h1>FengHuaStation</h1>\r\n</header>\r\n<title>FHDownloadStation</title>\r\n<main>\r\n    <p><b>欢迎来到 FengHuaStation！</b></p>\r\n    <p>这是一个用于测试的站点，旨在展示风华社区的活动和公告。</p>\r\n    <a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>风华社区官方普通FANBOOK社区：<a href=\"https://in.fanbook.cn/aARQNF3R\" target=\"_blank\">点击这里</a></p>\r\n\t<p>风华社区官方自营AIFANBOOK社区：<a href=\"https://in.fanbook.cn/h9lhNFKR\" target=\"_blank\">点击这里</a></p>\r\n    <p>官方邮箱：FengHuaworker@qq.com</p>\r\n    <hr>\r\n\t<h2>FH.STUDY</h2>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}/FHSTUDY/FANSI.html\">语文试卷反思范例</a>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}/FHSTUDY/DFTG.html\">道法提纲</a>\r\n\t<hr>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}/othertool/littletool.html\">小工具</a>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}/othertool/RANDOMNUMBER.html\">随机数抽取</a>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}/othertool/shitoujiandaobu.html\">石头剪刀布</a>\r\n\t<a href=\"https://light.shenmedouyou.top/\">光锥生成器（第三方）</a>\r\n\t<a href=\"https://genshin.mingyulab.com/artifact_set_compare/artifact_set_compare?r=8333e8a615964682aecd6ca2222dc3c5\">原魔计算机（第三方）</a>\r\n\t<a href=\"https://chatglm.cn/\">chatGLM网页版（第三方）</a>\r\n    <p>本下载站由pan.huang1111.com提供免登陆下载链接</p>\r\n    <hr>\r\n    <p>FengHuaStation离线版连接20231217：<a href=\"https://pan.huang1111.cn/s/zZD4fM\" target=\"_blank\">点击这里</a></p>\r\n\t<hr>\r\n\t<p>风华资源库：<a href=\"https://pan.huang1111.cn/s/4Pnlsg\" target=\"_blank\">点击这里</a></p>\r\n</main>\r\n<footer>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>\r\n</body>\r\n</html>","othertool/":"","othertool/RANDOMNUMBER.html":"<!DOCTYPE html>\r\n<html>\r\n<head>\r\n\t<title>随机数抽取</title>\r\n\t<meta charset=\"UTF-8\">\r\n\t<meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n\t<style>\r\n\t\tbody {\r\n\t\t\tfont-family: Arial, sans-serif;\r\n\t\t\tbackground-color: #f2f2f2;\r\n\t\t}\r\n\t\th1 {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-top: 50px;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.container {\r\n\t\t\twidth: 90%;\r\n\t\t\tmax-width: 600px;\r\n\t\t\tmargin: 50px auto;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 20px;\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tbox-shadow: 0px 0px 10px rgba(0,0,0,0.1);\r\n\t\t}\r\n\t\t.form-group {\r\n\t\t\tmargin-bottom: 20px;\r\n\t\t}\r\n\t\tlabel {\r\n\t\t\tdisplay: block;\r\n\t\t\tmargin-bottom: 5px;\r\n\t\t\tcolor: #666;\r\n\t\t}\r\n\t\tinput[type=\"number\"] {\r\n\t\t\tpadding: 10px;\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tborder: 1px solid #ccc;\r\n\t\t\twidth: 100%;\r\n\t\t\tfont-size: 16px;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t\t.btn {\r\n\t\t\tbackground-color: #0099ff;\r\n\t\t\tcolor: #fff;\r\n\t\t\tpadding: 10px 20px;\r\n\t\t\tborder-radius: 5px;\r\n\t\t\tborder: none;\r\n\t\t\tcursor: pointer;\r\n\t\t\tfont-size: 16px;\r\n\t\t\ttransition: all 0.3s ease;\r\n\t\t}\r\n\t\t.btn:hover {\r\n\t\t\tbackground-color: #0066cc;\r\n\t\t}\r\n\t\t.result {\r\n\t\t\ttext-align: center;\r\n\t\t\tmargin-top: 50px;\r\n\t\t\tfont-size: 32px;\r\n\t\t\tcolor: #333;\r\n\t\t}\r\n\t</style>\r\n</head>\r\n<body>\r\n\t<h1>随机数抽取</h1>\r\n\t<div class=\"container\">\r\n\t\t<form>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label for=\"min\">最小值：</label>\r\n\t\t\t\t<input type=\"number\" id=\"min\" name=\"min\" min=\"1\" max=\"100\" required>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"form-group\">\r\n\t\t\t\t<label for=\"max\">最大值：</label>\r\n\t\t\t\t<input type=\"number\" id=\"max\" name=\"max\" min=\"1\" max=\"100\" required>\r\n\t\t\t</div>\r\n\t\t\t<button type=\"button\" class=\"btn\" onclick=\"generateRandom()\">抽取随机数</button>\r\n\t\t</form>\r\n\t\t<div class=\"result\" id=\"result\"></div>\r\n\t</div>\r\n\t<script>\r\n\t\tfunction generateRandom() {\r\n\t\t\tvar min = parseInt(document.getElementById(\"min\").value);\r\n\t\t\tvar max = parseInt(document.getElementById(\"max\").value);\r\n\t\t\tvar random = Math.floor(Math.random() * (max - min + 1)) + min;\r\n\t\t\tdocument.getElementById(\"result\").innerHTML = random;\r\n\t\t}\r\n\t</script>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>\r\n</body>\r\n</html>","othertool/shitoujiandaobu.html":"<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>石头、剪刀、布</title>\r\n    <style>\r\n        body {\r\n            font-family: Arial, sans-serif;\r\n            text-align: center;\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n    <h1>石头、剪刀、布</h1>\r\n    <p>用户的选择: <input type=\"radio\" name=\"userChoice\" value=\"石头\" checked>石头\r\n        <input type=\"radio\" name=\"userChoice\" value=\"剪刀\">剪刀\r\n        <input type=\"radio\" name=\"userChoice\" value=\"布\">布\r\n    </p>\r\n    <button onclick=\"play()\">开始游戏</button>\r\n    <p>计算机的选择: <span id=\"computerChoice\">?</span></p>\r\n    <p>结果: <span id=\"result\">?</span></p>\r\n\r\n    <script>\r\n        function getRandomChoice() {\r\n            const choices = ['石头', '剪刀', '布'];\r\n            return choices[Math.floor(Math.random() * choices.length)];\r\n        }\r\n\r\n        function play() {\r\n            const userChoice = document.querySelector('input[name=\"userChoice\"]:checked').value;\r\n            const computerChoice = getRandomChoice();\r\n            let result;\r\n\r\n            if (userChoice === computerChoice) {\r\n                result = '平局！';\r\n            } else if ((userChoice === '石头' && computerChoice === '剪刀') ||\r\n                       (userChoice === '剪刀' && computerChoice === '布') ||\r\n                       (userChoice === '布' && computerChoice === '石头')) {\r\n                result = '恭喜你赢了！';\r\n            } else {\r\n                result = '计算机赢了！';\r\n            }\r\n\r\n            document.getElementById('computerChoice').textContent = computerChoice;\r\n            document.getElementById('result').textContent = result;\r\n        }\r\n    </script>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>\r\n</body>\r\n</html>","5276.html":"<title>站长的XP</title>\r\n<h1>我喜欢可莉！！！</h1>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","news.html":"<!DOCTYPE html>\r\n<html lang=\"zh-CN\">\r\n<title>新闻</title>\r\n<h1>风华新闻社区（在建）</h1>\r\n<hr>\r\n<footer>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","passnews.html":"<!DOCTYPE html>\r\n<html lang=\"zh-CN\">\r\n<title>旧闻</title>\r\n<h1>风华旧闻社区（在建）</h1>\r\n<hr>\r\n\r\n<hr>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","zhenghuo.html":"<!DOCTYPE html>\r\n<html lang=\"zh-CN\">\r\n<title>看什么看？</title>\r\n<h1>正货专区</h1>\r\n<p><a href=\"https://fenghuaworker{$rthSuffix}/zhenghuo.html\"_blank\">点击这里进入风华正货专区</a></p>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","othertool/littletool.html":"<html>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <title>实用的HTML程序</title>\r\n</head>\r\n<body>\r\n    <h1>欢迎使用实用的HTML程序</h1>\r\n    \r\n    <h2>计算器</h2>\r\n    <form>\r\n        <input type=\"number\" id=\"num1\" placeholder=\"数字1\">\r\n        <input type=\"number\" id=\"num2\" placeholder=\"数字2\">\r\n        <br>\r\n        <button onclick=\"add()\">加法</button>\r\n        <button onclick=\"subtract()\">减法</button>\r\n        <button onclick=\"multiply()\">乘法</button>\r\n        <button onclick=\"divide()\">除法</button>\r\n    </form>\r\n    \r\n    <h2>倒计时器</h2>\r\n    <div id=\"countdown\"></div>\r\n    <button onclick=\"startCountdown()\">开始倒计时</button>\r\n    \r\n    <h2>随机密码生成器</h2>\r\n    <button onclick=\"generatePassword()\">生成密码</button>\r\n    <input type=\"text\" id=\"password\" readonly>\r\n    \r\n    <h2>颜色选择器</h2>\r\n    <input type=\"color\" id=\"color\" onchange=\"changeColor()\">\r\n    <div id=\"colorPreview\"></div>\r\n    \r\n    <h2>单位转换器</h2>\r\n    <label for=\"length\">长度（米）：</label>\r\n    <input type=\"number\" id=\"length\" onchange=\"convertLength()\">\r\n    <br>\r\n    <label for=\"result\">结果（英尺）：</label>\r\n    <input type=\"number\" id=\"result\" readonly>\r\n    \r\n    <h2>时间转换器</h2>\r\n    <label for=\"minutes\">分钟：</label>\r\n    <input type=\"number\" id=\"minutes\" onchange=\"convertTime()\">\r\n    <br>\r\n    <label for=\"seconds\">秒钟：</label>\r\n    <input type=\"number\" id=\"seconds\" onchange=\"convertTime()\">\r\n    <br>\r\n    <label for=\"totalSeconds\">总秒数：</label>\r\n    <input type=\"number\" id=\"totalSeconds\" readonly>\r\n    \r\n    <h2>日期计算器</h2>\r\n    <label for=\"startDate\">起始日期：</label>\r\n    <input type=\"date\" id=\"startDate\">\r\n    <br>\r\n    <label for=\"endDate\">结束日期：</label>\r\n    <input type=\"date\" id=\"endDate\">\r\n    <br>\r\n    <button onclick=\"calculateDays()\">计算天数</button>\r\n    <input type=\"text\" id=\"days\" readonly>\r\n    \r\n    <h2>字符计数器</h2>\r\n    <textarea id=\"text\" oninput=\"countCharacters()\"></textarea>\r\n    <br>\r\n    <label for=\"characterCount\">字符数：</label>\r\n    <input type=\"number\" id=\"characterCount\" readonly>\r\n    \r\n    <script>\r\n        // 计算器函数\r\n        function add() {\r\n            var num1 = parseFloat(document.getElementById(\"num1\").value);\r\n            var num2 = parseFloat(document.getElementById(\"num2\").value);\r\n            var result = num1 + num2;\r\n            alert(\"加法结果：\" + result);\r\n        }\r\n        \r\n        function subtract() {\r\n            var num1 = parseFloat(document.getElementById(\"num1\").value);\r\n            var num2 = parseFloat(document.getElementById(\"num2\").value);\r\n            var result = num1 - num2;\r\n            alert(\"减法结果：\" + result);\r\n        }\r\n        \r\n        function multiply() {\r\n            var num1 = parseFloat(document.getElementById(\"num1\").value);\r\n            var num2 = parseFloat(document.getElementById(\"num2\").value);\r\n            var result = num1 * num2;\r\n            alert(\"乘法结果：\" + result);\r\n        }\r\n        \r\n        function divide() {\r\n            var num1 = parseFloat(document.getElementById(\"num1\").value);\r\n            var num2 = parseFloat(document.getElementById(\"num2\").value);\r\n            var result = num1 / num2;\r\n            alert(\"除法结果：\" + result);\r\n        }\r\n        \r\n        // 倒计时函数\r\n        function startCountdown() {\r\n            var countdownElement = document.getElementById(\"countdown\");\r\n            var countdownTime = 10;\r\n            \r\n            var countdownInterval = setInterval(function() {\r\n                countdownElement.innerText = \"倒计时：\" + countdownTime;\r\n                countdownTime--;\r\n                \r\n                if (countdownTime < 0) {\r\n                    clearInterval(countdownInterval);\r\n                    countdownElement.innerText = \"倒计时结束\";\r\n                }\r\n            }, 1000);\r\n        }\r\n        \r\n        // 随机密码生成器函数\r\n        function generatePassword() {\r\n            var passwordElement = document.getElementById(\"password\");\r\n            var characters = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\r\n            var password = \"\";\r\n            \r\n            for (var i = 0; i < 8; i++) {\r\n                var randomIndex = Math.floor(Math.random() * characters.length);\r\n                password += characters.charAt(randomIndex);\r\n            }\r\n            \r\n            passwordElement.value = password;\r\n        }\r\n        \r\n        // 颜色选择器函数\r\n        function changeColor() {\r\n            var colorElement = document.getElementById(\"color\");\r\n            var colorPreviewElement = document.getElementById(\"colorPreview\");\r\n            \r\n            var color = colorElement.value;\r\n            colorPreviewElement.style.backgroundColor = color;\r\n        }\r\n        \r\n        // 单位转换器函数\r\n        function convertLength() {\r\n            var lengthElement = document.getElementById(\"length\");\r\n            var resultElement = document.getElementById(\"result\");\r\n            \r\n            var length = parseFloat(lengthElement.value);\r\n            var result = length * 3.28084;\r\n            resultElement.value = result;\r\n        }\r\n        \r\n        // 时间转换器函数\r\n        function convertTime() {\r\n            var minutesElement = document.getElementById(\"minutes\");\r\n            var secondsElement = document.getElementById(\"seconds\");\r\n            var totalSecondsElement = document.getElementById(\"totalSeconds\");\r\n            \r\n            var minutes = parseInt(minutesElement.value);\r\n            var seconds = parseInt(secondsElement.value);\r\n            var totalSeconds = (minutes * 60) + seconds;\r\n            totalSecondsElement.value = totalSeconds;\r\n        }\r\n        \r\n        // 日期计算器函数\r\n        function calculateDays() {\r\n            var startDateElement = document.getElementById(\"startDate\");\r\n            var endDateElement = document.getElementById(\"endDate\");\r\n            var daysElement = document.getElementById(\"days\");\r\n            \r\n            var startDate = new Date(startDateElement.value);\r\n            var endDate = new Date(endDateElement.value);\r\n            var timeDifference = endDate.getTime() - startDate.getTime();\r\n            var days = Math.floor(timeDifference / (1000 * 3600 * 24));\r\n            daysElement.value = days;\r\n        }\r\n        \r\n        // 字符计数器函数\r\n        function countCharacters() {\r\n            var textElement = document.getElementById(\"text\");\r\n            var characterCountElement = document.getElementById(\"characterCount\");\r\n            \r\n            var text = textElement.value;\r\n            var characterCount = text.length;\r\n            characterCountElement.value = characterCount;\r\n        }\r\n    </script>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>\r\n</html>","FHSTUDY/":"","FHSTUDY/DFTG.html":"1.1.1中学序曲<br>\r\n<br>\r\n1、怎样认识中学时代对于个人成长的意义？（中学时代在生命历程中的重要作用有哪些?）<br>\r\n<br>\r\n中学时代是人生发展的一个新阶段，可以为我们的一生奠定重要基础。<br>\r\n中学时代见证着一个人从少年到青年的生命进阶。<br>\r\n2、怎样认识初中生活？（中学生活馈赠给我们的礼物有哪些）<br>\r\n<br>\r\n中学生活提供了发展自我的多种机会。<br>\r\n进入中学，新的目标和要求激发着我们的潜能，激励着我们不断实现自我超越。<br>\r\n在新的环境中，我们有机会改变在父母、老师和同学心目中那些不够完美的形象，重新塑造一个“我”。<br>\r\n1.1.2 少年有梦<br>\r\n<br>\r\n1、我们青少年怎样才能实现梦想？<br>\r\n<br>\r\n少年有梦，不应止于心动，更在于行动。努力，是梦想与现实之间的桥梁。<br>\r\n努力，是一种生活态度，是一种不服输的坚忍和失败后从头再来的勇气，是对自我的坚定信念和对美好的不懈追求。<br>\r\n努力，需要立志。<br>\r\n努力，需要坚持。<br>\r\n努力也有方法。<br>\r\n1.2.1学习伴成长<br>\r\n<br>\r\n1、我们应该怎样正确认识学习？<br>\r\n<br>\r\n中学阶段，学习是我们的重要任务。初中阶段的学习，包括知识的获取，还包括各种能力的培养。<br>\r\n学习不仅仅局限在学校，我们所看，我们所听，我们所尝，我们所触，我们所做，都可以是学习。<br>\r\n学习需要自觉、主动的态度。<br>\r\n学习伴随着我们的成长。<br>\r\n学习没有终点。我们终生都在学习，终生都需要学习。<br>\r\n2、学习的重要性体现在哪些方面？学习对我们的成长和发展有什么重要意义？<br>\r\n<br>\r\n学习，不仅让我们能够生存，而且可以让我们有更充实的生活。<br>\r\n学习就是给生命添加养料。<br>\r\n学习点亮我们内心不熄的明灯，激发前进的持续动力。<br>\r\n1.2.2享受学习<br>\r\n<br>\r\n1、如何理解学习是苦乐交织的？<br>\r\n<br>\r\n学习中有快乐。 学习中也有辛苦。<br>\r\n我们经历了学习的辛苦，收获学习的成果时，那种发自内心的愉悦让我们体验到学习的美好，它是学习过程带给我们的美妙享受。v\r\n<br>\r\n<br>\r\n2如何体味学习中的苦与乐？<br>\r\n<br>\r\n<br>\r\n<br>\r\n学习中有快乐。对某方面的知识有强烈兴趣时，自己解决某个问题时，学习中找到志趣相投的同伴时，发现自己的潜能时„„我们都可以体味到学习带来的快乐<br>\r\n. 学习中也有辛苦。学习过程中需要集中注意力、耗费精力，遇到困难和阻挠时需要调节不良情绪等，这些都需要我们凭借坚强的意志作出努力。<br>\r\n我们经历了学习的辛苦，收获学习的成果时，那种发自内心的愉悦让我们体验到学习的美好，它是学习过程带给我们的美妙享受。<br>\r\n2、怎样学会学习？<br>\r\n<br>\r\n学会学习，需要发现并保持对学习的兴趣。<br>\r\n学会学习，需要掌握科学的学习方法，适合自己的才是最好的。<br>\r\n学会学习，还意味着要善于运用不同的学习方式<br>\r\n1.3.1认识自己<br>\r\n<br>\r\n1、正确认识自己的重要性是什么？有何意义？<br>\r\n<br>\r\n正确认识自己，可以促进自我发展。<br>\r\n正确认识自己，可以促进与他人的交往。<br>\r\n2、我们通过什么途径认识自己？（怎样正确认识自己？）<br>\r\n<br>\r\n我们可以从生理、社会、心理等方面来认识自己。<br>\r\n我们可以通过自我评价来认识自己。<br>\r\n我们可以通过他人评价来认识自己。他人评价是我们认识自己的一面镜子。<br>\r\n3、怎样正确对待他人的态度和评价？<br>\r\n<br>\r\n他人评价是我们认识自己的一面镜子。有助于我们形成对自己客观、完整、清晰的认识。<br>\r\n我们要重视他人的态度与评价，但也要客观冷静分析，既不能盲从，也不能忽视。用理性的心态面对他人的评价，是走向成熟的表现。<br>\r\n1.3.2 做更好的自己<br>\r\n<br>\r\n1、怎样做更好的自己？<br>\r\n<br>\r\n做更好的自己，就要扬长避短。<br>\r\n做更好的自己，需要主动改正缺点。<br>\r\n做更好的自己，需要不断激发自己的潜能。<br>\r\n做更好的自己，是在和他人共同生活的过程中不断成长的，更是在为他人、为社会带来福祉的过程中实现的。<br>\r\n2.4.1 和朋友在一起<br>\r\n<br>\r\n1、青少年交朋友有什么意义？朋友对我们有什么重要影响？<br>\r\n<br>\r\n朋友对一个人的影响很大，我们的言谈举止、兴趣爱好甚至性格等都或多或少地受到朋友的影响。<br>\r\n朋友，见证了我们一起走过的成长历程，我们需要真诚友善的朋友。<br>\r\n与正直、诚信和见识广的人交朋友，是有益的。它丰富了我们的生活经验，友谊让我们更深刻地体悟生命的美好。<br>\r\n2.4.2 深深浅浅话友谊<br>\r\n<br>\r\n1、友谊的特质有哪些？<br>\r\n<br>\r\n友谊是一种亲密的关系。<br>\r\n友谊是平等的、双向的。<br>\r\n友谊是一种心灵的相遇。<br>\r\n2、如何处理友谊中的问题和困惑？我需要澄清哪些对友谊的片面认识？<br>\r\n<br>\r\n友谊不是一成不变的。我们要学会接受一段友谊的淡出，坦然接受新的友谊。<br>\r\n竞争并不必然伤害友谊，关键是我们对待竞争的态度。在竞争中自我反省和激励，我们会收获更多。<br>\r\n友谊不能没有原则。友谊需要信任和忠诚，但这并不等于不加分辨地为朋友做任何事。<br>\r\n2.5.1 让友谊之树常青<br>\r\n<br>\r\n1、怎样建立友谊？<br>\r\n<br>\r\n建立友谊，需要开放自己。<br>\r\n建立友谊，需要持续的行动。<br>\r\n<br>\r\n<br>\r\n2、如何呵护友谊？<br>\r\n<br>\r\n呵护友谊，需要用心去关怀对方。<br>\r\n呵护友谊，需要学会尊重对方。要给朋友一些空间，把握好彼此的界限和分寸。<br>\r\n呵护友谊，需要学会正确处理冲突。<br>\r\n呵护友谊，需要学会承受并正确对待交友中受到的伤害。<br>\r\n2.5.2网上交友新时空<br>\r\n<br>\r\n1、怎样做到慎重结交网友？如何理性结交网友？<br>\r\n<br>\r\n需要考虑对自己学习和生活的影响，学会理性辨别、慎重选择。<br>\r\n网上交友，我们要有一定的自我保护意识。<br>\r\n将网上的朋友转化为现实中的朋友，需要慎重。<br>\r\n不能只停留在虚拟世界中，要学会在现实中与同伴交往。<br>\r\n3.6.1 走进老师<br>\r\n<br>\r\n1、如何面对不同风格的老师？<br>\r\n<br>\r\n我们要承认老师之间的差异。\r\n我们要接纳每位老师的不同，他们身上都有值得我们学习的地方。<br>\r\n无论什么风格的老师都应该受到尊重。<br>\r\n<br>\r\n3.6.2 师生交往<br>\r\n\r\n1、如何与老师建立亦师亦友的师生关系？<br>\r\n\r\n彼此尊重，是我们与老师建立良好关系的开始。<br>\r\n在平等相待、相互促进的师生交往中，我们可以和老师成为朋友。<br>\r\n3.7.1 家的意味<br>\r\n<br>\r\n1、家意味着什么？<br>\r\n<br>\r\n家庭是由婚姻关系、血缘关系或收养关系结合成的亲属生活组织。<br>\r\n家是我们身心的寄居之所。<br>\r\n家是我们心灵的港湾。<br>\r\n在中国人的心目中，家是代代传承、血脉相连的生活共同体，是甜蜜、温暖、轻松的避风港。<br>\r\n2、孝亲敬长的原因？<br>\r\n<br>\r\n在中国的家庭文化中，“孝”是重要的精神内涵。<br>\r\n孝亲敬长是中华民族的传统美德，也是每个中国公民的法律义务。<br>\r\n3、我们应该怎样孝亲敬长？<br>\r\n<br>\r\n尽孝在当下。孝敬双亲长辈，不仅仅是长大成人以后的事，从现在开始，我们就应该用行动表达孝敬之心。<br>\r\n3.7.2 爱在家人间<br>\r\n<br>\r\n1如何化解亲子冲突？和父母沟通的方法有哪些？<br>\r\n<br>\r\n认真感受和体会与父母相处的那些瞬间。<br>\r\n互动沟通技巧和应对冲突的智慧，是亲子之间爱的润滑剂。亲子冲突需要双方通过良好的互动沟通来解决。<br>\r\n我们要学习应对冲突的方法。选择不伤害父母感情和不影响亲子关系的做法。<br>\r\n可以试着去接纳父母的做法，理解父母行为中蕴含的爱。<br>\r\n<br>\r\n<br>\r\n3.7.3 让家更美好<br>\r\n<br>\r\n1、怎样让家更美好？家庭成员之间和睦相处的方法？<br>\r\n<br>\r\n家庭成员之间相互理解、信任、体谅和包容。<br>\r\n有效交流和沟通，可以增进理解，化解矛盾和冲突。<br>\r\n以良好的心态面对家庭发展中的问题，才能让亲情更浓，让家庭更和睦。<br>\r\n4.8.1生命可以永恒吗<br>\r\n<br>\r\n1、怎样理解“生命有时尽”为什么珍爱生命？<br>\r\n<br>\r\n生命来之不易。<br>\r\n生命是独特的。<br>\r\n生命是不可逆的。<br>\r\n生命是短暂的。<br>\r\n4.8.2敬畏生命<br>\r\n<br>\r\n1、如何做到敬畏生命？<br>\r\n<br>\r\n我们应当从对自己生命的珍惜走向对他人生命的关怀，意识到每个人都需要与他人共同生活。<br>\r\n既不漠视自己的生命，也不漠视他人的生命，谨慎地对待生命关系、处理生命问题，尊重、关注、关怀和善待身边的每一个人。<br>\r\n我们对生命的敬畏并不是谁的命令，而是内心的自愿选择。<br>\r\n<br>\r\n<br>\r\n4.9.1 守护生命<br>\r\n<br>\r\n1、我们要怎样做到爱护身体？<br>\r\n<br>\r\n关心身体的状况，养成健康的生活方式。<br>\r\n增强安全意识、自我保护意识，提高安全防范能力，掌握—些基本的自救自护方法。<br>\r\n2、如何正确认识养护精神？<br>\r\n<br>\r\n我们的精神发育，需要物质的支持，但不完全受物质生活条件和外部环境的制约。我们要守住自己的心灵。<br>\r\n养护精神离不开优秀传统文化的滋养。守护精神家园，需要在个人精神世界的充盈中发扬民族精神.<br>\r\n<br>\r\n<br>\r\n4.9.2增强生命的韧性<br>\r\n<br>\r\n1、怎样正确认识挫折？<br>\r\n<br>\r\n面对不同的挫折，产生负面情绪很正常，但不能沉浸其中，要及时调整自己，正确对待挫折。<br>\r\n生活中的挫折是我们生命成长的一部分。得意时，挫折会使我们更清醒，避免盲目乐观、精神懈怠；失意时，挫折会使我们获得更加丰富的生活经验。<br>\r\n<br>\r\n<br>\r\n2、面对挫折，怎样发掘生命的力量？（怎样战胜挫折？）<br>\r\n<br>\r\n我们需要培养自己面对困难的勇气和坚强意志。<br>\r\n逐渐培养自己面对困难的勇气和坚强的意志。<br>\r\n我们需要发掘自身的力量并不排斥借助外力。<br>\r\n<br>\r\n<br>\r\n4.10.1感受生命的意义<br>\r\n<br>\r\n1、怎样的一生是值得过的？<br>\r\n<br>\r\n能够活出自己的人生，实现自我价值；<br>\r\n在看到别人的需要时付出自己的爱心，无论事情大小，都能承担起自己的责任；<br>\r\n将个人追求建立在人类共同需要的基础上。<br>\r\n<br>\r\n<br>\r\n4.10.2活出生命的精彩<br>\r\n<br>\r\n1、如何实现拒绝冷漠，关爱生命？<br>\r\n<br>\r\n人与人在相互依存和彼此关切中感受温暖，传递温暖。<br>\r\n我们不仅要关注自身的发展，而且要关切其他的生命，设身处地地思考并善待他人。<br>\r\n我们用真诚、热情、给予去感动、改变他人，消融冷漠，共同营造一个互信、友善、和谐的社会。<br>\r\n<br>\r\n<br>\r\n2、怎样让生命变得有意义？（怎样在平凡中创造伟大？）<br>\r\n<br>\r\n伟大在与创造。一个人的伟大，在于他能够运用自身的品德、才智和劳动，创造出比自己有限的生命更长久的、不平凡的社会价值，为我们留下了宝贵的物质财富和精神财富，影响着一代又一代的人。<br>\r\n面对生活的艰难考验，不放弃、不懈怠，为家庭的美好和社会的发展贡献自己的力量。<br>\r\n将个体生命和他人的、集体的、民族的、国家的甚至人类的命运联系在一起。<br>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","FHSTUDY/FANSI.html":"<h1>语文试卷反思范例</h1>\r\n座号：        姓名：             总分：  <br>\r\n单个题反思<br>\r\n题号：   得分:<br>\r\n错答：              正答：（答得分词就可以，不要全抄） <br>\r\n错因:是____________类型错误+具体哪些原因导致错误<br>\r\n改法：相应笔记+下次要注意的细节<br>\r\n总结：<br>\r\n本次我总分_____________基础分得分__________,作文得分____________,<br>\r\n各部分中丢分比较多的为___________（背默、语用、诗歌鉴赏、文言、记叙文、说明文、非连、名著、作文），<br>\r\n我认为和我这一阶段____________________________________________________的学习现状相关，<br>\r\n之后我将_____________________________________________________________来改正这些问题，<br>\r\n下次的语文考试目标争取_______分。<br>\r\n范例：<br>\r\n题号：一、   得分：_________________<br>\r\n错答：宵  志   年与时驰，意与日去，遂成枯落，多不接世  <br>  \r\n正答：霄  致  遂成枯落，多不接世，悲守穷庐，将复何及？<br>\r\n错因:背诵掌握不牢靠，理解性背默不理解诗句和古文意思，<br>\r\n没仔细审题，题干中“不能在时光的流逝中”已经体现了“年与时驰意与日去“，<br>\r\n所以不用答这两句，另外最后一个标点是感叹号也可得出正确答案<br>\r\n改法：背默要快、准、工、检，要记得检查，还要仔细审题干<br>\r\n总结：<br>\r\n本次我总分___80__,基础分得分___60/90_______,<br>\r\n作文得分____20/30________,各部分中丢分最多的为____古文、说明文、<br>\r\n作文_______（背默、语用、诗歌鉴赏、文言、记叙文、说明文、非连、名著、作文），<br>\r\n我认为和我这一阶段___课后没有复习文言字词笔记，上课没有认真听校本的翻译讲评，<br>\r\n说明文笔记没掌握好，老师让整理作文素材偷懒没有好好整理，_最近学习状态不佳，<br>\r\n上课和老师互动少，作业没有认真对待，比较浮躁，不能脚踏实地……__的学习现状相关，    <br>\r\n之后我将___调整学习态度，经常复习笔记，每周做一篇古文培养语感，珍惜作业中不同题型<br>\r\n，做作业时把笔记拿出来对照完成，不偷懒认真积累学习作文素材，在课上认真听，多和老师互动，<br>\r\n绝不再骄傲粗心_来改正这些问题，<br>\r\n下次的语文考试目标争取__115/150_____分。<br>\r\n<footer>\r\n\t<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n\t<p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","note.html":"chat\r\ngpt\r\ndemo.info/chat\r\n<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n<footer>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","FHgame/":"","FHgame/game1/":"","FHgame/game1/index.htm":"<!DOCTYPE html>\r\n<html>\r\n<head>\r\n  <meta charset=\"utf-8\">\r\n  <title>Missile Game</title>\r\n  <meta name=\"author\" content=\"Ben Mather &lt;bwhmather@bwhmather.com&gt;\" />\r\n  <meta name=\"description\" content=\"A 3D game using SVG and javascript\" />\r\n\r\n  <meta name=\"viewport\" content=\"width=device-width, height=device-height, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\" />\r\n   \r\n  <!--== CSS ==============================================================-->\r\n  <style type=\"text/css\">\r\n    /* <![CDATA[ */\r\n    body {\r\n        margin: 0;\r\n    }\r\n\r\n    .barrier path {\r\n      stroke-width: 2;\r\n      stroke-linejoin: round;\r\n    }\r\n\r\n    .hud-background {\r\n      stroke: none;\r\n      fill: white;\r\n      fill-opacity: 0.8;      \r\n    }\r\n\r\n    .hud-foreground {\r\n      stroke: black;\r\n      stroke-linejoin: round;\r\n      stroke-linecap: round;\r\n      fill: none;\r\n    }\r\n\r\n    text {\r\n      font-family: sans-serif;\r\n      font-weight: bold;\r\n    }\r\n\r\n    * {cursor:crosshair}\r\n\r\n    #fullscreen {\r\n      border: 3px solid black;\r\n      border-top: none;\r\n      background: white;\r\n      padding: 5px;\r\n\r\n      position: fixed;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n\r\n      top: 0px;\r\n      transition-property: top;\r\n      transition-duration: 1s;\r\n    }\r\n\r\n    :fullscreen > #fullscreen {\r\n      top: -120%;\r\n    }\r\n\r\n    #fullscreen button {\r\n      border: none;\r\n      background: none;\r\n\r\n      color: red;\r\n      font-weight: bold;\r\n      white-space: nowrap;\r\n    }\r\n\r\n    #app-store {\r\n      position: fixed;\r\n      left: 50%;\r\n      transform: translateX(-50%);\r\n\r\n      bottom: 20%;\r\n      transition: opacity 1s ease-out;\r\n    }\r\n\r\n    #app-store a svg {\r\n      width: 30vh;\r\n      height: 10vh;\r\n    }\r\n\r\n    #app-store.hidden {\r\n      opacity: 0;\r\n    }\r\n\r\n    /* ]]> */\r\n  </style>\r\n  <style title=\"style-hide-mouse\" type=\"text/css\">\r\n    /* <![CDATA[ */\r\n    * {cursor:none}\r\n    /* ]]> */\r\n  </style>\r\n</head>\r\n<body>\r\n  <svg\r\n     version=\"1.1\"\r\n     baseProfile=\"full\"\r\n     xmlns=\"http://www.w3.org/2000/svg\"\r\n     xmlns:svg=\"http://www.w3.org/2000/svg\"\r\n     xmlns:xlink=\"http://www.w3.org/1999/xlink\"\r\n     style=\"position: fixed; width: 100%; height: 100%; margin: 0; background: white\">\r\n   \r\n \r\n  <!--== TUNNEL ===============================================================-->\r\n    <svg id=\"tunnel\"\r\n       width=\"100%\" height=\"100%\"\r\n       preserveAspectRatio=\"xMidYMid meet\"\r\n       viewBox=\"-100 -100 200 200\"\r\n       visibility=\"hidden\" >\r\n    </svg>\r\n  \r\n  <!--== EXPLOSION!!!! ========================================================-->\r\n    <svg\r\n       width=\"100%\" height=\"100%\"\r\n       preserveAspectRatio=\"xMidYMid meet\"\r\n       viewBox=\"-100 -100 200 200\"\r\n       visibility=\"visible\" >\r\n      <path id=\"explosion\"\r\n         visibility=\"hidden\"\r\n         transform=\"scale(3,3)\"\r\n         fill=\"#f5bd3c\"\r\n         stroke=\"#ff2626\"       \r\n         stroke-width=\"0.5\"\r\n         d=\"m -0.63488,-4.3752\r\n            c  0.24879,1.233, 1.1883,2.6366, 1.768,0.69037\r\n               0.74264,0.71431, 1.2069,0.6277, 1.6362,-0.5115\r\n              -0.034821,1.0871, 0.096633,1.6827, 0.74401,1.7541\r\n              -0.091757,1.4249, 0.70746,2.0783, 1.2188,1.8749\r\n              -0.894,0.93533, -0.4517,1.2793, -0.1438,1.9055\r\n              -0.6904,0.3722, -0.6323,1.1294, -0.2202,2.0686 \r\n              -0.8022,-0.0916, -1.2136,0.497, -0.9903,2.1906\r\n              -0.5751,-0.6694, -1.2232,-0.5666, -1.4943,1.3293\r\n              -0.162,-1.1736, -0.4604,-2.6908, -1.3395,-1.1883\r\n              -0.49014,-2.0469, -0.93497,-0.738, -1.3874,0.0043\r\n               0.10639,-0.88002, 0.073166,-1.5303, -0.60252,-1.123\r\n               0.44939,-0.82156, 1.0157,-1.7132, -0.041883,-3.03\r\n               0.45163,-1.7508, 0.018089,-2.1904, -0.50161,-2.5024\r\n               0.67964,-1.0053, 0.49818,-2.0107, 0.28858,-3.016\r\n               0.52476,1.1059, 0.93462,1.3608, 1.0661,-0.4466\r\n            z\r\n            m -0.15082,-1.5778\r\n            c  0.074098,2.0969, -0.58436,1.8254, -1.3271,1.2814\r\n               0.54867,2.1298, 0.033405,2.9625, -0.45613,3.8265\r\n               1.306,0.68211, 0.96098,2.0011, 0.39794,3.4043\r\n               1.3865,-0.46902, 1.0123,0.84256, 0.083778,2.7148\r\n               0.6771,-0.1353, 1.0998,-0.2861, 1.0191,1.6048\r\n               0.47854,-1.0645, 1.3389,-2.4648, 1.4732,1.0237\r\n               0.69655,-2.8185, 1.0794,-1.349, 1.487,0.2973\r\n               0.3541,-1.4463, 0.8078,-2.8978, 1.864,-1.3746\r\n              -0.1962,-1.8445, -0.125,-3.2698, 1.3195,-2.5424\r\n              -1.163,-2.1605, -0.2327,-2.5422, 0.3352,-3.2319\r\n              -1.4432,-0.2307, -0.4485,-0.83498, -0.0527,-1.9151\r\n              -1.2304,-0.5137, -1.6742,-1.4126, -1.2459,-2.7388\r\n              -0.9898,1.2593, -0.9672,-0.606, -1.131,-1.896\r\n              -0.51549,1.084, -0.9993,2.4142, -1.8584,0.82793\r\n              -0.92276,2.4614, -1.531,0.17894, -1.9087,-1.2819\r\n            z\"><animate\r\n           attributeName=\"d\"\r\n           dur=\"0.4s\"\r\n           fill=\"freeze\"\r\n           values=\"m -0.63488,-4.3752\r\n                   c  0.24879,1.233, 1.1883,2.6366, 1.768,0.69037\r\n                      0.74264,0.71431, 1.2069,0.6277, 1.6362,-0.5115\r\n                     -0.034821,1.0871, 0.096633,1.6827, 0.74401,1.7541\r\n                     -0.091757,1.4249, 0.70746,2.0783, 1.2188,1.8749\r\n                     -0.894,0.93533, -0.4517,1.2793, -0.1438,1.9055\r\n                     -0.6904,0.3722, -0.6323,1.1294, -0.2202,2.0686\r\n                     -0.8022,-0.0916, -1.2136,0.497, -0.9903,2.1906\r\n                     -0.5751,-0.6694, -1.2232,-0.5666, -1.4943,1.3293\r\n                     -0.162,-1.1736, -0.4604,-2.6908, -1.3395,-1.1883\r\n                     -0.49014,-2.0469, -0.93497,-0.738, -1.3874,0.0043\r\n                      0.10639,-0.88002, 0.073166,-1.5303, -0.60252,-1.123\r\n                      0.44939,-0.82156, 1.0157,-1.7132, -0.041883,-3.03\r\n                      0.45163,-1.7508, 0.018089,-2.1904, -0.50161,-2.5024\r\n                      0.67964,-1.0053, 0.49818,-2.0107, 0.28858,-3.016\r\n                      0.52476,1.1059, 0.93462,1.3608, 1.0661,-0.4466\r\n                   z\r\n                   m -0.15082,-1.5778\r\n                   c  0.074098,2.0969, -0.58436,1.8254, -1.3271,1.2814\r\n                      0.54867,2.1298, 0.033405,2.9625, -0.45613,3.8265\r\n                      1.306,0.68211, 0.96098,2.0011, 0.39794,3.4043\r\n                      1.3865,-0.46902, 1.0123,0.84256, 0.083778,2.7148\r\n                      0.6771,-0.1353, 1.0998,-0.2861, 1.0191,1.6048\r\n                      0.47854,-1.0645, 1.3389,-2.4648, 1.4732,1.0237\r\n                      0.69655,-2.8185, 1.0794,-1.349, 1.487,0.2973\r\n                      0.3541,-1.4463, 0.8078,-2.8978, 1.864,-1.3746\r\n                     -0.1962,-1.8445, -0.125,-3.2698, 1.3195,-2.5424\r\n                     -1.163,-2.1605, -0.2327,-2.5422, 0.3352,-3.2319\r\n                     -1.4432,-0.2307, -0.4485,-0.83498, -0.0527,-1.9151\r\n                     -1.2304,-0.5137, -1.6742,-1.4126, -1.2459,-2.7388\r\n                     -0.9898,1.2593, -0.9672,-0.606, -1.131,-1.896\r\n                     -0.51549,1.084, -0.9993,2.4142, -1.8584,0.82793\r\n                     -0.92276,2.4614, -1.531,0.17894, -1.9087,-1.2819\r\n                   z;\r\n  \r\n                   m -28.703,-29.65\r\n                   c  3.1162,7.1472, 14.884,15.283, 22.145,4.0018\r\n                      9.3018,4.1406, 15.117,3.6386, 20.494,-2.965\r\n                     -0.43617,6.3017, 1.2104,9.7538, 9.3191,10.168\r\n                     -1.1493,8.2598, 8.8612,12.047, 15.265,10.868\r\n                     -11.198,5.4215, -5.657,7.4156, -1.8,11.045,-8.648\r\n                      2.1575,-7.92, 6.5469,-2.759, 11.991,-10.048\r\n                     -0.531,-15.201, 2.881,-12.404, 12.698,-7.203\r\n                     -3.88,-15.32, -3.284,-18.716, 7.706,-2.0291\r\n                     -6.803,-5.7675, -15.598,-16.779, -6.888,-6.1392\r\n                     -11.865,-11.711, -4.2781,-17.378, 0.0251,1.3326\r\n                     -5.1012,0.91647, -8.8704,-7.5468, -6.5096,5.6288\r\n                     -4.7623,12.722, -9.931,-0.52467, -17.564,5.6568\r\n                     -10.149,0.22658, -12.697,-6.2829, -14.505,8.5128\r\n                     -5.8277,6.2399, -11.655,3.6145, -17.483,6.5728\r\n                      6.4104,11.707, 7.888,13.353, -2.5888\r\n                   z\r\n                   m -1.8891,-9.146\r\n                   c  0.9281,12.155, -7.3194,10.581, -16.623,7.4278\r\n                      6.8723,12.346, 0.4184,17.172, -5.7132,22.181\r\n                      16.358,3.954, 12.037,11.6, 4.9844,19.733\r\n                      17.367,-2.7187, 12.68,4.884, 1.0493,15.737\r\n                      8.4809,-0.78413, 13.776,-1.6578, 12.764,9.3027\r\n                      5.9945,-6.1707, 16.771,-14.287, 18.454,5.9344\r\n                      8.7251,-16.338, 13.519,-7.8198, 18.626,1.7233\r\n                      4.4356,-8.384, 10.119,-16.798, 23.349,-7.968\r\n                     -2.458,-10.692, -1.566,-18.955, 16.527,-14.738\r\n                     -14.567,-12.524, -2.916,-14.736, 4.197,-18.734\r\n                     -18.076,-1.3376, -5.617,-4.8404, -0.66,-11.102\r\n                     -15.41,-2.9776, -20.969,-8.1886, -15.605,-15.876\r\n                     -12.398,7.2993, -12.115,-3.5128, -14.166,-10.991\r\n                     -6.4567,6.2837, -12.517,13.994, -23.277,4.7992\r\n                     -11.558,14.268,-19.177,1.0372,-23.907,-7.4309\r\n                   z\" />\r\n      </path>\r\n    </svg>\r\n  \r\n  <!--== HUD ==================================================================-->\r\n    <g id=\"hud\"\r\n       visibility=\"hidden\" >\r\n      <svg preserveAspectRatio=\"xMinYMid meet\" viewBox=\"0 0 0.1 1\">\r\n        <g transform=\"translate(0.02, 0.98), scale(0.15,-0.15)\">\r\n        <!-- Radar Scope -->\r\n          <g>\r\n            <circle\r\n               class=\"hud-background\"\r\n               cx=\"0.5\"\r\n               cy=\"0.5\"\r\n               r=\"0.5\" />\r\n            <circle id=\"hud-radar-scope-missile-target\"\r\n               clip-path=\"url(#hud-radar-scope-clip-path)\"\r\n               fill=\"#777777\"\r\n               stroke=\"none\"\r\n               r=\"0.04\"\r\n                cx=\"0.5\" cy=\"0.5\" />\r\n            <circle\r\n               id=\"hud-radar-scope-missile\"\r\n               clip-path=\"url(#hud-radar-scope-clip-path)\"\r\n               fill=\"#111111\"\r\n               stroke=\"none\"\r\n               r=\"0.04\" />\r\n            <circle\r\n               class=\"hud-foreground\"\r\n               stroke-width=\"0.04\"\r\n               cx=\"0.5\"\r\n               cy=\"0.5\"\r\n               r=\"0.5\" />\r\n            <clipPath\r\n               id=\"hud-radar-scope-clip-path\" >\r\n              <circle\r\n                 cx=\"0.5\"\r\n                 cy=\"0.5\"\r\n                 r=\"0.5\" />\r\n            </clipPath>\r\n          </g>\r\n        <!-- Speedometer-->\r\n          <g>\r\n            <g\r\n               transform=\"translate(1.1,0.1), scale(1.8,1.8)\">\r\n              <rect\r\n                 class=\"hud-background\"\r\n                 width=\"1.0\"\r\n                 height=\"0.122\" />\r\n  \r\n              <rect id=\"hud-speedometer-bar\"\r\n                 clip-path=\"url(#hud-speedometer-bar-clip-path)\"\r\n                 fill=\"#333333\"\r\n                 stroke=\"none\"\r\n                 x=\"-0.5\"\r\n                 width=\"1.0\"\r\n                 height=\"0.122\" />\r\n  \r\n              <rect\r\n                 class=\"hud-foreground\"\r\n                 stroke-width=\"0.02\"\r\n                 width=\"1.0\"\r\n                 height=\"0.122\" />\r\n  \r\n              <clipPath id=\"hud-speedometer-bar-clip-path\">\r\n                <rect\r\n                   width=\"0.5\"\r\n                   height=\"0.122\" />\r\n              </clipPath>\r\n            </g>\r\n  \r\n            <text id=\"hud-speedometer-label-text\"\r\n               transform=\"translate(1.2, 0.4), scale(0.012,-0.012)\">SPEED</text>\r\n  \r\n            <text id=\"hud-speedometer-speed-text\"\r\n               transform=\"translate(3, 0.1), scale(0.02,-0.02)\" />\r\n  \r\n            <clipPath\r\n               id=\"speedometer-clip-path\" >\r\n              <rect\r\n                 x=\"1.1\"\r\n                 y=\"0.1\"\r\n                 width=\"1.8\"\r\n                 height=\"0.22\" />\r\n            </clipPath>\r\n          </g>\r\n  \r\n        <!-- Lives Indicator ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n          <g>\r\n            <defs>\r\n              <g id=\"hud-lives-indicator-missile\"\r\n                 transform=\"rotate(-65), translate(0,-0.5), scale(0.6,0.6)\">\r\n                <path\r\n                   style=\"fill:white; stroke: black; stroke-linejoin:round;\"\r\n                   stroke-width=\"0.04\"\r\n                   d=\"m -0.07, 0.01\r\n                      L -0.2, -0.07\r\n                      L  0.0,  0.6\r\n                      L  0.2, -0.07\r\n                      L  0.07, 0.01\" />\r\n                <path\r\n                   fill=\"white\"\r\n                   stroke=\"black\"\r\n                   stroke-width=\"0.04\"\r\n                   d=\"m -0.07, 0.0\r\n                      C -0.12, 0.4 -0.12,0.8  0.0,  1.0\r\n                      C  0.12, 0.8  0.12,0.4  0.07, 0.0\r\n                      z\" />\r\n              </g>\r\n            </defs>\r\n            <use id=\"hud-lives-indicator-missile-1\"\r\n               transform=\"translate(0.6,1.4)\"\r\n               visibility=\"hidden\"\r\n               xlink:href=\"#hud-lives-indicator-missile\" />\r\n            <use id=\"hud-lives-indicator-missile-2\"\r\n               transform=\"translate(0.6,1.7)\"\r\n               visibility=\"hidden\"\r\n               xlink:href=\"#hud-lives-indicator-missile\" />\r\n            <use id=\"hud-lives-indicator-missile-3\"\r\n               transform=\"translate(0.6,2.0)\"\r\n               visibility=\"hidden\"\r\n               xlink:href=\"#hud-lives-indicator-missile\" />\r\n            <use id=\"hud-lives-indicator-missile-4\"\r\n               transform=\"translate(0.6,2.3)\"\r\n               visibility=\"hidden\"\r\n               xlink:href=\"#hud-lives-indicator-missile\" />\r\n            <use id=\"hud-lives-indicator-missile-5\"\r\n               transform=\"translate(0.6,2.6)\"\r\n               visibility=\"hidden\"\r\n               xlink:href=\"#hud-lives-indicator-missile\" />\r\n  \r\n            <g id=\"hud-lives-indicator-infinite\"\r\n                 visibility=\"hidden\"\r\n                 transform=\"translate(0.5,1.5)\">\r\n              <use\r\n                 transform=\"translate(0.3,0.15), scale(1.4,1.4)\"\r\n                 xlink:href=\"#hud-lives-indicator-missile\" />\r\n              <path\r\n                 stroke=\"white\"\r\n                 stroke-width=\"0.02\"\r\n                 stroke-opacity=\"0.2\"\r\n                 d=\"m  0.0, 0.04\r\n                    C  0.5, 0.5  0.5,-0.5  0.0,-0.04\r\n                    C -0.5,-0.5 -0.5, 0.5  0.0, 0.04\r\n                    M  0.035, 0.0\r\n                    C  0.43,-0.4  0.43, 0.4  0.035, 0.0\r\n                    M  -0.035, 0.0\r\n                    C  -0.43, 0.4 -0.43,-0.4 -0.035, 0.0\" />\r\n            </g>\r\n  \r\n            <g id=\"hud-lives-indicator-none\"\r\n                 visibility=\"visible\"\r\n                 transform=\"translate(0.5,1.5)\">\r\n              <use\r\n                 transform=\"translate(0.3,0.15), scale(1.4,1.4)\"\r\n                 xlink:href=\"#hud-lives-indicator-missile\" />\r\n              <path\r\n                 transform=\"scale(0.8,0.8)\"\r\n                 stroke=\"white\"\r\n                 stroke-width=\"0.02\"\r\n                 stroke-opacity=\"0.2\"\r\n                 d=\"M  0.0, 0.4\r\n                    A  0.4, 0.4  0 0,0  0.4, 0.0\r\n                    A  0.4, 0.4  0 0,0  0.0,-0.4\r\n                    A  0.4, 0.4  0 0,0 -0.4, 0.0\r\n                    A  0.4, 0.4  0 0,0  0.0, 0.4\r\n                    z\r\n                    M  0.26,-0.20\r\n                    A  0.328,0.328, 0 0,1 -0.20,0.26\r\n                    z\r\n                    M  -0.26,0.20\r\n                    A  0.328,0.328, 0 0,1 0.20,-0.26\r\n                    z\" />\r\n            </g>\r\n  \r\n  \r\n          </g>\r\n        </g>\r\n  \r\n      <!-- Level Indicator ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n        <text id=\"hud-level-indicator\"\r\n           transform=\"translate(0.035, 0.035), scale(0.0025,0.0025)\" />\r\n\r\n      <!-- Frame Rate Indicator ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n        <text id=\"hud-frame-rate-indicator\"\r\n           transform=\"translate(0.035, 0.08), scale(0.0025,0.0025)\"\r\n           fill=\"#333333\" />\r\n  \r\n      </svg>\r\n\r\n\r\n      <svg preserveAspectRatio=\"xMaxYMid meet\" viewBox=\"0 0 0.06 1\">\r\n      <!-- Progress Indicator ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->\r\n        <g\r\n           transform=\"translate(0,0.965), scale(0.95,-0.95)\">\r\n  \r\n          <path\r\n             stroke=\"#333333\"\r\n             stroke-width=\"0.0005\"\r\n             fill=\"white\"\r\n             opacity=\"0.8\"\r\n             d=\"M  0.03   0.0\r\n                l -0.04   0.0\r\n                  -0.005  0.005\r\n                   0.0    0.26\r\n                   0.02   0.02\r\n                   0.0    0.72\r\n                   0.025  0\r\n                z\" />\r\n  \r\n          <text opacity=\"0.8\" transform=\"translate(0.024,0.01), rotate(90), scale(0.0026,-0.0026)\">PROGRESS</text>\r\n  \r\n          <g id=\"hud-progress-indicator-best-progress\"\r\n             transform=\"translate(0,0.2)\">\r\n            <rect\r\n               x=\"-0.01\"\r\n               width=\"0.04\"\r\n               height=\"0.008\"\r\n               fill=\"#777777\" />\r\n            <text\r\n               fill=\"#777777\"\r\n               transform=\"translate(-0.04,-0.002), scale(0.001,-0.001)\">PB</text>\r\n          </g>\r\n  \r\n          <g id=\"hud-progress-indicator-progress\"\r\n             transform=\"translate(0,0.2)\">\r\n            <rect\r\n               x=\"-0.01\"\r\n               width=\"0.04\"\r\n               height=\"0.008\"\r\n               fill=\"#333333\" />\r\n          </g>\r\n  \r\n          <path\r\n             class=\"hud-foreground\"\r\n             stroke-width=\"0.006\"\r\n             d=\"m 0, 1.005\r\n                L 0.03, 1.005\r\n                  0.03, 0\r\n                  0, 0\" />\r\n        </g>\r\n      </svg>\r\n    </g>\r\n  \r\n  <!--== FOG ==================================================================-->\r\n    <rect id=\"fog\"\r\n      width=\"100%\" height=\"100%\"\r\n      fill=\"white\"\r\n      opacity=\"1\" />\r\n  \r\n  <!--== BANNER ===============================================================-->\r\n    <svg id=\"banner\"\r\n       width=\"130%\" height=\"100%\"\r\n       preserveAspectRatio=\"xMaxYMid meet\"\r\n       viewBox=\"0 0 0.01 1\"\r\n       overflow=\"visible\"\r\n       visibility=\"hidden\" >\r\n      <rect\r\n         x=\"-0.1\" y=\"0.45\"\r\n         width=\"6\" height=\"0.2\"\r\n         fill=\"#000\"\r\n         opacity=\"0.95\"\r\n         stroke-linejoin=\"round\"\r\n         stroke-linecap=\"round\"\r\n         stroke-width=\"0.005\" />\r\n  \r\n      <g transform=\"translate(-0.05,0.54) scale(0.004,0.004)\">\r\n        <text id=\"banner-title\"\r\n           fill=\"#fff\" ></text>\r\n      </g>\r\n      <g transform=\"translate(0.25,0.6) scale(0.0025,0.0025)\">\r\n        <text id=\"banner-text\"\r\n           fill=\"#ccc\" ></text>\r\n      </g>\r\n    </svg>\r\n  \r\n  \r\n    <defs>\r\n  \r\n  <!--== BARRIER PATHS ========================================================-->\r\n      <path\r\n         id=\"barrier-path-1\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1 0,100\r\n            A 100,100 0 0,1 -100,0\r\n            A 100,100 0 0,1 0,-100\r\n            A 100,100 0 0,1 100,0\r\n            z\r\n  \r\n            M 0,90\r\n            A 90,90 0 0,0 90,0\r\n            L 30,0\r\n            A 30,30 0 0,1 0,30\r\n            z\r\n  \r\n            M 0,-90\r\n            A 90,90 0 0,0 -90,0\r\n            L -30,0\r\n            A 30,30 0 0,1 0,-30\r\n            z\" />\r\n  \r\n      <path\r\n         id=\"barrier-path-2\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1  0,   100\r\n            A 100,100 0 0,1 -100, 0\r\n            A 100,100 0 0,1  0,  -100\r\n            A 100,100 0 0,1  100, 0\r\n            z\r\n  \r\n            M 80,0\r\n            A 30,30 0 0,0  50,-30\r\n            A 30,30 0 0,0  20, 0\r\n            A 30,30 0 0,0  50, 30\r\n            A 30,30 0 0,0  80, 0\r\n            z\r\n  \r\n  \r\n            M 5,-43.3\r\n            A 30,30 0 0,0 -25, -73.3\r\n            A 30,30 0 0,0 -55, -43.3\r\n            A 30,30 0 0,0 -25, -13.3\r\n            A 30,30 0 0,0  5,  -43.3\r\n            z\r\n  \r\n  \r\n            M 5,43.3\r\n            A 30,30 0 0,0 -25, 13.3\r\n            A 30,30 0 0,0 -55, 43.3\r\n            A 30,30 0 0,0 -25, 73.3\r\n            A 30,30 0 0,0  5,  43.3\r\n            z\" />\r\n  \r\n      <path\r\n         id=\"barrier-path-3\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1  0,   100\r\n            A 100,100 0 0,1 -100, 0\r\n            A 100,100 0 0,1  0,  -100\r\n            A 100,100 0 0,1  100, 0\r\n            z\r\n  \r\n            M 0,90\r\n            A 90,90 0 0,0 90,0\r\n            L 30,0\r\n            A 30,30 0 0,0  0, -30\r\n            A 30,30 0 0,0 -30, 0\r\n            A 30,30 0 0,0  0,  30\r\n            z\" />\r\n  \r\n      <path\r\n         id=\"barrier-path-4\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1  0,   100\r\n            A 100,100 0 0,1 -100, 0\r\n            A 100,100 0 0,1  0,  -100\r\n            A 100,100 0 0,1  100, 0\r\n            z\r\n  \r\n            M -30.78,84.57\r\n            A 90,90 0 0,0 90,0\r\n            L 30,0\r\n            A 30,30 0 0,1 -10.26,28.19\r\n            z\" />\r\n  \r\n      <path\r\n         id=\"barrier-path-5\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1  0,   100\r\n            A 100,100 0 0,1 -100, 0\r\n            A 100,100 0 0,1  0,  -100\r\n            A 100,100 0 0,1  100, 0\r\n            z\r\n  \r\n            M 45,77.94\r\n            A 90,90 0 0,0 45,-77.94\r\n            L 45,-45\r\n            A 58,58 0 0,0 45,45\r\n            z\r\n  \r\n            M -45,-77.94\r\n            A 90,90 0 0,0 -45,77.94\r\n            L -45,45\r\n            A 58,58 0 0,0 -45,-45\r\n            z\" />\r\n  \r\n      <path\r\n         id=\"barrier-path-6\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1  0,   100\r\n            A 100,100 0 0,1 -100, 0\r\n            A 100,100 0 0,1  0,  -100\r\n            A 100,100 0 0,1  100, 0\r\n            z\r\n  \r\n            M  80, 25\r\n            L  80,-25\r\n            L -80,-25\r\n            L -80, 25\r\n            z\" />\r\n  \r\n      <path\r\n         id=\"barrier-path-blank\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1  0,   100\r\n            A 100,100 0 0,1 -100, 0\r\n            A 100,100 0 0,1  0,  -100\r\n            A 100,100 0 0,1  100, 0\r\n            z\r\n  \r\n            M 90,0\r\n            A 90,90 0 0,0  0, -90\r\n            A 90,90 0 0,0 -90, 0\r\n            A 90,90 0 0,0  0,  90\r\n            A 90,90 0 0,0  90, 0\r\n            z\" />\r\n  \r\n      <path\r\n         id=\"barrier-path-finish\"\r\n         d=\"M 100,0\r\n            A 100,100 0 0,1  0,   100\r\n            A 100,100 0 0,1 -100, 0\r\n            A 100,100 0 0,1  0,  -100\r\n            A 100,100 0 0,1  100, 0\r\n            z\r\n  \r\n            M 90,0\r\n            A 90,90 0 0,0  -63.63,  -63.63\r\n            L -53.03,-53.03\r\n            A 75,75 0 0,0  -75,0\r\n            L -90,0\r\n            A 90,90 0 0,0  63.63,63.63\r\n            L 53.03,53.03\r\n            A 75,75 0 0,0  75,0\r\n            z\" />\r\n  \r\n  \r\n  <!-- Collision Detection -->\r\n      <line\r\n         id=\"collision-line\"\r\n         x1=\"-300\"\r\n         y1=\"100\"\r\n         x2=\"100\"\r\n         y2=\"100\" />\r\n    </defs>\r\n  </svg>\r\n\r\n  <div id=\"fullscreen\">\r\n    <button onclick=\"\r\n      document.body.requestFullscreen();\r\n      event.stopPropagation();\r\n      event.preventDefault();\r\n    \">ENTER FULLSCREEN</button>\r\n  </div>\r\n\r\n  <div id=\"app-store\">\r\n    <a href=\"https://apps.apple.com/app/id1531536668\">\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 120 40\">\r\n        <title>Download on the App Store</title>\r\n        <g>\r\n          <g>\r\n            <g>\r\n              <path d=\"M110.13477,0H9.53468c-.3667,0-.729,0-1.09473.002-.30615.002-.60986.00781-.91895.0127A13.21476,13.21476,0,0,0,5.5171.19141a6.66509,6.66509,0,0,0-1.90088.627A6.43779,6.43779,0,0,0,1.99757,1.99707,6.25844,6.25844,0,0,0,.81935,3.61816a6.60119,6.60119,0,0,0-.625,1.90332,12.993,12.993,0,0,0-.1792,2.002C.00587,7.83008.00489,8.1377,0,8.44434V31.5586c.00489.3105.00587.6113.01515.9219a12.99232,12.99232,0,0,0,.1792,2.0019,6.58756,6.58756,0,0,0,.625,1.9043A6.20778,6.20778,0,0,0,1.99757,38.001a6.27445,6.27445,0,0,0,1.61865,1.1787,6.70082,6.70082,0,0,0,1.90088.6308,13.45514,13.45514,0,0,0,2.0039.1768c.30909.0068.6128.0107.91895.0107C8.80567,40,9.168,40,9.53468,40H110.13477c.3594,0,.7246,0,1.084-.002.3047,0,.6172-.0039.9219-.0107a13.279,13.279,0,0,0,2-.1768,6.80432,6.80432,0,0,0,1.9082-.6308,6.27742,6.27742,0,0,0,1.6172-1.1787,6.39482,6.39482,0,0,0,1.1816-1.6143,6.60413,6.60413,0,0,0,.6191-1.9043,13.50643,13.50643,0,0,0,.1856-2.0019c.0039-.3106.0039-.6114.0039-.9219.0078-.3633.0078-.7246.0078-1.0938V9.53613c0-.36621,0-.72949-.0078-1.09179,0-.30664,0-.61426-.0039-.9209a13.5071,13.5071,0,0,0-.1856-2.002,6.6177,6.6177,0,0,0-.6191-1.90332,6.46619,6.46619,0,0,0-2.7988-2.7998,6.76754,6.76754,0,0,0-1.9082-.627,13.04394,13.04394,0,0,0-2-.17676c-.3047-.00488-.6172-.01074-.9219-.01269-.3594-.002-.7246-.002-1.084-.002Z\" style=\"fill: #a6a6a6\"/>\r\n              <path d=\"M8.44483,39.125c-.30468,0-.602-.0039-.90429-.0107a12.68714,12.68714,0,0,1-1.86914-.1631,5.88381,5.88381,0,0,1-1.65674-.5479,5.40573,5.40573,0,0,1-1.397-1.0166,5.32082,5.32082,0,0,1-1.02051-1.3965,5.72186,5.72186,0,0,1-.543-1.6572,12.41351,12.41351,0,0,1-.1665-1.875c-.00634-.2109-.01464-.9131-.01464-.9131V8.44434S.88185,7.75293.8877,7.5498a12.37039,12.37039,0,0,1,.16553-1.87207,5.7555,5.7555,0,0,1,.54346-1.6621A5.37349,5.37349,0,0,1,2.61183,2.61768,5.56543,5.56543,0,0,1,4.01417,1.59521a5.82309,5.82309,0,0,1,1.65332-.54394A12.58589,12.58589,0,0,1,7.543.88721L8.44532.875H111.21387l.9131.0127a12.38493,12.38493,0,0,1,1.8584.16259,5.93833,5.93833,0,0,1,1.6709.54785,5.59374,5.59374,0,0,1,2.415,2.41993,5.76267,5.76267,0,0,1,.5352,1.64892,12.995,12.995,0,0,1,.1738,1.88721c.0029.2832.0029.5874.0029.89014.0079.375.0079.73193.0079,1.09179V30.4648c0,.3633,0,.7178-.0079,1.0752,0,.3252,0,.6231-.0039.9297a12.73126,12.73126,0,0,1-.1709,1.8535,5.739,5.739,0,0,1-.54,1.67,5.48029,5.48029,0,0,1-1.0156,1.3857,5.4129,5.4129,0,0,1-1.3994,1.0225,5.86168,5.86168,0,0,1-1.668.5498,12.54218,12.54218,0,0,1-1.8692.1631c-.2929.0068-.5996.0107-.8974.0107l-1.084.002Z\"/>\r\n            </g>\r\n            <g id=\"_Group_\" data-name=\"&lt;Group&gt;\">\r\n              <g id=\"_Group_2\" data-name=\"&lt;Group&gt;\">\r\n                <g id=\"_Group_3\" data-name=\"&lt;Group&gt;\">\r\n                  <path id=\"_Path_\" data-name=\"&lt;Path&gt;\" d=\"M24.76888,20.30068a4.94881,4.94881,0,0,1,2.35656-4.15206,5.06566,5.06566,0,0,0-3.99116-2.15768c-1.67924-.17626-3.30719,1.00483-4.1629,1.00483-.87227,0-2.18977-.98733-3.6085-.95814a5.31529,5.31529,0,0,0-4.47292,2.72787c-1.934,3.34842-.49141,8.26947,1.3612,10.97608.9269,1.32535,2.01018,2.8058,3.42763,2.7533,1.38706-.05753,1.9051-.88448,3.5794-.88448,1.65876,0,2.14479.88448,3.591.8511,1.48838-.02416,2.42613-1.33124,3.32051-2.66914a10.962,10.962,0,0,0,1.51842-3.09251A4.78205,4.78205,0,0,1,24.76888,20.30068Z\" style=\"fill: #fff\"/>\r\n                  <path id=\"_Path_2\" data-name=\"&lt;Path&gt;\" d=\"M22.03725,12.21089a4.87248,4.87248,0,0,0,1.11452-3.49062,4.95746,4.95746,0,0,0-3.20758,1.65961,4.63634,4.63634,0,0,0-1.14371,3.36139A4.09905,4.09905,0,0,0,22.03725,12.21089Z\" style=\"fill: #fff\"/>\r\n                </g>\r\n              </g>\r\n              <g>\r\n                <path d=\"M42.30227,27.13965h-4.7334l-1.13672,3.35645H34.42727l4.4834-12.418h2.083l4.4834,12.418H43.438ZM38.0591,25.59082h3.752l-1.84961-5.44727h-.05176Z\" style=\"fill: #fff\"/>\r\n                <path d=\"M55.15969,25.96973c0,2.81348-1.50586,4.62109-3.77832,4.62109a3.0693,3.0693,0,0,1-2.84863-1.584h-.043v4.48438h-1.8584V21.44238H48.4302v1.50586h.03418a3.21162,3.21162,0,0,1,2.88281-1.60059C53.645,21.34766,55.15969,23.16406,55.15969,25.96973Zm-1.91016,0c0-1.833-.94727-3.03809-2.39258-3.03809-1.41992,0-2.375,1.23047-2.375,3.03809,0,1.82422.95508,3.0459,2.375,3.0459C52.30227,29.01563,53.24953,27.81934,53.24953,25.96973Z\" style=\"fill: #fff\"/>\r\n                <path d=\"M65.12453,25.96973c0,2.81348-1.50586,4.62109-3.77832,4.62109a3.0693,3.0693,0,0,1-2.84863-1.584h-.043v4.48438h-1.8584V21.44238H58.395v1.50586h.03418A3.21162,3.21162,0,0,1,61.312,21.34766C63.60988,21.34766,65.12453,23.16406,65.12453,25.96973Zm-1.91016,0c0-1.833-.94727-3.03809-2.39258-3.03809-1.41992,0-2.375,1.23047-2.375,3.03809,0,1.82422.95508,3.0459,2.375,3.0459C62.26711,29.01563,63.21438,27.81934,63.21438,25.96973Z\" style=\"fill: #fff\"/>\r\n                <path d=\"M71.71047,27.03613c.1377,1.23145,1.334,2.04,2.96875,2.04,1.56641,0,2.69336-.80859,2.69336-1.91895,0-.96387-.67969-1.541-2.28906-1.93652l-1.60937-.3877c-2.28027-.55078-3.33887-1.61719-3.33887-3.34766,0-2.14258,1.86719-3.61426,4.51855-3.61426,2.624,0,4.42285,1.47168,4.4834,3.61426h-1.876c-.1123-1.23926-1.13672-1.9873-2.63379-1.9873s-2.52148.75684-2.52148,1.8584c0,.87793.6543,1.39453,2.25488,1.79l1.36816.33594c2.54785.60254,3.60645,1.626,3.60645,3.44238,0,2.32324-1.85059,3.77832-4.79395,3.77832-2.75391,0-4.61328-1.4209-4.7334-3.667Z\" style=\"fill: #fff\"/>\r\n                <path d=\"M83.34621,19.2998v2.14258h1.72168v1.47168H83.34621v4.99121c0,.77539.34473,1.13672,1.10156,1.13672a5.80752,5.80752,0,0,0,.61133-.043v1.46289a5.10351,5.10351,0,0,1-1.03223.08594c-1.833,0-2.54785-.68848-2.54785-2.44434V22.91406H80.16262V21.44238H81.479V19.2998Z\" style=\"fill: #fff\"/>\r\n                <path d=\"M86.065,25.96973c0-2.84863,1.67773-4.63867,4.29395-4.63867,2.625,0,4.29492,1.79,4.29492,4.63867,0,2.85645-1.66113,4.63867-4.29492,4.63867C87.72609,30.6084,86.065,28.82617,86.065,25.96973Zm6.69531,0c0-1.9541-.89551-3.10742-2.40137-3.10742s-2.40039,1.16211-2.40039,3.10742c0,1.96191.89453,3.10645,2.40039,3.10645S92.76027,27.93164,92.76027,25.96973Z\" style=\"fill: #fff\"/>\r\n                <path d=\"M96.18606,21.44238h1.77246v1.541h.043a2.1594,2.1594,0,0,1,2.17773-1.63574,2.86616,2.86616,0,0,1,.63672.06934v1.73828a2.59794,2.59794,0,0,0-.835-.1123,1.87264,1.87264,0,0,0-1.93652,2.083v5.37012h-1.8584Z\" style=\"fill: #fff\"/>\r\n                <path d=\"M109.3843,27.83691c-.25,1.64355-1.85059,2.77148-3.89844,2.77148-2.63379,0-4.26855-1.76465-4.26855-4.5957,0-2.83984,1.64355-4.68164,4.19043-4.68164,2.50488,0,4.08008,1.7207,4.08008,4.46582v.63672h-6.39453v.1123a2.358,2.358,0,0,0,2.43555,2.56445,2.04834,2.04834,0,0,0,2.09082-1.27344Zm-6.28223-2.70215h4.52637a2.1773,2.1773,0,0,0-2.2207-2.29785A2.292,2.292,0,0,0,103.10207,25.13477Z\" style=\"fill: #fff\"/>\r\n              </g>\r\n            </g>\r\n          </g>\r\n          <g id=\"_Group_4\" data-name=\"&lt;Group&gt;\">\r\n            <g>\r\n              <path d=\"M37.82619,8.731a2.63964,2.63964,0,0,1,2.80762,2.96484c0,1.90625-1.03027,3.002-2.80762,3.002H35.67092V8.731Zm-1.22852,5.123h1.125a1.87588,1.87588,0,0,0,1.96777-2.146,1.881,1.881,0,0,0-1.96777-2.13379h-1.125Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M41.68068,12.44434a2.13323,2.13323,0,1,1,4.24707,0,2.13358,2.13358,0,1,1-4.24707,0Zm3.333,0c0-.97607-.43848-1.54687-1.208-1.54687-.77246,0-1.207.5708-1.207,1.54688,0,.98389.43457,1.55029,1.207,1.55029C44.57522,13.99463,45.01369,13.42432,45.01369,12.44434Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M51.57326,14.69775h-.92187l-.93066-3.31641h-.07031l-.92676,3.31641h-.91309l-1.24121-4.50293h.90137l.80664,3.436h.06641l.92578-3.436h.85254l.92578,3.436h.07031l.80273-3.436h.88867Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M53.85354,10.19482H54.709v.71533h.06641a1.348,1.348,0,0,1,1.34375-.80225,1.46456,1.46456,0,0,1,1.55859,1.6748v2.915h-.88867V12.00586c0-.72363-.31445-1.0835-.97168-1.0835a1.03294,1.03294,0,0,0-1.0752,1.14111v2.63428h-.88867Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M59.09377,8.437h.88867v6.26074h-.88867Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M61.21779,12.44434a2.13346,2.13346,0,1,1,4.24756,0,2.1338,2.1338,0,1,1-4.24756,0Zm3.333,0c0-.97607-.43848-1.54687-1.208-1.54687-.77246,0-1.207.5708-1.207,1.54688,0,.98389.43457,1.55029,1.207,1.55029C64.11232,13.99463,64.5508,13.42432,64.5508,12.44434Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M66.4009,13.42432c0-.81055.60352-1.27783,1.6748-1.34424l1.21973-.07031v-.38867c0-.47559-.31445-.74414-.92187-.74414-.49609,0-.83984.18213-.93848.50049h-.86035c.09082-.77344.81836-1.26953,1.83984-1.26953,1.12891,0,1.76563.562,1.76563,1.51318v3.07666h-.85547v-.63281h-.07031a1.515,1.515,0,0,1-1.35254.707A1.36026,1.36026,0,0,1,66.4009,13.42432Zm2.89453-.38477v-.37646l-1.09961.07031c-.62012.0415-.90137.25244-.90137.64941,0,.40527.35156.64111.835.64111A1.0615,1.0615,0,0,0,69.29543,13.03955Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M71.34816,12.44434c0-1.42285.73145-2.32422,1.86914-2.32422a1.484,1.484,0,0,1,1.38086.79h.06641V8.437h.88867v6.26074h-.85156v-.71143h-.07031a1.56284,1.56284,0,0,1-1.41406.78564C72.0718,14.772,71.34816,13.87061,71.34816,12.44434Zm.918,0c0,.95508.4502,1.52979,1.20313,1.52979.749,0,1.21191-.583,1.21191-1.52588,0-.93848-.46777-1.52979-1.21191-1.52979C72.72121,10.91846,72.26613,11.49707,72.26613,12.44434Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M79.23,12.44434a2.13323,2.13323,0,1,1,4.24707,0,2.13358,2.13358,0,1,1-4.24707,0Zm3.333,0c0-.97607-.43848-1.54687-1.208-1.54687-.77246,0-1.207.5708-1.207,1.54688,0,.98389.43457,1.55029,1.207,1.55029C82.12453,13.99463,82.563,13.42432,82.563,12.44434Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M84.66945,10.19482h.85547v.71533h.06641a1.348,1.348,0,0,1,1.34375-.80225,1.46456,1.46456,0,0,1,1.55859,1.6748v2.915H87.605V12.00586c0-.72363-.31445-1.0835-.97168-1.0835a1.03294,1.03294,0,0,0-1.0752,1.14111v2.63428h-.88867Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M93.51516,9.07373v1.1416h.97559v.74854h-.97559V13.2793c0,.47168.19434.67822.63672.67822a2.96657,2.96657,0,0,0,.33887-.02051v.74023a2.9155,2.9155,0,0,1-.4834.04541c-.98828,0-1.38184-.34766-1.38184-1.21582v-2.543h-.71484v-.74854h.71484V9.07373Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M95.70461,8.437h.88086v2.48145h.07031a1.3856,1.3856,0,0,1,1.373-.80664,1.48339,1.48339,0,0,1,1.55078,1.67871v2.90723H98.69v-2.688c0-.71924-.335-1.0835-.96289-1.0835a1.05194,1.05194,0,0,0-1.13379,1.1416v2.62988h-.88867Z\" style=\"fill: #fff\"/>\r\n              <path d=\"M104.76125,13.48193a1.828,1.828,0,0,1-1.95117,1.30273A2.04531,2.04531,0,0,1,100.73,12.46045a2.07685,2.07685,0,0,1,2.07617-2.35254c1.25293,0,2.00879.856,2.00879,2.27V12.688h-3.17969v.0498a1.1902,1.1902,0,0,0,1.19922,1.29,1.07934,1.07934,0,0,0,1.07129-.5459Zm-3.126-1.45117h2.27441a1.08647,1.08647,0,0,0-1.1084-1.1665A1.15162,1.15162,0,0,0,101.63527,12.03076Z\" style=\"fill: #fff\"/>\r\n            </g>\r\n          </g>\r\n        </g>\r\n      </svg>\r\n    </a>\r\n  </div>\r\n\r\n  <!--== SCRIPTS ==============================================================-->\r\n  \r\n  <!-- Kevin Lindsey's 2d geometry SVG library -->\r\n  <script type=\"application/javascript\" src=\"lib/kevlindev/2D.js\"></script>\r\n  <script type=\"application/javascript\" src=\"lib/kevlindev/Path.js\"></script>\r\n  \r\n  <!-- Game files -->\r\n  <script type=\"application/javascript\" src=\"src/base.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/util.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/missile.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/wall.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/barrier.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/barrierQueue.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/game.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/hud.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/banner.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/fog.js\"></script>\r\n  <script type=\"application/javascript\" src=\"src/main.js\"></script>\r\n<footer>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>\r\n</body>\r\n</html>\r\n","FHgame/game1/webcopy-origin.txt":"Uri: https://missile-game.bwhmather.com/\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\index.htm\r\nContent Type: text/html\r\n\r\nUri: https://missile-game.bwhmather.com/lib/kevlindev/2D.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\lib\\kevlindev\\2D.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/lib/kevlindev/Path.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\lib\\kevlindev\\Path.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/banner.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\banner.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/barrier.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\barrier.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/barrierQueue.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\barrierQueue.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/base.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\base.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/fog.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\fog.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/game.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\game.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/hud.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\hud.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/main.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\main.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/missile.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\missile.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/util.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\util.js\r\nContent Type: application/javascript\r\n\r\nUri: https://missile-game.bwhmather.com/src/wall.js\r\nFile Name: C:\\Downloaded Web Sites\\missile-game.bwhmather.com\\src\\wall.js\r\nContent Type: application/javascript\r\n\r\n","FHgame/game1/src/":"","FHgame/game1/src/banner.js":"MG.banner = (function () {\r\n    var SHOW_TIME = 1.1;\r\n    var HIDE_TIME = 0.8;\r\n\r\n    var BannerState = {\r\n        HIDDEN: 'hidden',\r\n        VISIBLE: 'visible',\r\n        MESSAGE_QUEUED: 'message-queued'\r\n    };\r\n\r\n    var mTitle = '';\r\n    var mText = '';\r\n\r\n    var mRootNode;\r\n\r\n    var mTitleNode;\r\n    var mTextNode;\r\n\r\n    var mVisibility;\r\n\r\n    var mState;\r\n\r\n\r\n\r\n    return {\r\n        init: function () {\r\n            mVisibility = 0.0;\r\n            mState = BannerState.HIDDEN;\r\n\r\n            mRootNode = document.getElementById('banner');\r\n\r\n            var titleBoxNode = document.getElementById('banner-title');\r\n            mTitleNode = document.createTextNode('');\r\n            titleBoxNode.appendChild(mTitleNode);\r\n\r\n            var textBoxNode = document.getElementById('banner-text');\r\n            mTextNode = document.createTextNode('');\r\n            textBoxNode.appendChild(mTextNode);\r\n\r\n            mRootNode.setAttribute('visibility', 'visible');\r\n\r\n        },\r\n\r\n        update: function (dt) {\r\n            switch (mState) {\r\n              case BannerState.VISIBLE:\r\n                mVisibility += dt/SHOW_TIME;\r\n                break;\r\n              case BannerState.MESSAGE_QUEUED:\r\n                if (mVisibility === 0) {\r\n                    mState = BannerState.VISIBLE;\r\n\r\n                    mTitleNode.data = mTitle;\r\n                    mTextNode.data  = mText;\r\n                }\r\n                // FALLTHROUGH\r\n              case BannerState.HIDDEN:\r\n                mVisibility -= dt/HIDE_TIME;\r\n                break;\r\n            }\r\n            mVisibility = Math.max(0,Math.min(1, mVisibility));\r\n        },\r\n\r\n        updateDOM: function () {\r\n            if (mVisibility === 0) {\r\n                mRootNode.setAttribute('visibility', 'hidden');\r\n            } else {\r\n                mRootNode.setAttribute('width', (30 + 80*(0.5 + 0.5*Math.cos(Math.PI*mVisibility))) + '%');\r\n                mRootNode.setAttribute('visibility', 'visible');\r\n            }\r\n        },\r\n\r\n\r\n        hide: function () {\r\n            mState = BannerState.HIDDEN;\r\n\r\n        },\r\n\r\n        show: function (newTitle, newText) {\r\n\r\n            mTitle = String(newTitle);\r\n            mText = String(newText);\r\n\r\n            mState = BannerState.MESSAGE_QUEUED;\r\n        },\r\n\r\n        isFullyVisible: function () {\r\n            return mVisibility === 1;\r\n        }\r\n        \r\n    };\r\n}());\r\n\r\n\r\n","FHgame/game1/src/barrier.js":"\r\nMG.BarrierType = {\r\n    RANDOM: 'random',\r\n\r\n    BARRIER_1: 1,\r\n    BARRIER_2: 2,\r\n    BARRIER_3: 3,\r\n    BARRIER_4: 4,\r\n    BARRIER_5: 5,\r\n    BARRIER_6: 6,\r\n\r\n    BLANK: 'blank',\r\n    START: 'start',\r\n    FINISH: 'finish'\r\n};\r\n\r\n\r\nMG.NUM_RANDOM_BARRIERS = 6;\r\n\r\n\r\n\r\n/* TODO find nicer way of initalising MG.BARRIER_PATH_IDS */\r\nMG.BARRIER_PATH_IDS = {}\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.RANDOM] = '';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.BARRIER_1] = 'barrier-path-1';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.BARRIER_2] = 'barrier-path-2';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.BARRIER_3] = 'barrier-path-3';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.BARRIER_4] = 'barrier-path-4';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.BARRIER_5] = 'barrier-path-5';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.BARRIER_6] = 'barrier-path-6';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.BLANK] = 'barrier-path-blank';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.START] = 'barrier-path-blank';\r\nMG.BARRIER_PATH_IDS[MG.BarrierType.FINISH] = 'barrier-path-finish';\r\n\r\n\r\nMG.Barrier = function (type) {\r\n    if (type === undefined) {type = MG.BarrierType.RANDOM;}\r\n\r\n    var mIsInitialised = false;\r\n\r\n    var mTheta = 0.0;\r\n    var mDTheta = 300.0*(0.5 - Math.random());\r\n\r\n    var mIsRandom = (type === MG.BarrierType.RANDOM);\r\n    var mType = (type === MG.BarrierType.RANDOM) ? Math.ceil(MG.NUM_RANDOM_BARRIERS*Math.random()) : type;\r\n\r\n    var mRootNode;\r\n    var mFrontPath;\r\n    var mBackPath;\r\n\r\n    this.init = function () {\r\n\r\n        mRootNode = document.createElementNS(NAMESPACE_SVG, 'g');\r\n\r\n        /* The path representing the face nearest the camera */\r\n        mFrontPath = document.getElementById(MG.BARRIER_PATH_IDS[mType]).cloneNode(true);\r\n        mFrontPath.setAttribute('class', 'barrier-path-front');\r\n\r\n        /* The path partially obscured by the front path, added to give the illusion of thickness. */\r\n        mBackPath = document.getElementById(MG.BARRIER_PATH_IDS[mType]).cloneNode(true);\r\n        mBackPath.setAttribute('class', 'barrier-path-back');\r\n\r\n        mRootNode.setAttribute('class', 'barrier');\r\n        mRootNode.appendChild(mBackPath);\r\n        mRootNode.appendChild(mFrontPath);\r\n\r\n        mIsInitialised = true;\r\n    };\r\n\r\n    this.destroy = function () {\r\n        mRootNode.parentNode.removeChild(mRootNode);\r\n    };\r\n\r\n    /**\r\n     * Checks whether the point specified by x and y will collide with the barrier.\r\n     * Works by counting the number of intersections between the path outlining the\r\n     * barrier and a line between some point outside of the barrier, and the point\r\n     * that is being tested.\r\n     * Returns true if the point intersects the transformed barrier, false otherwise.\r\n     */\r\n    this.collides = function (x, y) {\r\n        /* transform the provided coordinates to the coordinate system of the barrier */\r\n        var x_ =    x * Math.cos(mTheta*Math.PI/180) + y * Math.sin(mTheta*Math.PI/180);\r\n        var y_ = -x * Math.sin(mTheta*Math.PI/180) + y * Math.cos(mTheta*Math.PI/180);\r\n\r\n        /* the line to be used for finding the intersections should already exist\r\n        but needs to be made to the point to the point that is to be tested */\r\n        var lineNode = document.getElementById('collision-line');\r\n        lineNode.setAttribute('x2', x_);\r\n        lineNode.setAttribute('y2', y_);\r\n\r\n        /* As the barriers path may not have been created yet, the original path is used */\r\n        var pathNode = document.getElementById(MG.BARRIER_PATH_IDS[mType]);\r\n\r\n\r\n        /* `Line` and `Path` are both part of Kevin Lindsey's svg geometry library. */\r\n        /* `Path` has been hacked to properly support elliptical arc segments. */\r\n        var line = new Line(lineNode);\r\n        var path = new Path(pathNode);\r\n\r\n        var intersections = new Intersection.intersectShapes(path, line);\r\n\r\n        return intersections.points.length % 2 === 1;\r\n    };\r\n\r\n\r\n    this.update = function (dt) {\r\n        mTheta += mDTheta * dt;\r\n    };\r\n\r\n\r\n    /**\r\n     * Updates the barriers representation in the DOM to reflect changes made at\r\n     * the last update.\r\n     * `x` and `y` define the position of the viewpoint.\r\n     * `offset` is the distance of the barrier from the viewpoint.\r\n     */\r\n    this.updateDOM = function (x, y, offset) {\r\n        var frontScale = MG.PROJECTION_PLANE_DISTANCE / \r\n                (Math.tan(Math.PI * MG.FIELD_OF_VIEW/360.0)*(offset));\r\n\r\n        var backScale    = MG.PROJECTION_PLANE_DISTANCE /\r\n                (Math.tan(Math.PI * MG.FIELD_OF_VIEW/360.0)*(offset + 10));\r\n\r\n        mFrontPath.setAttribute('transform',\r\n                'scale(' + frontScale + ') translate(' + x    + ',' + y + ') rotate(' + mTheta + ')');\r\n        mBackPath.setAttribute('transform',\r\n                'scale(' + backScale + ') translate(' + x    + ',' + y + ') rotate(' + mTheta + ')');\r\n\r\n        offset = Math.max(MG.LINE_OF_SIGHT - MG.BARRIER_SPACING ,Math.min(MG.LINE_OF_SIGHT,offset));\r\n        var fog = 100 -100*(MG.LINE_OF_SIGHT - offset)/MG.BARRIER_SPACING;\r\n\r\n        mFrontPath.setAttribute('fill',   'rgb('+(100+fog)+'%,'\r\n                                                +(100+fog)+'%,'\r\n                                                +(100+fog)+'%)');\r\n        mBackPath.setAttribute('fill',    'rgb(' +(60+fog)+'%,'\r\n                                                 +(60+fog)+'%,'\r\n                                                 +(60+fog)+'%)');\r\n        mFrontPath.setAttribute('stroke', 'rgb('  +(0+fog)+'%,'\r\n                                                  +(0+fog)+'%,'\r\n                                                  +(0+fog)+'%)');\r\n        mBackPath.setAttribute('stroke',  'rgb('  +(0+fog)+'%,'\r\n                                                  +(0+fog)+'%,'\r\n                                                  +(0+fog)+'%)');\r\n    };\r\n\r\n    this.getType = function () {\r\n        return mType;\r\n    };\r\n\r\n    this.isRandom = function () {\r\n        return mIsRandom;\r\n    };\r\n\r\n    this.isInitialised = function () {\r\n        return mIsInitialised;\r\n    };\r\n\r\n    this.getRootNode = function () {\r\n        return mRootNode;\r\n    };\r\n\r\n\r\n\r\n};\r\n","FHgame/game1/src/barrierQueue.js":"MG.barrierQueue = (function () {\r\n    var mBarrierQueue = [];\r\n    var mRootNode;\r\n\r\n    var mFirstBarrierIndex = 0;\r\n\r\n    return {\r\n        init: function (rootNode) {\r\n            mRootNode = rootNode;\r\n        },\r\n\r\n        update: function (dt) {\r\n            var i;\r\n\r\n            /* iterate through and update each of the barriers in the queue */\r\n            for (i = mFirstBarrierIndex; i < mBarrierQueue.length; i++) {\r\n                mBarrierQueue[i].update(dt);\r\n            }\r\n        },\r\n\r\n        updateDOM: function (missileX, missileY, missileOffset) {\r\n            var i;\r\n\r\n            /* Remove any barriers that have been queued for deletion */\r\n            while (mFirstBarrierIndex > 0) {\r\n                mBarrierQueue[0].destroy();\r\n                mBarrierQueue.shift();\r\n                mFirstBarrierIndex --;\r\n            }\r\n\r\n            /* Initialise any uninitialised barriers and add them behind the ones already there. */\r\n            for (i = 0; i < mBarrierQueue.length; i++) {\r\n                var barrier = mBarrierQueue[i];\r\n\r\n                if (!barrier.isInitialised()) {\r\n                    barrier.init();\r\n\r\n                    if (i > 0) {\r\n                        mRootNode.insertBefore(barrier.getRootNode(), mBarrierQueue[i-1].getRootNode());\r\n                    } else {\r\n                        mRootNode.appendChild(barrier.getRootNode());\r\n                    }\r\n                }\r\n            }\r\n\r\n            var z = 0.0;\r\n            for (i = 0; i < mBarrierQueue.length; i++) {\r\n                mBarrierQueue[i].updateDOM(missileX, missileY, z + missileOffset);\r\n                z += MG.BARRIER_SPACING;\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Adds a new barrier to the end of the queue.\r\n         * The starting angle and angular rate are randomized.\r\n         */\r\n        pushBarrier: function (type) {\r\n            /* Create a new barrier but do not initialise it */\r\n            var barrier = new MG.Barrier(type);\r\n\r\n            /* Add the barrier to the internal list */\r\n            mBarrierQueue[mBarrierQueue.length] = barrier;\r\n\r\n        },\r\n\r\n        /**\r\n         * Pops the barrier closest to the missile.\r\n         */\r\n        popBarrier: function () {\r\n            mFirstBarrierIndex++;\r\n            mFirstBarrierIndex = Math.min(mFirstBarrierIndex, mBarrierQueue.length);\r\n        },\r\n\r\n        /**\r\n         * Returns a reference to the barrier at the front of the queue.\r\n         */\r\n        nextBarrier: function () {\r\n            return mBarrierQueue[mFirstBarrierIndex];\r\n        },\r\n\r\n        /**\r\n         * Deletes all barriers and returns the queue to it's original, empty state.\r\n         */\r\n        reset: function () {\r\n            while (mFirstBarrierIndex < mBarrierQueue.length) {\r\n                this.popBarrier();\r\n            }\r\n        },\r\n\r\n        /**\r\n         * Returns true if there are no barriers queued.\r\n         */\r\n        isEmpty: function () {\r\n            return this.nextBarrier() === undefined;\r\n        },\r\n\r\n\r\n        /**\r\n         * Returns the number of barriers in the queue that have not been marked for deletion.\r\n         */\r\n        numBarriers: function () {\r\n            return mBarrierQueue.length - mFirstBarrierIndex;\r\n        }\r\n    };\r\n}());\r\n\r\n\r\n\r\n","FHgame/game1/src/base.js":"// Namespace\r\nvar MG = {};\r\n\r\n//==============================================================================\r\n// Constants\r\n//==============================================================================\r\n\r\nNAMESPACE_SVG   = 'http://www.w3.org/2000/svg';\r\nNAMESPACE_XLINK = 'http://www.w3.org/1999/xlink';\r\n\r\n//\r\n\r\nMG.BARRIERS_ROOT_ELEMENT_ID  = 'barriers';\r\nMG.HUD_ROOT_ELEMENT_ID       = 'hud';\r\nMG.MENU_ROOT_ELEMENT_ID      = 'menu';\r\n\r\nMG.BARRIER_SPACING = 650.0;\r\nMG.TUNNEL_RADIUS = 100;\r\nMG.MISSILE_LENGTH = 50.0;\r\n\r\nMG.LINE_OF_SIGHT = 1600.0;\r\nMG.FIELD_OF_VIEW = 60.0;\r\nMG.PROJECTION_PLANE_DISTANCE = 100;\r\n\r\n\r\n\r\n\r\n\r\n","FHgame/game1/src/fog.js":"\r\n\r\n\r\nMG.fog = (function (){\r\n    var SHOW_TIME = 2.0;\r\n    var HIDE_TIME = 4.0;\r\n\r\n    var FogState = {\r\n        FADING_IN:  'fading-in',\r\n        FADING_OUT: 'fading-out'\r\n    };\r\n\r\n    var mState = FogState.FADING_OUT;\r\n\r\n    var mCallback = null;\r\n\r\n    var mRootNode;\r\n    var mVisibility = 1.0;\r\n\r\n    return {\r\n        init: function () {\r\n            mRootNode = document.getElementById('fog');\r\n        },\r\n\r\n        fadeIn: function (newCallback) {\r\n            mState = FogState.FADING_IN;\r\n            mRootNode.setAttribute('visibility', 'visible');\r\n            mCallback = newCallback;\r\n        },\r\n\r\n        fadeOut: function (callback) {\r\n            mState = FogState.FADING_OUT;\r\n            mCallback = callback;\r\n        },\r\n\r\n        update: function (dt) {\r\n            if (mState === FogState.FADING_OUT) {\r\n                mVisibility -= dt/HIDE_TIME;\r\n\r\n                if (mVisibility < 0) {\r\n                    mVisibility = 0;\r\n                    if (mCallback) {\r\n                        mCallback();\r\n                        mCallback = undefined;\r\n                    }\r\n                }\r\n            } else {\r\n                mVisibility += dt/SHOW_TIME;\r\n\r\n                if (mVisibility > 1) {\r\n                    mVisibility = 1;\r\n                    if (mCallback) {\r\n                        mCallback();\r\n                        mCallback = undefined;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        updateDOM: function () {\r\n            if (mVisibility < 0) {\r\n                mRootNode.setAttribute('visibility', 'hidden');\r\n            } else {\r\n                mRootNode.setAttribute('visibility', 'visible');\r\n                mRootNode.setAttribute('opacity', String((0.5 - 0.5*Math.cos(Math.PI*mVisibility))));\r\n            }\r\n        }\r\n    };\r\n}());\r\n","FHgame/game1/src/game.js":"MG.game = (function () {\r\n\r\n    /** Constants **/\r\n    var GameState = {\r\n        WAIT_START: 'wait_start',\r\n        STARTING:   'starting',\r\n        RUNNING:    'running',\r\n        FINISHED:   'finished',\r\n        CRASHED:    'crashed'\r\n    }\r\n\r\n    var STARTING_LIVES = 5;\r\n\r\n    var LEVEL_NUM_BARRIERS = 20;\r\n\r\n    /** Variables **/\r\n    var mState = GameState.WAIT_START;\r\n\r\n    var mLives = STARTING_LIVES;\r\n    var mLevel = 0;\r\n\r\n    var mRemainingBarriers = 0;\r\n    var mBarriersToPass = 0;\r\n\r\n    var mProgress = 0.0;\r\n    var mBestProgress = 0.0;\r\n\r\n    var mAppStore;\r\n\r\n    /* Strings for UI ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~*/\r\n    var getLevelString = function () {\r\n        return mLevel ? 'LEVEL ' + mLevel : 'QUALIFYING LEVEL';\r\n    }\r\n\r\n    var Messages = {\r\n        START: {\r\n            title: getLevelString,\r\n            text:  function () {return 'CLICK TO BEGIN';}\r\n        },\r\n        CRASH: {\r\n            title: function () {return 'CRASHED';},\r\n            text:  function () {return 'CLICK TO RETRY';}\r\n        },\r\n        GAME_OVER: {\r\n            title: function () {return 'GAME OVER';},\r\n            text:  function () {return 'CLICK TO START AGAIN';}\r\n        },\r\n        FINISH: {\r\n            title: function () {return 'LEVEL COMPLETED';},\r\n            text:  function () {return 'CLICK TO CONTINUE';}\r\n        }\r\n    };\r\n\r\n\r\n\r\n    var getLevelStartVelocity   = function (level) {\r\n        return 300 + 100*level;\r\n    }\r\n\r\n    var getLevelFinishVelocity  = function (level) {\r\n        return 400 + 100*level;\r\n    }\r\n\r\n    var getPreLevelIdleVelocity = function (level) {\r\n        return 350 + 100*level;\r\n    }\r\n\r\n    var getPostLevelIdleVelocity = function (level) {\r\n        return 550 + 100*level;\r\n    }\r\n\r\n    var playCrashAnimation = function () {\r\n        // TODO move drawing out of the update loop\r\n\r\n        // create a copy of the explosion element\r\n        var explosion = document.getElementById('explosion');\r\n\r\n        // play the animation\r\n        explosion.firstChild.beginElement();\r\n        explosion.setAttribute('visibility', 'visible');\r\n\r\n        // TODO can't seem to get a callback to fire when the animation\r\n        // finishes. Use timeout instead\r\n        setTimeout(function (){\r\n            var explosion = document.getElementById('explosion');\r\n            explosion.setAttribute('visibility', 'hidden');\r\n        }, 400);\r\n    }\r\n\r\n    var goWaitStartLevel = function () {\r\n        MG.banner.show(Messages.START.title(), Messages.START.text());\r\n        MG.util.showMouse();\r\n\r\n        MG.missile.setAutopilot();\r\n        MG.missile.setVelocity(getPreLevelIdleVelocity(mLevel));\r\n\r\n        if (mLevel === 0) {mLives = Infinity;}\r\n\r\n        mState = GameState.WAIT_START;\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n    var goRun = function () {\r\n        MG.banner.hide();\r\n        MG.util.hideMouse();\r\n\r\n        /* TODO should the start barrier be pushed here?\r\n        If so, should all of the barriers for the entire level be pushed as well? */\r\n        mRemainingBarriers = LEVEL_NUM_BARRIERS;\r\n        MG.barrierQueue.pushBarrier(MG.BarrierType.START);\r\n\r\n        mBarriersToPass = LEVEL_NUM_BARRIERS;\r\n\r\n        MG.missile.setManual();\r\n\r\n        mState = GameState.STARTING;\r\n    }\r\n\r\n    var goFinish = function () {\r\n        MG.banner.show(Messages.FINISH.title(), Messages.FINISH.text());\r\n        MG.util.showMouse();\r\n\r\n        MG.missile.setAutopilot();\r\n        MG.missile.setVelocity(getPostLevelIdleVelocity(mLevel));\r\n\r\n        mState = GameState.FINISHED;\r\n    }\r\n\r\n    var goCrash = function () {\r\n        MG.util.showMouse();\r\n\r\n        if (mLives === 0) {\r\n            MG.banner.show(Messages.GAME_OVER.title(), Messages.GAME_OVER.text());\r\n        } else {\r\n            MG.banner.show(Messages.CRASH.title(), Messages.CRASH.text());\r\n        }\r\n\r\n        playCrashAnimation()\r\n\r\n        mState = GameState.CRASHED;\r\n\r\n    }\r\n\r\n\r\n    //==========================================================================\r\n\r\n    return {\r\n        init: function () {\r\n            var rootNode = document.getElementById('tunnel');\r\n\r\n            MG.missile.init();\r\n\r\n            //\r\n\r\n            var wallNode;\r\n\r\n            wallNode = document.createElementNS(NAMESPACE_SVG, 'g');\r\n            wallNode.setAttribute('transform', 'scale(1,-1)');\r\n\r\n            MG.tunnelWall.init(wallNode);\r\n\r\n            rootNode.appendChild(wallNode);\r\n\r\n            //\r\n\r\n            var barrierQueueNode;\r\n\r\n            barrierQueueNode = document.createElementNS(NAMESPACE_SVG, 'g');\r\n            barrierQueueNode.setAttribute('transform', 'scale(1,-1)');\r\n\r\n            MG.barrierQueue.init(barrierQueueNode);\r\n\r\n            rootNode.appendChild(barrierQueueNode);\r\n\r\n            //\r\n\r\n            goWaitStartLevel();\r\n\r\n            rootNode.setAttribute('visibility', 'visible');\r\n\r\n            mAppStore = document.getElementById('app-store');\r\n        },\r\n\r\n\r\n        update: function (dt) {\r\n            MG.missile.update(dt);    \r\n            MG.tunnelWall.update(dt);\r\n            MG.barrierQueue.update(dt);    \r\n\r\n            /* check whether the nearest barrier has been reached and whether the missile collides with it. */\r\n            if (!MG.barrierQueue.isEmpty()) {\r\n                if (MG.missile.getOffset() < MG.MISSILE_LENGTH && !MG.missile.isCrashed()){\r\n                    var barrier = MG.barrierQueue.nextBarrier();\r\n\r\n                    if (barrier.collides(MG.missile.getPosition().x, MG.missile.getPosition().y)) {\r\n                        // CRASH\r\n                        MG.missile.onCrash();\r\n                        goCrash();\r\n                    } else {\r\n\r\n                        // BARRIER PASSED\r\n                        MG.barrierQueue.popBarrier();\r\n                        MG.missile.onBarrierPassed();\r\n\r\n                        // TODO this block makes loads of assumptions about state\r\n                        if (mState === GameState.RUNNING\r\n                         || mState === GameState.STARTING) {\r\n                            switch(barrier.getType()) {\r\n                              case MG.BarrierType.FINISH:\r\n                                goFinish();\r\n                                break;\r\n                              case MG.BarrierType.BLANK:\r\n                                break;\r\n                              case MG.BarrierType.START:\r\n                                mState = GameState.RUNNING;\r\n                                // FALLTHROUGH\r\n                              default:\r\n                                mBarriersToPass--;\r\n\r\n                                var startVelocity = getLevelStartVelocity(mLevel);\r\n                                var finishVelocity = getLevelFinishVelocity(mLevel);\r\n\r\n                                MG.missile.setVelocity(startVelocity\r\n                                                         + (startVelocity - finishVelocity)\r\n                                                           * (mBarriersToPass - LEVEL_NUM_BARRIERS)\r\n                                                             / LEVEL_NUM_BARRIERS);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }    \r\n            }\r\n\r\n        \r\n            /* Pad the barrier queue with blank barriers so that there are barriers\r\n            as far as can be seen. */\r\n            while (MG.barrierQueue.numBarriers() < MG.LINE_OF_SIGHT/MG.BARRIER_SPACING) {\r\n                var type = MG.BarrierType.BLANK;\r\n    \r\n                if (mState === GameState.RUNNING\r\n                 || mState === GameState.STARTING) {\r\n                    mRemainingBarriers--;\r\n                    if (mRemainingBarriers > 0) {\r\n                        type = MG.BarrierType.RANDOM;\r\n                    } else if (mRemainingBarriers === 0) {\r\n                        type = MG.BarrierType.FINISH;\r\n                    } else {\r\n                        type = MG.BarrierType.BLANK;\r\n                    }\r\n                }\r\n    \r\n                MG.barrierQueue.pushBarrier(type);\r\n            }\r\n\r\n            /* Update progress */\r\n            switch (mState) {\r\n              case GameState.RUNNING:\r\n                mProgress = 1 - (mBarriersToPass*MG.BARRIER_SPACING + MG.missile.getOffset())/(LEVEL_NUM_BARRIERS * MG.BARRIER_SPACING);\r\n                mBestProgress = Math.max(mProgress, mBestProgress);\r\n                break;\r\n              case GameState.FINISHED:\r\n                mProgress = 1;\r\n                mBestProgress = 1;\r\n                break;\r\n              case GameState.STARTING:\r\n                mProgress = 0;\r\n                break;\r\n              default:\r\n                break;\r\n            }\r\n\r\n\r\n            mAppStore.setAttribute(\r\n              'class',\r\n              mState === GameState.RUNNING || mState === GameState.STARTING ? 'hidden' : ''\r\n            );\r\n        },\r\n\r\n        updateDOM: function () {\r\n            var position = MG.missile.getPosition();\r\n            var offset = MG.missile.getOffset();\r\n\r\n            MG.barrierQueue.updateDOM(-position.x, -position.y, offset);\r\n            MG.tunnelWall.updateDOM(-position.x, -position.y, offset);\r\n        },\r\n\r\n        onMouseMove: function (x, y) {\r\n            var windowWidth = window.innerWidth;\r\n            var windowHeight = window.innerHeight;\r\n\r\n            MG.missile.setTarget(x - 0.5*windowWidth, -(y - 0.5*windowHeight));\r\n\r\n        },\r\n\r\n        onMouseClick: function () {\r\n            if (MG.banner.isFullyVisible()) {\r\n                switch (mState) {\r\n                  case GameState.WAIT_START:\r\n                    goRun();\r\n                    break;\r\n                  case GameState.FINISHED:\r\n                    /* The player is given an infinite number of lives\r\n                    during the qualifying level but these should be\r\n                    removed before continuing. */\r\n                    if (mLevel === 0) {mLives = STARTING_LIVES;}\r\n\r\n                    mLevel++;\r\n\r\n                    mBestProgress = 0.0;\r\n\r\n                    goWaitStartLevel();\r\n                    break;\r\n                  case GameState.CRASHED:\r\n                    MG.banner.hide();\r\n                    MG.fog.fadeIn(function() {\r\n                            if (mLives === 0) {\r\n                                mLevel = 0;\r\n                                mLives = STARTING_LIVES;\r\n                                mBestProgress = 0.0;\r\n                            } else {\r\n                                mLives--;\r\n                            }\r\n\r\n\r\n                            MG.missile.reset();\r\n                            MG.barrierQueue.reset();\r\n\r\n                            MG.fog.fadeOut();\r\n                            goWaitStartLevel();\r\n                        });\r\n                    break;\r\n                }\r\n            }\r\n        },\r\n\r\n        /* Returns an integer representing the current level */\r\n        getLevel: function () {\r\n            return mLevel;\r\n        },\r\n\r\n        /* Returns a human readable string describing the current level */\r\n        getLevelString: getLevelString,\r\n\r\n        /* Returns the number of times the player can crash before game over. */\r\n        /* If the player crashes with zero lives remaining the game ends */\r\n        getNumLives: function () {\r\n            return mLives;\r\n        },\r\n\r\n        /* Returns the progress through the level as a value between 0 and 1,\r\n        where 0 is not yet started and 1 is completed. */\r\n        getProgress: function () {\r\n            return mProgress;       \r\n        },\r\n\r\n        getBestProgress: function () {\r\n            return mBestProgress;\r\n        }\r\n    };\r\n\r\n\r\n\r\n}());\r\n","FHgame/game1/src/hud.js":"MG.hud = (function () {\r\n    var mRootNode;\r\n\r\n    var mRadar;\r\n    var mSpeedometer;\r\n    var mLevelIndicator;\r\n    var mProgressIndicator;\r\n    var mLifeCounter;\r\n\r\n    return {\r\n\r\n        init: function () {\r\n            mRootNode = document.getElementById('hud');\r\n\r\n            // ----------------------------------------------------------- Radar\r\n\r\n            mRadar = (function () {\r\n                var mMissilePositionDot = document.getElementById('hud-radar-scope-missile');\r\n                var mMissileTargetDot = document.getElementById('hud-radar-scope-missile-target');\r\n\r\n                var mMissileTarget = {x: 0.0, y: 0.0};\r\n                var mMissilePosition = {x: 0.0, y: 0.0};\r\n\r\n                return {\r\n                    update: function (dt) {\r\n                        mMissileTarget = MG.missile.getTarget();\r\n                        mMissilePosition = MG.missile.getPosition();\r\n                        // PASS\r\n                    },\r\n                    updateDOM: function () {\r\n                        var x,y;\r\n                        var scopeRadius = 0.5;\r\n\r\n                        /* Set the position of the dot indicating the intended target of the missile */\r\n                        x = scopeRadius + 0.95 * scopeRadius * mMissileTarget.x\r\n                                               / MG.TUNNEL_RADIUS;\r\n                        y = scopeRadius + 0.95 * scopeRadius * mMissileTarget.y\r\n                                               / MG.TUNNEL_RADIUS;\r\n\r\n                        mMissileTargetDot.setAttribute('cx', String(x));\r\n                        mMissileTargetDot.setAttribute('cy', String(y));\r\n\r\n                        /* Set the position of the dot indicating the actual position of the missile */\r\n                        x = scopeRadius + 0.95 * scopeRadius * mMissilePosition.x\r\n                                               / MG.TUNNEL_RADIUS;\r\n                        y = scopeRadius + 0.95 * scopeRadius * mMissilePosition.y\r\n                                               / MG.TUNNEL_RADIUS;\r\n\r\n                        mMissilePositionDot.setAttribute('cx', String(x));\r\n                        mMissilePositionDot.setAttribute('cy', String(y));\r\n                    }\r\n                };\r\n            }());\r\n\r\n\r\n\r\n            // ----------------------------------------------------- Speedometer\r\n\r\n            mSpeedometer = (function () {\r\n                var mBarNode = document.getElementById('hud-speedometer-bar');\r\n\r\n                var mTextNode = document.createTextNode('');\r\n                document.getElementById('hud-speedometer-speed-text').appendChild(mTextNode);\r\n            \r\n                var mSpeed = 0.0;\r\n\r\n                return {\r\n                    update: function (dt) {\r\n                        mSpeed = MG.missile.getVelocity();\r\n                    },\r\n                    updateDOM: function () {\r\n                        mTextNode.data = mSpeed.toFixed(0);\r\n                        \r\n                        // TODO (possibly) work out the maximum speed properly and put a cap on the level with a nice victory screen\r\n                        mBarNode.setAttribute('x', mSpeed/2000 - 1);\r\n                    }\r\n                };\r\n            } ());\r\n\r\n            // ------------------------------------------------- Level Indicator\r\n            mLevelIndicator = (function () {\r\n                var mTextNode = document.createTextNode('');\r\n                document.getElementById('hud-level-indicator').appendChild(mTextNode);\r\n\r\n                return {\r\n                    update: function (dt) {\r\n                    // PASS\r\n                    },\r\n\r\n                    updateDOM: function () {\r\n                        mTextNode.data = MG.game.getLevelString();\r\n                    }\r\n                };\r\n            } ());\r\n\r\n            // ---------------------------------------------- Progress Indicator\r\n            mProgressIndicator = (function () {\r\n                var mProgressMarkNode = document.getElementById('hud-progress-indicator-progress');\r\n                var mBestProgressMarkNode = document.getElementById('hud-progress-indicator-best-progress');\r\n\r\n                var mProgress = 0.0;\r\n                var mBestProgress = 0.0;\r\n\r\n                return {\r\n                    update: function (dt) {\r\n                        mProgress = MG.game.getProgress();\r\n                        mBestProgress = MG.game.getBestProgress();\r\n                    },\r\n\r\n                    updateDOM: function () {\r\n                        mProgressMarkNode.setAttribute('transform', 'translate(0,'+mProgress+')');\r\n                        mBestProgressMarkNode.setAttribute('transform', 'translate(0,'+mBestProgress+')');\r\n                    }\r\n                };\r\n            } ());\r\n            // ---------------------------------------------------- Life Counter\r\n\r\n            mLifeCounter = (function () {\r\n                var i;\r\n\r\n                var mInfiniteLivesNode = document.getElementById('hud-lives-indicator-infinite');\r\n                var mZeroLivesNode = document.getElementById('hud-lives-indicator-none');\r\n\r\n                var mLivesNodes = [];\r\n                for (i=0; i<5; i++) {\r\n                    mLivesNodes[i] = document.getElementById('hud-lives-indicator-missile-' + (i+1));\r\n                }\r\n\r\n                var mLives = -1;\r\n\r\n                return {\r\n                    update: function (dt) {\r\n                        mLives = MG.game.getNumLives();\r\n                    },\r\n\r\n                    updateDOM: function () {\r\n                        var i;\r\n\r\n                        switch (mLives) {\r\n                          case Infinity:\r\n                            mInfiniteLivesNode.setAttribute('visibility', 'visible');\r\n                            mZeroLivesNode.setAttribute('visibility', 'hidden');\r\n\r\n                            for (i=0; i<5; i++) {\r\n                                mLivesNodes[i].setAttribute('visibility', 'hidden');\r\n                            }\r\n                            break;\r\n                          case 0:\r\n                            mInfiniteLivesNode.setAttribute('visibility', 'hidden');\r\n                            mZeroLivesNode.setAttribute('visibility', 'visible');\r\n\r\n                            for (i=0; i<5; i++) {\r\n                                mLivesNodes[i].setAttribute('visibility', 'hidden');\r\n                            }\r\n                            break;\r\n                          default:\r\n                            mInfiniteLivesNode.setAttribute('visibility', 'hidden');\r\n                            mZeroLivesNode.setAttribute('visibility', 'hidden');\r\n\r\n                            for (i=0; i<5; i++) {\r\n                                mLivesNodes[i].setAttribute('visibility', i<mLives ? 'visible' : 'hidden');\r\n                            }\r\n                            break;\r\n                        }\r\n                    }\r\n                };\r\n            } ());\r\n\r\n            // --------------------------------------------- Framerate Indicator\r\n            mFrameRateIndicator = (function () {\r\n                var mTextNode = document.createTextNode('');\r\n                document.getElementById('hud-frame-rate-indicator').appendChild(mTextNode);\r\n\r\n                var mFrameRate = 0\r\n\r\n                return {\r\n                    update: function (dt) {\r\n                        if (dt === 0) {\r\n                            return;\r\n                        }\r\n\r\n                        if (mFrameRate <= 0) {\r\n                            /* Assume game has just started and use first time\r\n                            step as an initial guess for the frame rate */\r\n                            mFrameRate = 1/dt ;\r\n                        } else {\r\n                            /* Smooth out the frame rate readings over a number of frames */\r\n                            mFrameRate = 0.99*mFrameRate + 0.01/dt;\r\n                        }\r\n                    },\r\n\r\n                    updateDOM: function () {\r\n                        mTextNode.data = mFrameRate.toPrecision(3) + 'FPS' ;\r\n                    }\r\n                };\r\n            } ());\r\n\r\n\r\n\r\n            mRootNode.setAttribute('visibility', 'visible');\r\n        },\r\n\r\n        update: function (dt) {\r\n            mRadar.update(dt);\r\n            mSpeedometer.update(dt);\r\n            mLevelIndicator.update(dt);\r\n            mProgressIndicator.update(dt);\r\n            mLifeCounter.update(dt);\r\n            mFrameRateIndicator.update(dt);\r\n        },\r\n\r\n        updateDOM: function () {\r\n            mRadar.updateDOM();\r\n            mSpeedometer.updateDOM();\r\n            mLevelIndicator.updateDOM();\r\n            mProgressIndicator.updateDOM();\r\n            mLifeCounter.updateDOM();\r\n            mFrameRateIndicator.updateDOM();\r\n        }\r\n    };\r\n}());\r\n","FHgame/game1/src/main.js":"MG.init = function () {\r\n    MG.fog.init();\r\n    MG.banner.init();\r\n    MG.game.init();\r\n    MG.hud.init();\r\n\r\n    document.addEventListener('mousemove', function(evt){\r\n            MG.game.onMouseMove(evt.clientX, evt.clientY);\r\n        }, false);\r\n    document.addEventListener('touchmove', function(evt){\r\n            MG.game.onMouseMove(evt.clientX || evt.touches[0].clientX, evt.clientY || evt.touches[0].clientY);\r\n        }, false);\r\n\r\n    window.addEventListener('click', MG.game.onMouseClick, false);\r\n\r\n    var update = function (dt) {\r\n        MG.fog.update(dt);\r\n        MG.game.update(dt);\r\n        MG.hud.update(dt);\r\n        MG.banner.update(dt);\r\n\r\n\r\n        MG.fog.updateDOM();\r\n        MG.game.updateDOM();\r\n        MG.hud.updateDOM();\r\n        MG.banner.updateDOM();\r\n    }\r\n\r\n    var lastTick = 0;\r\n    var zeroCounter = 0;\r\n    var useFallback = false;\r\n\r\n    if (!window.requestAnimationFrame) {\r\n        useFallback = true;\r\n    }\r\n\r\n    var mainLoop = function(thisTick) {\r\n        var dt;\r\n\r\n        // Some browsers don't pass in a time.  If `thisTick` isn't set for\r\n        //  more than a few frames fall back to `setTimeout`\r\n        if (!thisTick) {\r\n            zeroCounter += 1;\r\n        } else {\r\n            zeroCounter = 0;\r\n        }\r\n        if (zeroCounter > 10) {\r\n            useFallback = true;\r\n        }\r\n\r\n        thisTick = thisTick || 0;\r\n        if (useFallback) {\r\n            dt = 1/30;\r\n        } else {\r\n            var dt = (thisTick - lastTick)/1000;\r\n        }\r\n        // pretend that the frame rate is actually higher if it drops below\r\n        // 10fps in order to avoid wierdness\r\n        if (dt > 1/10) {\r\n            dt = 1/10;\r\n        }\r\n\r\n        lastTick = thisTick;\r\n\r\n        update(dt);\r\n\r\n        if (useFallback) {\r\n            window.setTimeout(mainLoop, 1000 / 30);\r\n        } else {\r\n            window.requestAnimationFrame(mainLoop);\r\n        }\r\n    }\r\n\r\n    mainLoop();\r\n}\r\n\r\nMG.init();\r\n","FHgame/game1/src/missile.js":"MG.missile = (function () {\r\n\r\n    var ACCELERATION_TIME_CONSTANT = 1.0;\r\n    var DRIFT_DAMPING = 0.25;\r\n\r\n    var MAX_RADIUS = 0.8*MG.TUNNEL_RADIUS;\r\n\r\n    var MissileState = {\r\n        CRASHED:   'crashed',\r\n        AUTOPILOT: 'autopilot',\r\n        MANUAL:    'manual'\r\n    }\r\n\r\n    var mState;\r\n\r\n    var mOffset;\r\n    var mVelocity;\r\n    var mTargetVelocity;\r\n\r\n    var mX;\r\n    var mY;\r\n\r\n    var mTargetX;\r\n    var mTargetY;\r\n\r\n    var mDriftVelX;\r\n    var mDriftVelY;\r\n    var mDriftCounter;\r\n\r\n\r\n    return {\r\n        init: function () {\r\n            this.reset();\r\n        },\r\n\r\n\r\n        reset: function (){\r\n            mState = MissileState.AUTOPILOT;\r\n\r\n            mOffset = 200.0;\r\n            mVelocity = 0.0;\r\n            mTargetVelocity = 400.0;\r\n\r\n            mX = 0.0;\r\n            mY = 0.0;\r\n\r\n            mTargetX = 0.0;\r\n            mTargetY = 0.0;\r\n\r\n            mDriftVelX = 0.0;\r\n            mDriftVelY = 0.0;\r\n            mDriftCounter = 1.0;\r\n\r\n        },\r\n\r\n\r\n        update: function (dt) {\r\n\r\n            switch (mState) {\r\n                case MissileState.AUTOPILOT:\r\n                    /* When under autopilot control, the missile will randomly\r\n                    drift around the center of the tunnel, changing direction at\r\n                    discrete intervals. */\r\n                    /* The drift counter contains the time until the next direction change. */\r\n                    mDriftCounter -= dt;\r\n                    if (mDriftCounter < 0) {\r\n                        mDriftCounter = 1.1 + 0.9*Math.random();\r\n\r\n                        mDriftVelX = (MG.TUNNEL_RADIUS*(Math.random()-0.5) - mTargetX)/1.5;\r\n                        mDriftVelY = (MG.TUNNEL_RADIUS*(Math.random()-0.5) - mTargetY)/1.5;\r\n                    }\r\n\r\n                    /* TODO Smooth */\r\n                    mX += mDriftVelX * dt ;\r\n                    mY += mDriftVelY * dt ;\r\n\r\n                    break;\r\n\r\n                case MissileState.MANUAL:\r\n                    mX += (mTargetX - mX) * dt / DRIFT_DAMPING;\r\n                    mY += (mTargetY - mY) * dt / DRIFT_DAMPING;\r\n                    break;\r\n\r\n                default:\r\n                    /* leave the missile pointing in the same direction */\r\n            }\r\n\r\n            /* Clamp the missile's position to inside the tunnel wall */\r\n            var radius = Math.sqrt(mX*mX + mY*mY);\r\n            var newRadius = Math.min(MAX_RADIUS, radius);\r\n\r\n            mX = (radius === 0) ? 0 : mX*newRadius/radius;\r\n            mY = (radius === 0) ? 0 : mY*newRadius/radius;\r\n\r\n\r\n\r\n            if (mState === MissileState.CRASHED) {\r\n                /* If the missile has crashed, it will bounce backwards coming\r\n                to rest near the location of the previous barrier. */\r\n                mVelocity += dt*MG.BARRIER_SPACING*mVelocity/(mOffset - MG.BARRIER_SPACING);\r\n            } else {\r\n                mVelocity += dt*(mTargetVelocity - mVelocity)/ACCELERATION_TIME_CONSTANT;\r\n            }\r\n\r\n            mOffset -= mVelocity * dt;\r\n        },\r\n\r\n        getPosition: function () {\r\n            return {x: mX, y:mY};\r\n        },\r\n\r\n        getTarget: function () {\r\n            return {x: mTargetX, y:mTargetY};\r\n        },\r\n\r\n        getOffset: function () {\r\n            return mOffset;\r\n        },\r\n\r\n        getVelocity: function () {\r\n            return mVelocity;\r\n        },\r\n\r\n        isCrashed: function () {\r\n            return mState == MissileState.CRASHED;\r\n        },\r\n\r\n        setTarget: function (targetX, targetY) {\r\n            if (mState === MissileState.MANUAL) {\r\n                mTargetX = targetX;\r\n                mTargetY = targetY;\r\n            }\r\n        },\r\n\r\n        setVelocity: function (velocity) {\r\n            mTargetVelocity = velocity;\r\n        },\r\n\r\n\r\n        setManual: function () {\r\n            mState = MissileState.MANUAL;\r\n        },\r\n\r\n        setAutopilot: function () {\r\n            mState = MissileState.AUTOPILOT;\r\n        },\r\n\r\n\r\n        onBarrierPassed: function () {\r\n            mOffset += MG.BARRIER_SPACING;\r\n        },\r\n\r\n        onCrash: function () {\r\n            mVelocity = -Math.abs(mVelocity);\r\n\r\n            mState = MissileState.CRASHED;\r\n        }\r\n    };\r\n}());\r\n","FHgame/game1/src/util.js":"//==============================================================================\r\n// Utility Functions\r\n//==============================================================================\r\n\r\nMG.util = {} ;\r\n\r\nMG.util.hideMouse = function () {\r\n    var i;\r\n    for (i=0; i<document.styleSheets.length; i++) {\r\n        var styleSheet = document.styleSheets[i];\r\n\r\n        if (styleSheet.title === 'style-hide-mouse') {\r\n            styleSheet.disabled = false;\r\n        }\r\n    }\r\n};\r\n\r\nMG.util.showMouse = function () {\r\n    var i;\r\n    for (i=0; i<document.styleSheets.length; i++) {\r\n        var styleSheet = document.styleSheets[i];\r\n\r\n        if (styleSheet.title === 'style-hide-mouse') {\r\n            styleSheet.disabled = true;\r\n        }\r\n    }\r\n};\r\n","FHgame/game1/src/wall.js":"MG.tunnelWall = (function (rootNode) {\r\n    var DTHETA = 20;\r\n    var NUM_SEGMENTS = 5;\r\n\r\n    var NEAR_CLIPPING_PLANE = 25;\r\n\r\n    var GRADIENT_START = MG.LINE_OF_SIGHT;\r\n    var GRADIENT_STOP  = GRADIENT_START - MG.BARRIER_SPACING;\r\n\r\n\r\n    var mTheta = 0;\r\n\r\n    var mSegments = [];\r\n\r\n    return {\r\n        init: function (rootNode) {\r\n\r\n            var gradient = document.createElementNS(NAMESPACE_SVG, 'linearGradient');\r\n            gradient.id = 'tunnel-wall-segment-fade-gradient';\r\n            gradient.setAttribute('gradientUnits', 'userSpaceOnUse');\r\n            rootNode.appendChild(gradient);\r\n\r\n            var gradientStart = document.createElementNS(NAMESPACE_SVG, 'stop');\r\n            gradientStart.setAttribute('offset', (5*NEAR_CLIPPING_PLANE / GRADIENT_START) + '');\r\n            gradientStart.setAttribute('stop-color', '#fff');\r\n            gradient.appendChild(gradientStart);\r\n\r\n            var gradientStop = document.createElementNS(NAMESPACE_SVG, 'stop');\r\n            gradientStop.setAttribute('offset', (5*NEAR_CLIPPING_PLANE / GRADIENT_STOP) + '');\r\n            gradientStop.setAttribute('stop-color', '#000');\r\n            gradient.appendChild(gradientStop);\r\n\r\n            for (var i=0; i < NUM_SEGMENTS; i++) {\r\n\r\n                mSegments[i] = document.createElementNS(NAMESPACE_SVG, 'path');\r\n                mSegments[i].setAttribute('class', 'wall-segment-dark');\r\n                mSegments[i].setAttribute('d', 'M 0,0 l 1000,50 l 0,-50 z');\r\n\r\n                mSegments[i].setAttribute('fill', 'url(#tunnel-wall-segment-fade-gradient)');\r\n\r\n\r\n                rootNode.appendChild(mSegments[i]) ;\r\n            }\r\n\r\n            this.updateDOM(0,0,0);\r\n        },\r\n\r\n        update: function (dt) {\r\n            mTheta = mTheta + dt * DTHETA;\r\n            mTheta %= 360;\r\n        },\r\n\r\n        updateDOM: function (x, y, offset) {\r\n\r\n            for (var i=0; i<NUM_SEGMENTS; i++) {\r\n                var segmentTheta = mTheta + 360*i/NUM_SEGMENTS;\r\n\r\n                var x_ = -x * Math.cos(segmentTheta*Math.PI/180) + -y * Math.sin(segmentTheta*Math.PI/180);\r\n                var y_ = -x * Math.sin(segmentTheta*Math.PI/180) +  y * Math.cos(segmentTheta*Math.PI/180);\r\n\r\n                var scale_x_ = 0.1*MG.PROJECTION_PLANE_DISTANCE * (1 - x_/MG.TUNNEL_RADIUS)\r\n                             / (Math.tan(Math.PI * MG.FIELD_OF_VIEW/360.0)*NEAR_CLIPPING_PLANE);\r\n                var scale_y_ = 0.1*MG.PROJECTION_PLANE_DISTANCE\r\n                             / (Math.tan(Math.PI * MG.FIELD_OF_VIEW/360.0)*NEAR_CLIPPING_PLANE);\r\n\r\n                var skew = 180*Math.atan(y_/MG.TUNNEL_RADIUS)/Math.PI;\r\n\r\n                mSegments[i].setAttribute('transform', 'rotate(' + segmentTheta + ') '\r\n                                                     + 'scale(' + scale_x_ + ',' + scale_y_ + ') '\r\n                                                     + 'skewY(' + skew + ')' );\r\n\r\n\r\n\r\n            }\r\n        }\r\n    }\r\n}());\r\n","FHgame/game1/lib/":"","FHgame/game1/lib/kevlindev/":"","FHgame/game1/lib/kevlindev/2D.js":"/*****\r\n*\r\n*   The contents of this file were written by Kevin Lindsey\r\n*   copyright 2006 Kevin Lindsey\r\n*\r\n*   This file was compacted by jscompact\r\n*   A Perl utility written by Kevin Lindsey (kevin@kevlindev.com)\r\n*\r\n*****/\r\n\r\nArray.prototype.foreach=function(func){var length=this.length;for(var i=0;i<length;i++){func(this[i]);}};\r\nArray.prototype.grep=function(func){var length=this.length;var result=[];for(var i=0;i<length;i++){var elem=this[i];if(func(elem)){result.push(elem);}}return result;};\r\nArray.prototype.map=function(func){var length=this.length;var result=[];for(var i=0;i<length;i++){result.push(func(this[i]));}return result;};\r\nArray.prototype.min=function(){var length=this.length;var min=this[0];for(var i=0;i<length;i++){var elem=this[i];if(elem<min)min=elem;}return min;}\r\nArray.prototype.max=function(){var length=this.length;var max=this[0];for(var i=0;i<length;i++)var elem=this[i];if(elem>max)max=elem;return max;}\r\nAntiZoomAndPan.VERSION=\"1.2\"\r\nfunction AntiZoomAndPan(){this.init();}\r\nAntiZoomAndPan.prototype.init=function(){var svgRoot=svgDocument.documentElement;this.svgNodes=new Array();this.x_trans=0;this.y_trans=0;this.scale=1;this.lastTM=svgRoot.createSVGMatrix();svgRoot.addEventListener('SVGZoom',this,false);svgRoot.addEventListener('SVGScroll',this,false);svgRoot.addEventListener('SVGResize',this,false);};\r\nAntiZoomAndPan.prototype.appendNode=function(svgNode){this.svgNodes.push(svgNode);};\r\nAntiZoomAndPan.prototype.removeNode=function(svgNode){for(var i=0;i<this.svgNodes.length;i++){if(this.svgNodes[i]===svgNode){this.svgNodes.splice(i,1);break;}}};\r\nAntiZoomAndPan.prototype.handleEvent=function(e){var type=e.type;if(this[type]==null)throw new Error(\"Unsupported event type: \"+type);this[type](e);};\r\nAntiZoomAndPan.prototype.SVGZoom=function(e){this.update();};\r\nAntiZoomAndPan.prototype.SVGScroll=function(e){this.update();};\r\nAntiZoomAndPan.prototype.SVGResize=function(e){this.update();};\r\nAntiZoomAndPan.prototype.update=function(){if(this.svgNodes.length>0){var svgRoot=svgDocument.documentElement;var viewbox=(window.ViewBox!=null)?new ViewBox(svgRoot):null;var matrix=(viewbox!=null)?viewbox.getTM():svgRoot.createSVGMatrix();var trans=svgRoot.currentTranslate;matrix=matrix.scale(1.0/svgRoot.currentScale);matrix=matrix.translate(-trans.x,-trans.y);for(var i=0;i<this.svgNodes.length;i++){var node=this.svgNodes[i];var CTM=matrix.multiply(this.lastTM.multiply(node.getCTM()));var transform=\"matrix(\"+[CTM.a,CTM.b,CTM.c,CTM.d,CTM.e,CTM.f].join(\",\")+\")\";this.svgNodes[i].setAttributeNS(null,\"transform\",transform);}this.lastTM=matrix.inverse();}};\r\nEventHandler.VERSION=1.0;\r\nfunction EventHandler(){this.init();};\r\nEventHandler.prototype.init=function(){};\r\nEventHandler.prototype.handleEvent=function(e){if(this[e.type]==null)throw new Error(\"Unsupported event type: \"+e.type);this[e.type](e);};var svgns=\"http://www.w3.org/2000/svg\";\r\nMouser.prototype=new EventHandler();\r\nMouser.prototype.constructor=Mouser;\r\nMouser.superclass=EventHandler.prototype;\r\nfunction Mouser(){this.init();}\r\nMouser.prototype.init=function(){this.svgNode=null;this.handles=new Array();this.shapes=new Array();this.lastPoint=null;this.currentNode=null;this.realize();};\r\nMouser.prototype.realize=function(){if(this.svgNode==null){var rect=svgDocument.createElementNS(svgns,\"rect\");this.svgNode=rect;rect.setAttributeNS(null,\"x\",\"-16384\");rect.setAttributeNS(null,\"y\",\"-16384\");rect.setAttributeNS(null,\"width\",\"32767\");rect.setAttributeNS(null,\"height\",\"32767\");rect.setAttributeNS(null,\"fill\",\"none\");rect.setAttributeNS(null,\"pointer-events\",\"all\");rect.setAttributeNS(null,\"display\",\"none\");svgDocument.documentElement.appendChild(rect);}};\r\nMouser.prototype.register=function(handle){if(this.handleIndex(handle)==-1){var owner=handle.owner;handle.select(true);this.handles.push(handle);if(owner!=null&&this.shapeIndex(owner)==-1)this.shapes.push(owner);}};\r\nMouser.prototype.unregister=function(handle){var index=this.handleIndex(handle);if(index!=-1){handle.select(false);this.handles.splice(index,1);}};\r\nMouser.prototype.registerShape=function(shape){if(this.shapeIndex(shape)==-1){shape.select(true);this.shapes.push(shape);}};\r\nMouser.prototype.unregisterShape=function(shape){var index=this.shapeIndex(shape);if(index!=-1){shape.select(false);shape.selectHandles(false);shape.showHandles(false);shape.unregisterHandles();this.shapes.splice(index,1);}};\r\nMouser.prototype.unregisterAll=function(){for(var i=0;i<this.handles.length;i++){this.handles[i].select(false);}this.handles=new Array();};\r\nMouser.prototype.unregisterShapes=function(){for(var i=0;i<this.shapes.length;i++){var shape=this.shapes[i];shape.select(false);shape.selectHandles(false);shape.showHandles(false);shape.unregisterHandles();}this.shapes=new Array();};\r\nMouser.prototype.handleIndex=function(handle){var result=-1;for(var i=0;i<this.handles.length;i++){if(this.handles[i]===handle){result=i;break;}}return result;};\r\nMouser.prototype.shapeIndex=function(shape){var result=-1;for(var i=0;i<this.shapes.length;i++){if(this.shapes[i]===shape){result=i;break;}}return result;};\r\nMouser.prototype.beginDrag=function(e){this.currentNode=e.target;var svgPoint=this.getUserCoordinate(this.currentNode,e.clientX,e.clientY);this.lastPoint=new Point2D(svgPoint.x,svgPoint.y);this.svgNode.addEventListener(\"mouseup\",this,false);this.svgNode.addEventListener(\"mousemove\",this,false);svgDocument.documentElement.appendChild(this.svgNode);this.svgNode.setAttributeNS(null,\"display\",\"inline\");};\r\nMouser.prototype.mouseup=function(e){this.lastPoint=null;this.currentNode=null;this.svgNode.removeEventListener(\"mouseup\",this,false);this.svgNode.removeEventListener(\"mousemove\",this,false);this.svgNode.setAttributeNS(null,\"display\",\"none\");};\r\nMouser.prototype.mousemove=function(e){var svgPoint=this.getUserCoordinate(this.currentNode,e.clientX,e.clientY);var newPoint=new Point2D(svgPoint.x,svgPoint.y);var delta=newPoint.subtract(this.lastPoint);var updates=new Array();var updateId=new Date().getTime();this.lastPoint.setFromPoint(newPoint);for(var i=0;i<this.handles.length;i++){var handle=this.handles[i];var owner=handle.owner;handle.translate(delta);if(owner!=null){if(owner.lastUpdate!=updateId){owner.lastUpdate=updateId;updates.push(owner);}}else{updates.push(handle);}}for(var i=0;i<updates.length;i++){updates[i].update();}};\r\nMouser.prototype.getUserCoordinate=function(node,x,y){var svgRoot=svgDocument.documentElement;var pan=svgRoot.currentTranslate;var zoom=svgRoot.currentScale;var CTM=this.getTransformToElement(node);var iCTM=CTM.inverse();var worldPoint=svgDocument.documentElement.createSVGPoint();worldPoint.x=(x-pan.x)/zoom;worldPoint.y=(y-pan.y)/zoom;return worldPoint.matrixTransform(iCTM);};\r\nMouser.prototype.getTransformToElement=function(node){var CTM=node.getCTM();while((node=node.parentNode)!=svgDocument){CTM=node.getCTM().multiply(CTM);}return CTM;};\r\nViewBox.VERSION=\"1.0\";\r\nfunction ViewBox(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nViewBox.prototype.init=function(svgNode){var viewBox=svgNode.getAttributeNS(null,\"viewBox\");var preserveAspectRatio=svgNode.getAttributeNS(null,\"preserveAspectRatio\");if(viewBox!=null&&viewBox!=\"\"){var params=viewBox.split(/\\s*,\\s*|\\s+/);this.x=parseFloat(params[0]);this.y=parseFloat(params[1]);this.width=parseFloat(params[2]);this.height=parseFloat(params[3]);}else{this.x=0;this.y=0;this.width=innerWidth;this.height=innerHeight;}this.setPAR(preserveAspectRatio);};\r\nViewBox.prototype.getTM=function(){var svgRoot=svgDocument.documentElement;var matrix=svgDocument.documentElement.createSVGMatrix();var windowWidth=svgRoot.getAttributeNS(null,\"width\");var windowHeight=svgRoot.getAttributeNS(null,\"height\");if(windowWidth!=null&&windowWidth!=\"\"){windowWidth=parseFloat(windowWidth);}else{if(window.innerWidth){windowWidth=innerWidth;}else{windowWidth=document.documentElement.viewport.width;}}if(windowHeight!=null&&windowHeight!=\"\"){windowHeight=parseFloat(windowHeight);}else{if(window.innerHeight){windowHeight=innerHeight;}else{windowHeight=document.documentElement.viewport.height;}}var x_ratio=this.width/windowWidth;var y_ratio=this.height/windowHeight;matrix=matrix.translate(this.x,this.y);if(this.alignX==\"none\"){matrix=matrix.scaleNonUniform(x_ratio,y_ratio);}else{if(x_ratio<y_ratio&&this.meetOrSlice==\"meet\"||x_ratio>y_ratio&&this.meetOrSlice==\"slice\"){var x_trans=0;var x_diff=windowWidth*y_ratio-this.width;if(this.alignX==\"Mid\")x_trans=-x_diff/2;else if(this.alignX==\"Max\")x_trans=-x_diff;matrix=matrix.translate(x_trans,0);matrix=matrix.scale(y_ratio);}else if(x_ratio>y_ratio&&this.meetOrSlice==\"meet\"||x_ratio<y_ratio&&this.meetOrSlice==\"slice\"){var y_trans=0;var y_diff=windowHeight*x_ratio-this.height;if(this.alignY==\"Mid\")y_trans=-y_diff/2;else if(this.alignY==\"Max\")y_trans=-y_diff;matrix=matrix.translate(0,y_trans);matrix=matrix.scale(x_ratio);}else{matrix=matrix.scale(x_ratio);}}return matrix;}\r\nViewBox.prototype.setPAR=function(PAR){if(PAR){var params=PAR.split(/\\s+/);var align=params[0];if(align==\"none\"){this.alignX=\"none\";this.alignY=\"none\";}else{this.alignX=align.substring(1,4);this.alignY=align.substring(5,9);}if(params.length==2){this.meetOrSlice=params[1];}else{this.meetOrSlice=\"meet\";}}else{this.align=\"xMidYMid\";this.alignX=\"Mid\";this.alignY=\"Mid\";this.meetOrSlice=\"meet\";}};\r\nfunction Intersection(status){if(arguments.length>0){this.init(status);}}\r\nIntersection.prototype.init=function(status){this.status=status;this.points=new Array();};\r\nIntersection.prototype.appendPoint=function(point){this.points.push(point);};\r\nIntersection.prototype.appendPoints=function(points){this.points=this.points.concat(points);};\r\nIntersection.intersectShapes=function(shape1,shape2){var ip1=shape1.getIntersectionParams();var ip2=shape2.getIntersectionParams();var result;if(ip1!=null&&ip2!=null){if(ip1.name==\"Path\"){result=Intersection.intersectPathShape(shape1,shape2);}else if(ip2.name==\"Path\"){result=Intersection.intersectPathShape(shape2,shape1);}else{var method;var params;if(ip1.name<ip2.name){method=\"intersect\"+ip1.name+ip2.name;params=ip1.params.concat(ip2.params);}else{method=\"intersect\"+ip2.name+ip1.name;params=ip2.params.concat(ip1.params);}if(!(method in Intersection))throw new Error(\"Intersection not available: \"+method);result=Intersection[method].apply(null,params);}}else{result=new Intersection(\"No Intersection\");}return result;};\r\nIntersection.intersectPathShape=function(path,shape){return path.intersectShape(shape);};\r\nIntersection.intersectBezier2Bezier2=function(a1,a2,a3,b1,b2,b3){var a,b;var c12,c11,c10;var c22,c21,c20;var TOLERANCE=1e-4;var result=new Intersection(\"No Intersection\");a=a2.multiply(-2);c12=a1.add(a.add(a3));a=a1.multiply(-2);b=a2.multiply(2);c11=a.add(b);c10=new Point2D(a1.x,a1.y);a=b2.multiply(-2);c22=b1.add(a.add(b3));a=b1.multiply(-2);b=b2.multiply(2);c21=a.add(b);c20=new Point2D(b1.x,b1.y);var a=c12.x*c11.y-c11.x*c12.y;var b=c22.x*c11.y-c11.x*c22.y;var c=c21.x*c11.y-c11.x*c21.y;var d=c11.x*(c10.y-c20.y)+c11.y*(-c10.x+c20.x);var e=c22.x*c12.y-c12.x*c22.y;var f=c21.x*c12.y-c12.x*c21.y;var g=c12.x*(c10.y-c20.y)+c12.y*(-c10.x+c20.x);var poly=new Polynomial(-e*e,-2*e*f,a*b-f*f-2*e*g,a*c-2*f*g,a*d-g*g);var roots=poly.getRoots();for(var i=0;i<roots.length;i++){var s=roots[i];if(0<=s&&s<=1){var xRoots=new Polynomial(-c12.x,-c11.x,-c10.x+c20.x+s*c21.x+s*s*c22.x).getRoots();var yRoots=new Polynomial(-c12.y,-c11.y,-c10.y+c20.y+s*c21.y+s*s*c22.y).getRoots();if(xRoots.length>0&&yRoots.length>0){checkRoots:for(var j=0;j<xRoots.length;j++){var xRoot=xRoots[j];if(0<=xRoot&&xRoot<=1){for(var k=0;k<yRoots.length;k++){if(Math.abs(xRoot-yRoots[k])<TOLERANCE){result.points.push(c22.multiply(s*s).add(c21.multiply(s).add(c20)));break checkRoots;}}}}}}}return result;};\r\nIntersection.intersectBezier2Bezier3=function(a1,a2,a3,b1,b2,b3,b4){var a,b,c,d;var c12,c11,c10;var c23,c22,c21,c20;var result=new Intersection(\"No Intersection\");a=a2.multiply(-2);c12=a1.add(a.add(a3));a=a1.multiply(-2);b=a2.multiply(2);c11=a.add(b);c10=new Point2D(a1.x,a1.y);a=b1.multiply(-1);b=b2.multiply(3);c=b3.multiply(-3);d=a.add(b.add(c.add(b4)));c23=new Vector2D(d.x,d.y);a=b1.multiply(3);b=b2.multiply(-6);c=b3.multiply(3);d=a.add(b.add(c));c22=new Vector2D(d.x,d.y);a=b1.multiply(-3);b=b2.multiply(3);c=a.add(b);c21=new Vector2D(c.x,c.y);c20=new Vector2D(b1.x,b1.y);var c10x2=c10.x*c10.x;var c10y2=c10.y*c10.y;var c11x2=c11.x*c11.x;var c11y2=c11.y*c11.y;var c12x2=c12.x*c12.x;var c12y2=c12.y*c12.y;var c20x2=c20.x*c20.x;var c20y2=c20.y*c20.y;var c21x2=c21.x*c21.x;var c21y2=c21.y*c21.y;var c22x2=c22.x*c22.x;var c22y2=c22.y*c22.y;var c23x2=c23.x*c23.x;var c23y2=c23.y*c23.y;var poly=new Polynomial(-2*c12.x*c12.y*c23.x*c23.y+c12x2*c23y2+c12y2*c23x2,-2*c12.x*c12.y*c22.x*c23.y-2*c12.x*c12.y*c22.y*c23.x+2*c12y2*c22.x*c23.x+2*c12x2*c22.y*c23.y,-2*c12.x*c21.x*c12.y*c23.y-2*c12.x*c12.y*c21.y*c23.x-2*c12.x*c12.y*c22.x*c22.y+2*c21.x*c12y2*c23.x+c12y2*c22x2+c12x2*(2*c21.y*c23.y+c22y2),2*c10.x*c12.x*c12.y*c23.y+2*c10.y*c12.x*c12.y*c23.x+c11.x*c11.y*c12.x*c23.y+c11.x*c11.y*c12.y*c23.x-2*c20.x*c12.x*c12.y*c23.y-2*c12.x*c20.y*c12.y*c23.x-2*c12.x*c21.x*c12.y*c22.y-2*c12.x*c12.y*c21.y*c22.x-2*c10.x*c12y2*c23.x-2*c10.y*c12x2*c23.y+2*c20.x*c12y2*c23.x+2*c21.x*c12y2*c22.x-c11y2*c12.x*c23.x-c11x2*c12.y*c23.y+c12x2*(2*c20.y*c23.y+2*c21.y*c22.y),2*c10.x*c12.x*c12.y*c22.y+2*c10.y*c12.x*c12.y*c22.x+c11.x*c11.y*c12.x*c22.y+c11.x*c11.y*c12.y*c22.x-2*c20.x*c12.x*c12.y*c22.y-2*c12.x*c20.y*c12.y*c22.x-2*c12.x*c21.x*c12.y*c21.y-2*c10.x*c12y2*c22.x-2*c10.y*c12x2*c22.y+2*c20.x*c12y2*c22.x-c11y2*c12.x*c22.x-c11x2*c12.y*c22.y+c21x2*c12y2+c12x2*(2*c20.y*c22.y+c21y2),2*c10.x*c12.x*c12.y*c21.y+2*c10.y*c12.x*c21.x*c12.y+c11.x*c11.y*c12.x*c21.y+c11.x*c11.y*c21.x*c12.y-2*c20.x*c12.x*c12.y*c21.y-2*c12.x*c20.y*c21.x*c12.y-2*c10.x*c21.x*c12y2-2*c10.y*c12x2*c21.y+2*c20.x*c21.x*c12y2-c11y2*c12.x*c21.x-c11x2*c12.y*c21.y+2*c12x2*c20.y*c21.y,-2*c10.x*c10.y*c12.x*c12.y-c10.x*c11.x*c11.y*c12.y-c10.y*c11.x*c11.y*c12.x+2*c10.x*c12.x*c20.y*c12.y+2*c10.y*c20.x*c12.x*c12.y+c11.x*c20.x*c11.y*c12.y+c11.x*c11.y*c12.x*c20.y-2*c20.x*c12.x*c20.y*c12.y-2*c10.x*c20.x*c12y2+c10.x*c11y2*c12.x+c10.y*c11x2*c12.y-2*c10.y*c12x2*c20.y-c20.x*c11y2*c12.x-c11x2*c20.y*c12.y+c10x2*c12y2+c10y2*c12x2+c20x2*c12y2+c12x2*c20y2);var roots=poly.getRootsInInterval(0,1);for(var i=0;i<roots.length;i++){var s=roots[i];var xRoots=new Polynomial(c12.x,c11.x,c10.x-c20.x-s*c21.x-s*s*c22.x-s*s*s*c23.x).getRoots();var yRoots=new Polynomial(c12.y,c11.y,c10.y-c20.y-s*c21.y-s*s*c22.y-s*s*s*c23.y).getRoots();if(xRoots.length>0&&yRoots.length>0){var TOLERANCE=1e-4;checkRoots:for(var j=0;j<xRoots.length;j++){var xRoot=xRoots[j];if(0<=xRoot&&xRoot<=1){for(var k=0;k<yRoots.length;k++){if(Math.abs(xRoot-yRoots[k])<TOLERANCE){result.points.push(c23.multiply(s*s*s).add(c22.multiply(s*s).add(c21.multiply(s).add(c20))));break checkRoots;}}}}}}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectBezier2Circle=function(p1,p2,p3,c,r){return Intersection.intersectBezier2Ellipse(p1,p2,p3,c,r,r);};\r\nIntersection.intersectBezier2Ellipse=function(p1,p2,p3,ec,rx,ry){var a,b;var c2,c1,c0;var result=new Intersection(\"No Intersection\");a=p2.multiply(-2);c2=p1.add(a.add(p3));a=p1.multiply(-2);b=p2.multiply(2);c1=a.add(b);c0=new Point2D(p1.x,p1.y);var rxrx=rx*rx;var ryry=ry*ry;var roots=new Polynomial(ryry*c2.x*c2.x+rxrx*c2.y*c2.y,2*(ryry*c2.x*c1.x+rxrx*c2.y*c1.y),ryry*(2*c2.x*c0.x+c1.x*c1.x)+rxrx*(2*c2.y*c0.y+c1.y*c1.y)-2*(ryry*ec.x*c2.x+rxrx*ec.y*c2.y),2*(ryry*c1.x*(c0.x-ec.x)+rxrx*c1.y*(c0.y-ec.y)),ryry*(c0.x*c0.x+ec.x*ec.x)+rxrx*(c0.y*c0.y+ec.y*ec.y)-2*(ryry*ec.x*c0.x+rxrx*ec.y*c0.y)-rxrx*ryry).getRoots();for(var i=0;i<roots.length;i++){var t=roots[i];if(0<=t&&t<=1)result.points.push(c2.multiply(t*t).add(c1.multiply(t).add(c0)));}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectBezier2Line=function(p1,p2,p3,a1,a2){var a,b;var c2,c1,c0;var cl;var n;var min=a1.min(a2);var max=a1.max(a2);var result=new Intersection(\"No Intersection\");a=p2.multiply(-2);c2=p1.add(a.add(p3));a=p1.multiply(-2);b=p2.multiply(2);c1=a.add(b);c0=new Point2D(p1.x,p1.y);n=new Vector2D(a1.y-a2.y,a2.x-a1.x);cl=a1.x*a2.y-a2.x*a1.y;roots=new Polynomial(n.dot(c2),n.dot(c1),n.dot(c0)+cl).getRoots();for(var i=0;i<roots.length;i++){var t=roots[i];if(0<=t&&t<=1){var p4=p1.lerp(p2,t);var p5=p2.lerp(p3,t);var p6=p4.lerp(p5,t);if(a1.x==a2.x){if(min.y<=p6.y&&p6.y<=max.y){result.status=\"Intersection\";result.appendPoint(p6);}}else if(a1.y==a2.y){if(min.x<=p6.x&&p6.x<=max.x){result.status=\"Intersection\";result.appendPoint(p6);}}else if(p6.gte(min)&&p6.lte(max)){result.status=\"Intersection\";result.appendPoint(p6);}}}return result;};\r\nIntersection.intersectBezier2Polygon=function(p1,p2,p3,points){var result=new Intersection(\"No Intersection\");var length=points.length;for(var i=0;i<length;i++){var a1=points[i];var a2=points[(i+1)%length];var inter=Intersection.intersectBezier2Line(p1,p2,p3,a1,a2);result.appendPoints(inter.points);}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectBezier2Rectangle=function(p1,p2,p3,r1,r2){var min=r1.min(r2);var max=r1.max(r2);var topRight=new Point2D(max.x,min.y);var bottomLeft=new Point2D(min.x,max.y);var inter1=Intersection.intersectBezier2Line(p1,p2,p3,min,topRight);var inter2=Intersection.intersectBezier2Line(p1,p2,p3,topRight,max);var inter3=Intersection.intersectBezier2Line(p1,p2,p3,max,bottomLeft);var inter4=Intersection.intersectBezier2Line(p1,p2,p3,bottomLeft,min);var result=new Intersection(\"No Intersection\");result.appendPoints(inter1.points);result.appendPoints(inter2.points);result.appendPoints(inter3.points);result.appendPoints(inter4.points);if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectBezier3Bezier3=function(a1,a2,a3,a4,b1,b2,b3,b4){var a,b,c,d;var c13,c12,c11,c10;var c23,c22,c21,c20;var result=new Intersection(\"No Intersection\");a=a1.multiply(-1);b=a2.multiply(3);c=a3.multiply(-3);d=a.add(b.add(c.add(a4)));c13=new Vector2D(d.x,d.y);a=a1.multiply(3);b=a2.multiply(-6);c=a3.multiply(3);d=a.add(b.add(c));c12=new Vector2D(d.x,d.y);a=a1.multiply(-3);b=a2.multiply(3);c=a.add(b);c11=new Vector2D(c.x,c.y);c10=new Vector2D(a1.x,a1.y);a=b1.multiply(-1);b=b2.multiply(3);c=b3.multiply(-3);d=a.add(b.add(c.add(b4)));c23=new Vector2D(d.x,d.y);a=b1.multiply(3);b=b2.multiply(-6);c=b3.multiply(3);d=a.add(b.add(c));c22=new Vector2D(d.x,d.y);a=b1.multiply(-3);b=b2.multiply(3);c=a.add(b);c21=new Vector2D(c.x,c.y);c20=new Vector2D(b1.x,b1.y);var c10x2=c10.x*c10.x;var c10x3=c10.x*c10.x*c10.x;var c10y2=c10.y*c10.y;var c10y3=c10.y*c10.y*c10.y;var c11x2=c11.x*c11.x;var c11x3=c11.x*c11.x*c11.x;var c11y2=c11.y*c11.y;var c11y3=c11.y*c11.y*c11.y;var c12x2=c12.x*c12.x;var c12x3=c12.x*c12.x*c12.x;var c12y2=c12.y*c12.y;var c12y3=c12.y*c12.y*c12.y;var c13x2=c13.x*c13.x;var c13x3=c13.x*c13.x*c13.x;var c13y2=c13.y*c13.y;var c13y3=c13.y*c13.y*c13.y;var c20x2=c20.x*c20.x;var c20x3=c20.x*c20.x*c20.x;var c20y2=c20.y*c20.y;var c20y3=c20.y*c20.y*c20.y;var c21x2=c21.x*c21.x;var c21x3=c21.x*c21.x*c21.x;var c21y2=c21.y*c21.y;var c22x2=c22.x*c22.x;var c22x3=c22.x*c22.x*c22.x;var c22y2=c22.y*c22.y;var c23x2=c23.x*c23.x;var c23x3=c23.x*c23.x*c23.x;var c23y2=c23.y*c23.y;var c23y3=c23.y*c23.y*c23.y;var poly=new Polynomial(-c13x3*c23y3+c13y3*c23x3-3*c13.x*c13y2*c23x2*c23.y+3*c13x2*c13.y*c23.x*c23y2,-6*c13.x*c22.x*c13y2*c23.x*c23.y+6*c13x2*c13.y*c22.y*c23.x*c23.y+3*c22.x*c13y3*c23x2-3*c13x3*c22.y*c23y2-3*c13.x*c13y2*c22.y*c23x2+3*c13x2*c22.x*c13.y*c23y2,-6*c21.x*c13.x*c13y2*c23.x*c23.y-6*c13.x*c22.x*c13y2*c22.y*c23.x+6*c13x2*c22.x*c13.y*c22.y*c23.y+3*c21.x*c13y3*c23x2+3*c22x2*c13y3*c23.x+3*c21.x*c13x2*c13.y*c23y2-3*c13.x*c21.y*c13y2*c23x2-3*c13.x*c22x2*c13y2*c23.y+c13x2*c13.y*c23.x*(6*c21.y*c23.y+3*c22y2)+c13x3*(-c21.y*c23y2-2*c22y2*c23.y-c23.y*(2*c21.y*c23.y+c22y2)),c11.x*c12.y*c13.x*c13.y*c23.x*c23.y-c11.y*c12.x*c13.x*c13.y*c23.x*c23.y+6*c21.x*c22.x*c13y3*c23.x+3*c11.x*c12.x*c13.x*c13.y*c23y2+6*c10.x*c13.x*c13y2*c23.x*c23.y-3*c11.x*c12.x*c13y2*c23.x*c23.y-3*c11.y*c12.y*c13.x*c13.y*c23x2-6*c10.y*c13x2*c13.y*c23.x*c23.y-6*c20.x*c13.x*c13y2*c23.x*c23.y+3*c11.y*c12.y*c13x2*c23.x*c23.y-2*c12.x*c12y2*c13.x*c23.x*c23.y-6*c21.x*c13.x*c22.x*c13y2*c23.y-6*c21.x*c13.x*c13y2*c22.y*c23.x-6*c13.x*c21.y*c22.x*c13y2*c23.x+6*c21.x*c13x2*c13.y*c22.y*c23.y+2*c12x2*c12.y*c13.y*c23.x*c23.y+c22x3*c13y3-3*c10.x*c13y3*c23x2+3*c10.y*c13x3*c23y2+3*c20.x*c13y3*c23x2+c12y3*c13.x*c23x2-c12x3*c13.y*c23y2-3*c10.x*c13x2*c13.y*c23y2+3*c10.y*c13.x*c13y2*c23x2-2*c11.x*c12.y*c13x2*c23y2+c11.x*c12.y*c13y2*c23x2-c11.y*c12.x*c13x2*c23y2+2*c11.y*c12.x*c13y2*c23x2+3*c20.x*c13x2*c13.y*c23y2-c12.x*c12y2*c13.y*c23x2-3*c20.y*c13.x*c13y2*c23x2+c12x2*c12.y*c13.x*c23y2-3*c13.x*c22x2*c13y2*c22.y+c13x2*c13.y*c23.x*(6*c20.y*c23.y+6*c21.y*c22.y)+c13x2*c22.x*c13.y*(6*c21.y*c23.y+3*c22y2)+c13x3*(-2*c21.y*c22.y*c23.y-c20.y*c23y2-c22.y*(2*c21.y*c23.y+c22y2)-c23.y*(2*c20.y*c23.y+2*c21.y*c22.y)),6*c11.x*c12.x*c13.x*c13.y*c22.y*c23.y+c11.x*c12.y*c13.x*c22.x*c13.y*c23.y+c11.x*c12.y*c13.x*c13.y*c22.y*c23.x-c11.y*c12.x*c13.x*c22.x*c13.y*c23.y-c11.y*c12.x*c13.x*c13.y*c22.y*c23.x-6*c11.y*c12.y*c13.x*c22.x*c13.y*c23.x-6*c10.x*c22.x*c13y3*c23.x+6*c20.x*c22.x*c13y3*c23.x+6*c10.y*c13x3*c22.y*c23.y+2*c12y3*c13.x*c22.x*c23.x-2*c12x3*c13.y*c22.y*c23.y+6*c10.x*c13.x*c22.x*c13y2*c23.y+6*c10.x*c13.x*c13y2*c22.y*c23.x+6*c10.y*c13.x*c22.x*c13y2*c23.x-3*c11.x*c12.x*c22.x*c13y2*c23.y-3*c11.x*c12.x*c13y2*c22.y*c23.x+2*c11.x*c12.y*c22.x*c13y2*c23.x+4*c11.y*c12.x*c22.x*c13y2*c23.x-6*c10.x*c13x2*c13.y*c22.y*c23.y-6*c10.y*c13x2*c22.x*c13.y*c23.y-6*c10.y*c13x2*c13.y*c22.y*c23.x-4*c11.x*c12.y*c13x2*c22.y*c23.y-6*c20.x*c13.x*c22.x*c13y2*c23.y-6*c20.x*c13.x*c13y2*c22.y*c23.x-2*c11.y*c12.x*c13x2*c22.y*c23.y+3*c11.y*c12.y*c13x2*c22.x*c23.y+3*c11.y*c12.y*c13x2*c22.y*c23.x-2*c12.x*c12y2*c13.x*c22.x*c23.y-2*c12.x*c12y2*c13.x*c22.y*c23.x-2*c12.x*c12y2*c22.x*c13.y*c23.x-6*c20.y*c13.x*c22.x*c13y2*c23.x-6*c21.x*c13.x*c21.y*c13y2*c23.x-6*c21.x*c13.x*c22.x*c13y2*c22.y+6*c20.x*c13x2*c13.y*c22.y*c23.y+2*c12x2*c12.y*c13.x*c22.y*c23.y+2*c12x2*c12.y*c22.x*c13.y*c23.y+2*c12x2*c12.y*c13.y*c22.y*c23.x+3*c21.x*c22x2*c13y3+3*c21x2*c13y3*c23.x-3*c13.x*c21.y*c22x2*c13y2-3*c21x2*c13.x*c13y2*c23.y+c13x2*c22.x*c13.y*(6*c20.y*c23.y+6*c21.y*c22.y)+c13x2*c13.y*c23.x*(6*c20.y*c22.y+3*c21y2)+c21.x*c13x2*c13.y*(6*c21.y*c23.y+3*c22y2)+c13x3*(-2*c20.y*c22.y*c23.y-c23.y*(2*c20.y*c22.y+c21y2)-c21.y*(2*c21.y*c23.y+c22y2)-c22.y*(2*c20.y*c23.y+2*c21.y*c22.y)),c11.x*c21.x*c12.y*c13.x*c13.y*c23.y+c11.x*c12.y*c13.x*c21.y*c13.y*c23.x+c11.x*c12.y*c13.x*c22.x*c13.y*c22.y-c11.y*c12.x*c21.x*c13.x*c13.y*c23.y-c11.y*c12.x*c13.x*c21.y*c13.y*c23.x-c11.y*c12.x*c13.x*c22.x*c13.y*c22.y-6*c11.y*c21.x*c12.y*c13.x*c13.y*c23.x-6*c10.x*c21.x*c13y3*c23.x+6*c20.x*c21.x*c13y3*c23.x+2*c21.x*c12y3*c13.x*c23.x+6*c10.x*c21.x*c13.x*c13y2*c23.y+6*c10.x*c13.x*c21.y*c13y2*c23.x+6*c10.x*c13.x*c22.x*c13y2*c22.y+6*c10.y*c21.x*c13.x*c13y2*c23.x-3*c11.x*c12.x*c21.x*c13y2*c23.y-3*c11.x*c12.x*c21.y*c13y2*c23.x-3*c11.x*c12.x*c22.x*c13y2*c22.y+2*c11.x*c21.x*c12.y*c13y2*c23.x+4*c11.y*c12.x*c21.x*c13y2*c23.x-6*c10.y*c21.x*c13x2*c13.y*c23.y-6*c10.y*c13x2*c21.y*c13.y*c23.x-6*c10.y*c13x2*c22.x*c13.y*c22.y-6*c20.x*c21.x*c13.x*c13y2*c23.y-6*c20.x*c13.x*c21.y*c13y2*c23.x-6*c20.x*c13.x*c22.x*c13y2*c22.y+3*c11.y*c21.x*c12.y*c13x2*c23.y-3*c11.y*c12.y*c13.x*c22x2*c13.y+3*c11.y*c12.y*c13x2*c21.y*c23.x+3*c11.y*c12.y*c13x2*c22.x*c22.y-2*c12.x*c21.x*c12y2*c13.x*c23.y-2*c12.x*c21.x*c12y2*c13.y*c23.x-2*c12.x*c12y2*c13.x*c21.y*c23.x-2*c12.x*c12y2*c13.x*c22.x*c22.y-6*c20.y*c21.x*c13.x*c13y2*c23.x-6*c21.x*c13.x*c21.y*c22.x*c13y2+6*c20.y*c13x2*c21.y*c13.y*c23.x+2*c12x2*c21.x*c12.y*c13.y*c23.y+2*c12x2*c12.y*c21.y*c13.y*c23.x+2*c12x2*c12.y*c22.x*c13.y*c22.y-3*c10.x*c22x2*c13y3+3*c20.x*c22x2*c13y3+3*c21x2*c22.x*c13y3+c12y3*c13.x*c22x2+3*c10.y*c13.x*c22x2*c13y2+c11.x*c12.y*c22x2*c13y2+2*c11.y*c12.x*c22x2*c13y2-c12.x*c12y2*c22x2*c13.y-3*c20.y*c13.x*c22x2*c13y2-3*c21x2*c13.x*c13y2*c22.y+c12x2*c12.y*c13.x*(2*c21.y*c23.y+c22y2)+c11.x*c12.x*c13.x*c13.y*(6*c21.y*c23.y+3*c22y2)+c21.x*c13x2*c13.y*(6*c20.y*c23.y+6*c21.y*c22.y)+c12x3*c13.y*(-2*c21.y*c23.y-c22y2)+c10.y*c13x3*(6*c21.y*c23.y+3*c22y2)+c11.y*c12.x*c13x2*(-2*c21.y*c23.y-c22y2)+c11.x*c12.y*c13x2*(-4*c21.y*c23.y-2*c22y2)+c10.x*c13x2*c13.y*(-6*c21.y*c23.y-3*c22y2)+c13x2*c22.x*c13.y*(6*c20.y*c22.y+3*c21y2)+c20.x*c13x2*c13.y*(6*c21.y*c23.y+3*c22y2)+c13x3*(-2*c20.y*c21.y*c23.y-c22.y*(2*c20.y*c22.y+c21y2)-c20.y*(2*c21.y*c23.y+c22y2)-c21.y*(2*c20.y*c23.y+2*c21.y*c22.y)),-c10.x*c11.x*c12.y*c13.x*c13.y*c23.y+c10.x*c11.y*c12.x*c13.x*c13.y*c23.y+6*c10.x*c11.y*c12.y*c13.x*c13.y*c23.x-6*c10.y*c11.x*c12.x*c13.x*c13.y*c23.y-c10.y*c11.x*c12.y*c13.x*c13.y*c23.x+c10.y*c11.y*c12.x*c13.x*c13.y*c23.x+c11.x*c11.y*c12.x*c12.y*c13.x*c23.y-c11.x*c11.y*c12.x*c12.y*c13.y*c23.x+c11.x*c20.x*c12.y*c13.x*c13.y*c23.y+c11.x*c20.y*c12.y*c13.x*c13.y*c23.x+c11.x*c21.x*c12.y*c13.x*c13.y*c22.y+c11.x*c12.y*c13.x*c21.y*c22.x*c13.y-c20.x*c11.y*c12.x*c13.x*c13.y*c23.y-6*c20.x*c11.y*c12.y*c13.x*c13.y*c23.x-c11.y*c12.x*c20.y*c13.x*c13.y*c23.x-c11.y*c12.x*c21.x*c13.x*c13.y*c22.y-c11.y*c12.x*c13.x*c21.y*c22.x*c13.y-6*c11.y*c21.x*c12.y*c13.x*c22.x*c13.y-6*c10.x*c20.x*c13y3*c23.x-6*c10.x*c21.x*c22.x*c13y3-2*c10.x*c12y3*c13.x*c23.x+6*c20.x*c21.x*c22.x*c13y3+2*c20.x*c12y3*c13.x*c23.x+2*c21.x*c12y3*c13.x*c22.x+2*c10.y*c12x3*c13.y*c23.y-6*c10.x*c10.y*c13.x*c13y2*c23.x+3*c10.x*c11.x*c12.x*c13y2*c23.y-2*c10.x*c11.x*c12.y*c13y2*c23.x-4*c10.x*c11.y*c12.x*c13y2*c23.x+3*c10.y*c11.x*c12.x*c13y2*c23.x+6*c10.x*c10.y*c13x2*c13.y*c23.y+6*c10.x*c20.x*c13.x*c13y2*c23.y-3*c10.x*c11.y*c12.y*c13x2*c23.y+2*c10.x*c12.x*c12y2*c13.x*c23.y+2*c10.x*c12.x*c12y2*c13.y*c23.x+6*c10.x*c20.y*c13.x*c13y2*c23.x+6*c10.x*c21.x*c13.x*c13y2*c22.y+6*c10.x*c13.x*c21.y*c22.x*c13y2+4*c10.y*c11.x*c12.y*c13x2*c23.y+6*c10.y*c20.x*c13.x*c13y2*c23.x+2*c10.y*c11.y*c12.x*c13x2*c23.y-3*c10.y*c11.y*c12.y*c13x2*c23.x+2*c10.y*c12.x*c12y2*c13.x*c23.x+6*c10.y*c21.x*c13.x*c22.x*c13y2-3*c11.x*c20.x*c12.x*c13y2*c23.y+2*c11.x*c20.x*c12.y*c13y2*c23.x+c11.x*c11.y*c12y2*c13.x*c23.x-3*c11.x*c12.x*c20.y*c13y2*c23.x-3*c11.x*c12.x*c21.x*c13y2*c22.y-3*c11.x*c12.x*c21.y*c22.x*c13y2+2*c11.x*c21.x*c12.y*c22.x*c13y2+4*c20.x*c11.y*c12.x*c13y2*c23.x+4*c11.y*c12.x*c21.x*c22.x*c13y2-2*c10.x*c12x2*c12.y*c13.y*c23.y-6*c10.y*c20.x*c13x2*c13.y*c23.y-6*c10.y*c20.y*c13x2*c13.y*c23.x-6*c10.y*c21.x*c13x2*c13.y*c22.y-2*c10.y*c12x2*c12.y*c13.x*c23.y-2*c10.y*c12x2*c12.y*c13.y*c23.x-6*c10.y*c13x2*c21.y*c22.x*c13.y-c11.x*c11.y*c12x2*c13.y*c23.y-2*c11.x*c11y2*c13.x*c13.y*c23.x+3*c20.x*c11.y*c12.y*c13x2*c23.y-2*c20.x*c12.x*c12y2*c13.x*c23.y-2*c20.x*c12.x*c12y2*c13.y*c23.x-6*c20.x*c20.y*c13.x*c13y2*c23.x-6*c20.x*c21.x*c13.x*c13y2*c22.y-6*c20.x*c13.x*c21.y*c22.x*c13y2+3*c11.y*c20.y*c12.y*c13x2*c23.x+3*c11.y*c21.x*c12.y*c13x2*c22.y+3*c11.y*c12.y*c13x2*c21.y*c22.x-2*c12.x*c20.y*c12y2*c13.x*c23.x-2*c12.x*c21.x*c12y2*c13.x*c22.y-2*c12.x*c21.x*c12y2*c22.x*c13.y-2*c12.x*c12y2*c13.x*c21.y*c22.x-6*c20.y*c21.x*c13.x*c22.x*c13y2-c11y2*c12.x*c12.y*c13.x*c23.x+2*c20.x*c12x2*c12.y*c13.y*c23.y+6*c20.y*c13x2*c21.y*c22.x*c13.y+2*c11x2*c11.y*c13.x*c13.y*c23.y+c11x2*c12.x*c12.y*c13.y*c23.y+2*c12x2*c20.y*c12.y*c13.y*c23.x+2*c12x2*c21.x*c12.y*c13.y*c22.y+2*c12x2*c12.y*c21.y*c22.x*c13.y+c21x3*c13y3+3*c10x2*c13y3*c23.x-3*c10y2*c13x3*c23.y+3*c20x2*c13y3*c23.x+c11y3*c13x2*c23.x-c11x3*c13y2*c23.y-c11.x*c11y2*c13x2*c23.y+c11x2*c11.y*c13y2*c23.x-3*c10x2*c13.x*c13y2*c23.y+3*c10y2*c13x2*c13.y*c23.x-c11x2*c12y2*c13.x*c23.y+c11y2*c12x2*c13.y*c23.x-3*c21x2*c13.x*c21.y*c13y2-3*c20x2*c13.x*c13y2*c23.y+3*c20y2*c13x2*c13.y*c23.x+c11.x*c12.x*c13.x*c13.y*(6*c20.y*c23.y+6*c21.y*c22.y)+c12x3*c13.y*(-2*c20.y*c23.y-2*c21.y*c22.y)+c10.y*c13x3*(6*c20.y*c23.y+6*c21.y*c22.y)+c11.y*c12.x*c13x2*(-2*c20.y*c23.y-2*c21.y*c22.y)+c12x2*c12.y*c13.x*(2*c20.y*c23.y+2*c21.y*c22.y)+c11.x*c12.y*c13x2*(-4*c20.y*c23.y-4*c21.y*c22.y)+c10.x*c13x2*c13.y*(-6*c20.y*c23.y-6*c21.y*c22.y)+c20.x*c13x2*c13.y*(6*c20.y*c23.y+6*c21.y*c22.y)+c21.x*c13x2*c13.y*(6*c20.y*c22.y+3*c21y2)+c13x3*(-2*c20.y*c21.y*c22.y-c20y2*c23.y-c21.y*(2*c20.y*c22.y+c21y2)-c20.y*(2*c20.y*c23.y+2*c21.y*c22.y)),-c10.x*c11.x*c12.y*c13.x*c13.y*c22.y+c10.x*c11.y*c12.x*c13.x*c13.y*c22.y+6*c10.x*c11.y*c12.y*c13.x*c22.x*c13.y-6*c10.y*c11.x*c12.x*c13.x*c13.y*c22.y-c10.y*c11.x*c12.y*c13.x*c22.x*c13.y+c10.y*c11.y*c12.x*c13.x*c22.x*c13.y+c11.x*c11.y*c12.x*c12.y*c13.x*c22.y-c11.x*c11.y*c12.x*c12.y*c22.x*c13.y+c11.x*c20.x*c12.y*c13.x*c13.y*c22.y+c11.x*c20.y*c12.y*c13.x*c22.x*c13.y+c11.x*c21.x*c12.y*c13.x*c21.y*c13.y-c20.x*c11.y*c12.x*c13.x*c13.y*c22.y-6*c20.x*c11.y*c12.y*c13.x*c22.x*c13.y-c11.y*c12.x*c20.y*c13.x*c22.x*c13.y-c11.y*c12.x*c21.x*c13.x*c21.y*c13.y-6*c10.x*c20.x*c22.x*c13y3-2*c10.x*c12y3*c13.x*c22.x+2*c20.x*c12y3*c13.x*c22.x+2*c10.y*c12x3*c13.y*c22.y-6*c10.x*c10.y*c13.x*c22.x*c13y2+3*c10.x*c11.x*c12.x*c13y2*c22.y-2*c10.x*c11.x*c12.y*c22.x*c13y2-4*c10.x*c11.y*c12.x*c22.x*c13y2+3*c10.y*c11.x*c12.x*c22.x*c13y2+6*c10.x*c10.y*c13x2*c13.y*c22.y+6*c10.x*c20.x*c13.x*c13y2*c22.y-3*c10.x*c11.y*c12.y*c13x2*c22.y+2*c10.x*c12.x*c12y2*c13.x*c22.y+2*c10.x*c12.x*c12y2*c22.x*c13.y+6*c10.x*c20.y*c13.x*c22.x*c13y2+6*c10.x*c21.x*c13.x*c21.y*c13y2+4*c10.y*c11.x*c12.y*c13x2*c22.y+6*c10.y*c20.x*c13.x*c22.x*c13y2+2*c10.y*c11.y*c12.x*c13x2*c22.y-3*c10.y*c11.y*c12.y*c13x2*c22.x+2*c10.y*c12.x*c12y2*c13.x*c22.x-3*c11.x*c20.x*c12.x*c13y2*c22.y+2*c11.x*c20.x*c12.y*c22.x*c13y2+c11.x*c11.y*c12y2*c13.x*c22.x-3*c11.x*c12.x*c20.y*c22.x*c13y2-3*c11.x*c12.x*c21.x*c21.y*c13y2+4*c20.x*c11.y*c12.x*c22.x*c13y2-2*c10.x*c12x2*c12.y*c13.y*c22.y-6*c10.y*c20.x*c13x2*c13.y*c22.y-6*c10.y*c20.y*c13x2*c22.x*c13.y-6*c10.y*c21.x*c13x2*c21.y*c13.y-2*c10.y*c12x2*c12.y*c13.x*c22.y-2*c10.y*c12x2*c12.y*c22.x*c13.y-c11.x*c11.y*c12x2*c13.y*c22.y-2*c11.x*c11y2*c13.x*c22.x*c13.y+3*c20.x*c11.y*c12.y*c13x2*c22.y-2*c20.x*c12.x*c12y2*c13.x*c22.y-2*c20.x*c12.x*c12y2*c22.x*c13.y-6*c20.x*c20.y*c13.x*c22.x*c13y2-6*c20.x*c21.x*c13.x*c21.y*c13y2+3*c11.y*c20.y*c12.y*c13x2*c22.x+3*c11.y*c21.x*c12.y*c13x2*c21.y-2*c12.x*c20.y*c12y2*c13.x*c22.x-2*c12.x*c21.x*c12y2*c13.x*c21.y-c11y2*c12.x*c12.y*c13.x*c22.x+2*c20.x*c12x2*c12.y*c13.y*c22.y-3*c11.y*c21x2*c12.y*c13.x*c13.y+6*c20.y*c21.x*c13x2*c21.y*c13.y+2*c11x2*c11.y*c13.x*c13.y*c22.y+c11x2*c12.x*c12.y*c13.y*c22.y+2*c12x2*c20.y*c12.y*c22.x*c13.y+2*c12x2*c21.x*c12.y*c21.y*c13.y-3*c10.x*c21x2*c13y3+3*c20.x*c21x2*c13y3+3*c10x2*c22.x*c13y3-3*c10y2*c13x3*c22.y+3*c20x2*c22.x*c13y3+c21x2*c12y3*c13.x+c11y3*c13x2*c22.x-c11x3*c13y2*c22.y+3*c10.y*c21x2*c13.x*c13y2-c11.x*c11y2*c13x2*c22.y+c11.x*c21x2*c12.y*c13y2+2*c11.y*c12.x*c21x2*c13y2+c11x2*c11.y*c22.x*c13y2-c12.x*c21x2*c12y2*c13.y-3*c20.y*c21x2*c13.x*c13y2-3*c10x2*c13.x*c13y2*c22.y+3*c10y2*c13x2*c22.x*c13.y-c11x2*c12y2*c13.x*c22.y+c11y2*c12x2*c22.x*c13.y-3*c20x2*c13.x*c13y2*c22.y+3*c20y2*c13x2*c22.x*c13.y+c12x2*c12.y*c13.x*(2*c20.y*c22.y+c21y2)+c11.x*c12.x*c13.x*c13.y*(6*c20.y*c22.y+3*c21y2)+c12x3*c13.y*(-2*c20.y*c22.y-c21y2)+c10.y*c13x3*(6*c20.y*c22.y+3*c21y2)+c11.y*c12.x*c13x2*(-2*c20.y*c22.y-c21y2)+c11.x*c12.y*c13x2*(-4*c20.y*c22.y-2*c21y2)+c10.x*c13x2*c13.y*(-6*c20.y*c22.y-3*c21y2)+c20.x*c13x2*c13.y*(6*c20.y*c22.y+3*c21y2)+c13x3*(-2*c20.y*c21y2-c20y2*c22.y-c20.y*(2*c20.y*c22.y+c21y2)),-c10.x*c11.x*c12.y*c13.x*c21.y*c13.y+c10.x*c11.y*c12.x*c13.x*c21.y*c13.y+6*c10.x*c11.y*c21.x*c12.y*c13.x*c13.y-6*c10.y*c11.x*c12.x*c13.x*c21.y*c13.y-c10.y*c11.x*c21.x*c12.y*c13.x*c13.y+c10.y*c11.y*c12.x*c21.x*c13.x*c13.y-c11.x*c11.y*c12.x*c21.x*c12.y*c13.y+c11.x*c11.y*c12.x*c12.y*c13.x*c21.y+c11.x*c20.x*c12.y*c13.x*c21.y*c13.y+6*c11.x*c12.x*c20.y*c13.x*c21.y*c13.y+c11.x*c20.y*c21.x*c12.y*c13.x*c13.y-c20.x*c11.y*c12.x*c13.x*c21.y*c13.y-6*c20.x*c11.y*c21.x*c12.y*c13.x*c13.y-c11.y*c12.x*c20.y*c21.x*c13.x*c13.y-6*c10.x*c20.x*c21.x*c13y3-2*c10.x*c21.x*c12y3*c13.x+6*c10.y*c20.y*c13x3*c21.y+2*c20.x*c21.x*c12y3*c13.x+2*c10.y*c12x3*c21.y*c13.y-2*c12x3*c20.y*c21.y*c13.y-6*c10.x*c10.y*c21.x*c13.x*c13y2+3*c10.x*c11.x*c12.x*c21.y*c13y2-2*c10.x*c11.x*c21.x*c12.y*c13y2-4*c10.x*c11.y*c12.x*c21.x*c13y2+3*c10.y*c11.x*c12.x*c21.x*c13y2+6*c10.x*c10.y*c13x2*c21.y*c13.y+6*c10.x*c20.x*c13.x*c21.y*c13y2-3*c10.x*c11.y*c12.y*c13x2*c21.y+2*c10.x*c12.x*c21.x*c12y2*c13.y+2*c10.x*c12.x*c12y2*c13.x*c21.y+6*c10.x*c20.y*c21.x*c13.x*c13y2+4*c10.y*c11.x*c12.y*c13x2*c21.y+6*c10.y*c20.x*c21.x*c13.x*c13y2+2*c10.y*c11.y*c12.x*c13x2*c21.y-3*c10.y*c11.y*c21.x*c12.y*c13x2+2*c10.y*c12.x*c21.x*c12y2*c13.x-3*c11.x*c20.x*c12.x*c21.y*c13y2+2*c11.x*c20.x*c21.x*c12.y*c13y2+c11.x*c11.y*c21.x*c12y2*c13.x-3*c11.x*c12.x*c20.y*c21.x*c13y2+4*c20.x*c11.y*c12.x*c21.x*c13y2-6*c10.x*c20.y*c13x2*c21.y*c13.y-2*c10.x*c12x2*c12.y*c21.y*c13.y-6*c10.y*c20.x*c13x2*c21.y*c13.y-6*c10.y*c20.y*c21.x*c13x2*c13.y-2*c10.y*c12x2*c21.x*c12.y*c13.y-2*c10.y*c12x2*c12.y*c13.x*c21.y-c11.x*c11.y*c12x2*c21.y*c13.y-4*c11.x*c20.y*c12.y*c13x2*c21.y-2*c11.x*c11y2*c21.x*c13.x*c13.y+3*c20.x*c11.y*c12.y*c13x2*c21.y-2*c20.x*c12.x*c21.x*c12y2*c13.y-2*c20.x*c12.x*c12y2*c13.x*c21.y-6*c20.x*c20.y*c21.x*c13.x*c13y2-2*c11.y*c12.x*c20.y*c13x2*c21.y+3*c11.y*c20.y*c21.x*c12.y*c13x2-2*c12.x*c20.y*c21.x*c12y2*c13.x-c11y2*c12.x*c21.x*c12.y*c13.x+6*c20.x*c20.y*c13x2*c21.y*c13.y+2*c20.x*c12x2*c12.y*c21.y*c13.y+2*c11x2*c11.y*c13.x*c21.y*c13.y+c11x2*c12.x*c12.y*c21.y*c13.y+2*c12x2*c20.y*c21.x*c12.y*c13.y+2*c12x2*c20.y*c12.y*c13.x*c21.y+3*c10x2*c21.x*c13y3-3*c10y2*c13x3*c21.y+3*c20x2*c21.x*c13y3+c11y3*c21.x*c13x2-c11x3*c21.y*c13y2-3*c20y2*c13x3*c21.y-c11.x*c11y2*c13x2*c21.y+c11x2*c11.y*c21.x*c13y2-3*c10x2*c13.x*c21.y*c13y2+3*c10y2*c21.x*c13x2*c13.y-c11x2*c12y2*c13.x*c21.y+c11y2*c12x2*c21.x*c13.y-3*c20x2*c13.x*c21.y*c13y2+3*c20y2*c21.x*c13x2*c13.y,c10.x*c10.y*c11.x*c12.y*c13.x*c13.y-c10.x*c10.y*c11.y*c12.x*c13.x*c13.y+c10.x*c11.x*c11.y*c12.x*c12.y*c13.y-c10.y*c11.x*c11.y*c12.x*c12.y*c13.x-c10.x*c11.x*c20.y*c12.y*c13.x*c13.y+6*c10.x*c20.x*c11.y*c12.y*c13.x*c13.y+c10.x*c11.y*c12.x*c20.y*c13.x*c13.y-c10.y*c11.x*c20.x*c12.y*c13.x*c13.y-6*c10.y*c11.x*c12.x*c20.y*c13.x*c13.y+c10.y*c20.x*c11.y*c12.x*c13.x*c13.y-c11.x*c20.x*c11.y*c12.x*c12.y*c13.y+c11.x*c11.y*c12.x*c20.y*c12.y*c13.x+c11.x*c20.x*c20.y*c12.y*c13.x*c13.y-c20.x*c11.y*c12.x*c20.y*c13.x*c13.y-2*c10.x*c20.x*c12y3*c13.x+2*c10.y*c12x3*c20.y*c13.y-3*c10.x*c10.y*c11.x*c12.x*c13y2-6*c10.x*c10.y*c20.x*c13.x*c13y2+3*c10.x*c10.y*c11.y*c12.y*c13x2-2*c10.x*c10.y*c12.x*c12y2*c13.x-2*c10.x*c11.x*c20.x*c12.y*c13y2-c10.x*c11.x*c11.y*c12y2*c13.x+3*c10.x*c11.x*c12.x*c20.y*c13y2-4*c10.x*c20.x*c11.y*c12.x*c13y2+3*c10.y*c11.x*c20.x*c12.x*c13y2+6*c10.x*c10.y*c20.y*c13x2*c13.y+2*c10.x*c10.y*c12x2*c12.y*c13.y+2*c10.x*c11.x*c11y2*c13.x*c13.y+2*c10.x*c20.x*c12.x*c12y2*c13.y+6*c10.x*c20.x*c20.y*c13.x*c13y2-3*c10.x*c11.y*c20.y*c12.y*c13x2+2*c10.x*c12.x*c20.y*c12y2*c13.x+c10.x*c11y2*c12.x*c12.y*c13.x+c10.y*c11.x*c11.y*c12x2*c13.y+4*c10.y*c11.x*c20.y*c12.y*c13x2-3*c10.y*c20.x*c11.y*c12.y*c13x2+2*c10.y*c20.x*c12.x*c12y2*c13.x+2*c10.y*c11.y*c12.x*c20.y*c13x2+c11.x*c20.x*c11.y*c12y2*c13.x-3*c11.x*c20.x*c12.x*c20.y*c13y2-2*c10.x*c12x2*c20.y*c12.y*c13.y-6*c10.y*c20.x*c20.y*c13x2*c13.y-2*c10.y*c20.x*c12x2*c12.y*c13.y-2*c10.y*c11x2*c11.y*c13.x*c13.y-c10.y*c11x2*c12.x*c12.y*c13.y-2*c10.y*c12x2*c20.y*c12.y*c13.x-2*c11.x*c20.x*c11y2*c13.x*c13.y-c11.x*c11.y*c12x2*c20.y*c13.y+3*c20.x*c11.y*c20.y*c12.y*c13x2-2*c20.x*c12.x*c20.y*c12y2*c13.x-c20.x*c11y2*c12.x*c12.y*c13.x+3*c10y2*c11.x*c12.x*c13.x*c13.y+3*c11.x*c12.x*c20y2*c13.x*c13.y+2*c20.x*c12x2*c20.y*c12.y*c13.y-3*c10x2*c11.y*c12.y*c13.x*c13.y+2*c11x2*c11.y*c20.y*c13.x*c13.y+c11x2*c12.x*c20.y*c12.y*c13.y-3*c20x2*c11.y*c12.y*c13.x*c13.y-c10x3*c13y3+c10y3*c13x3+c20x3*c13y3-c20y3*c13x3-3*c10.x*c20x2*c13y3-c10.x*c11y3*c13x2+3*c10x2*c20.x*c13y3+c10.y*c11x3*c13y2+3*c10.y*c20y2*c13x3+c20.x*c11y3*c13x2+c10x2*c12y3*c13.x-3*c10y2*c20.y*c13x3-c10y2*c12x3*c13.y+c20x2*c12y3*c13.x-c11x3*c20.y*c13y2-c12x3*c20y2*c13.y-c10.x*c11x2*c11.y*c13y2+c10.y*c11.x*c11y2*c13x2-3*c10.x*c10y2*c13x2*c13.y-c10.x*c11y2*c12x2*c13.y+c10.y*c11x2*c12y2*c13.x-c11.x*c11y2*c20.y*c13x2+3*c10x2*c10.y*c13.x*c13y2+c10x2*c11.x*c12.y*c13y2+2*c10x2*c11.y*c12.x*c13y2-2*c10y2*c11.x*c12.y*c13x2-c10y2*c11.y*c12.x*c13x2+c11x2*c20.x*c11.y*c13y2-3*c10.x*c20y2*c13x2*c13.y+3*c10.y*c20x2*c13.x*c13y2+c11.x*c20x2*c12.y*c13y2-2*c11.x*c20y2*c12.y*c13x2+c20.x*c11y2*c12x2*c13.y-c11.y*c12.x*c20y2*c13x2-c10x2*c12.x*c12y2*c13.y-3*c10x2*c20.y*c13.x*c13y2+3*c10y2*c20.x*c13x2*c13.y+c10y2*c12x2*c12.y*c13.x-c11x2*c20.y*c12y2*c13.x+2*c20x2*c11.y*c12.x*c13y2+3*c20.x*c20y2*c13x2*c13.y-c20x2*c12.x*c12y2*c13.y-3*c20x2*c20.y*c13.x*c13y2+c12x2*c20y2*c12.y*c13.x);var roots=poly.getRootsInInterval(0,1);for(var i=0;i<roots.length;i++){var s=roots[i];var xRoots=new Polynomial(c13.x,c12.x,c11.x,c10.x-c20.x-s*c21.x-s*s*c22.x-s*s*s*c23.x).getRoots();var yRoots=new Polynomial(c13.y,c12.y,c11.y,c10.y-c20.y-s*c21.y-s*s*c22.y-s*s*s*c23.y).getRoots();if(xRoots.length>0&&yRoots.length>0){var TOLERANCE=1e-4;checkRoots:for(var j=0;j<xRoots.length;j++){var xRoot=xRoots[j];if(0<=xRoot&&xRoot<=1){for(var k=0;k<yRoots.length;k++){if(Math.abs(xRoot-yRoots[k])<TOLERANCE){result.points.push(c23.multiply(s*s*s).add(c22.multiply(s*s).add(c21.multiply(s).add(c20))));break checkRoots;}}}}}}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectBezier3Circle=function(p1,p2,p3,p4,c,r){return Intersection.intersectBezier3Ellipse(p1,p2,p3,p4,c,r,r);};\r\nIntersection.intersectBezier3Ellipse=function(p1,p2,p3,p4,ec,rx,ry){var a,b,c,d;var c3,c2,c1,c0;var result=new Intersection(\"No Intersection\");a=p1.multiply(-1);b=p2.multiply(3);c=p3.multiply(-3);d=a.add(b.add(c.add(p4)));c3=new Vector2D(d.x,d.y);a=p1.multiply(3);b=p2.multiply(-6);c=p3.multiply(3);d=a.add(b.add(c));c2=new Vector2D(d.x,d.y);a=p1.multiply(-3);b=p2.multiply(3);c=a.add(b);c1=new Vector2D(c.x,c.y);c0=new Vector2D(p1.x,p1.y);var rxrx=rx*rx;var ryry=ry*ry;var poly=new Polynomial(c3.x*c3.x*ryry+c3.y*c3.y*rxrx,2*(c3.x*c2.x*ryry+c3.y*c2.y*rxrx),2*(c3.x*c1.x*ryry+c3.y*c1.y*rxrx)+c2.x*c2.x*ryry+c2.y*c2.y*rxrx,2*c3.x*ryry*(c0.x-ec.x)+2*c3.y*rxrx*(c0.y-ec.y)+2*(c2.x*c1.x*ryry+c2.y*c1.y*rxrx),2*c2.x*ryry*(c0.x-ec.x)+2*c2.y*rxrx*(c0.y-ec.y)+c1.x*c1.x*ryry+c1.y*c1.y*rxrx,2*c1.x*ryry*(c0.x-ec.x)+2*c1.y*rxrx*(c0.y-ec.y),c0.x*c0.x*ryry-2*c0.y*ec.y*rxrx-2*c0.x*ec.x*ryry+c0.y*c0.y*rxrx+ec.x*ec.x*ryry+ec.y*ec.y*rxrx-rxrx*ryry);var roots=poly.getRootsInInterval(0,1);for(var i=0;i<roots.length;i++){var t=roots[i];result.points.push(c3.multiply(t*t*t).add(c2.multiply(t*t).add(c1.multiply(t).add(c0))));}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectBezier3Line=function(p1,p2,p3,p4,a1,a2){var a,b,c,d;var c3,c2,c1,c0;var cl;var n;var min=a1.min(a2);var max=a1.max(a2);var result=new Intersection(\"No Intersection\");a=p1.multiply(-1);b=p2.multiply(3);c=p3.multiply(-3);d=a.add(b.add(c.add(p4)));c3=new Vector2D(d.x,d.y);a=p1.multiply(3);b=p2.multiply(-6);c=p3.multiply(3);d=a.add(b.add(c));c2=new Vector2D(d.x,d.y);a=p1.multiply(-3);b=p2.multiply(3);c=a.add(b);c1=new Vector2D(c.x,c.y);c0=new Vector2D(p1.x,p1.y);n=new Vector2D(a1.y-a2.y,a2.x-a1.x);cl=a1.x*a2.y-a2.x*a1.y;roots=new Polynomial(n.dot(c3),n.dot(c2),n.dot(c1),n.dot(c0)+cl).getRoots();for(var i=0;i<roots.length;i++){var t=roots[i];if(0<=t&&t<=1){var p5=p1.lerp(p2,t);var p6=p2.lerp(p3,t);var p7=p3.lerp(p4,t);var p8=p5.lerp(p6,t);var p9=p6.lerp(p7,t);var p10=p8.lerp(p9,t);if(a1.x==a2.x){if(min.y<=p10.y&&p10.y<=max.y){result.status=\"Intersection\";result.appendPoint(p10);}}else if(a1.y==a2.y){if(min.x<=p10.x&&p10.x<=max.x){result.status=\"Intersection\";result.appendPoint(p10);}}else if(p10.gte(min)&&p10.lte(max)){result.status=\"Intersection\";result.appendPoint(p10);}}}return result;};\r\nIntersection.intersectBezier3Polygon=function(p1,p2,p3,p4,points){var result=new Intersection(\"No Intersection\");var length=points.length;for(var i=0;i<length;i++){var a1=points[i];var a2=points[(i+1)%length];var inter=Intersection.intersectBezier3Line(p1,p2,p3,p4,a1,a2);result.appendPoints(inter.points);}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectBezier3Rectangle=function(p1,p2,p3,p4,r1,r2){var min=r1.min(r2);var max=r1.max(r2);var topRight=new Point2D(max.x,min.y);var bottomLeft=new Point2D(min.x,max.y);var inter1=Intersection.intersectBezier3Line(p1,p2,p3,p4,min,topRight);var inter2=Intersection.intersectBezier3Line(p1,p2,p3,p4,topRight,max);var inter3=Intersection.intersectBezier3Line(p1,p2,p3,p4,max,bottomLeft);var inter4=Intersection.intersectBezier3Line(p1,p2,p3,p4,bottomLeft,min);var result=new Intersection(\"No Intersection\");result.appendPoints(inter1.points);result.appendPoints(inter2.points);result.appendPoints(inter3.points);result.appendPoints(inter4.points);if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectCircleCircle=function(c1,r1,c2,r2){var result;var r_max=r1+r2;var r_min=Math.abs(r1-r2);var c_dist=c1.distanceFrom(c2);if(c_dist>r_max){result=new Intersection(\"Outside\");}else if(c_dist<r_min){result=new Intersection(\"Inside\");}else{result=new Intersection(\"Intersection\");var a=(r1*r1-r2*r2+c_dist*c_dist)/(2*c_dist);var h=Math.sqrt(r1*r1-a*a);var p=c1.lerp(c2,a/c_dist);var b=h/c_dist;result.points.push(new Point2D(p.x-b*(c2.y-c1.y),p.y+b*(c2.x-c1.x)));result.points.push(new Point2D(p.x+b*(c2.y-c1.y),p.y-b*(c2.x-c1.x)));}return result;};\r\nIntersection.intersectCircleEllipse=function(cc,r,ec,rx,ry){return Intersection.intersectEllipseEllipse(cc,r,r,ec,rx,ry);};\r\nIntersection.intersectCircleLine=function(c,r,a1,a2){var result;var a=(a2.x-a1.x)*(a2.x-a1.x)+(a2.y-a1.y)*(a2.y-a1.y);var b=2*((a2.x-a1.x)*(a1.x-c.x)+(a2.y-a1.y)*(a1.y-c.y));var cc=c.x*c.x+c.y*c.y+a1.x*a1.x+a1.y*a1.y-2*(c.x*a1.x+c.y*a1.y)-r*r;var deter=b*b-4*a*cc;if(deter<0){result=new Intersection(\"Outside\");}else if(deter==0){result=new Intersection(\"Tangent\");}else{var e=Math.sqrt(deter);var u1=(-b+e)/(2*a);var u2=(-b-e)/(2*a);if((u1<0||u1>1)&&(u2<0||u2>1)){if((u1<0&&u2<0)||(u1>1&&u2>1)){result=new Intersection(\"Outside\");}else{result=new Intersection(\"Inside\");}}else{result=new Intersection(\"Intersection\");if(0<=u1&&u1<=1)result.points.push(a1.lerp(a2,u1));if(0<=u2&&u2<=1)result.points.push(a1.lerp(a2,u2));}}return result;};\r\nIntersection.intersectCirclePolygon=function(c,r,points){var result=new Intersection(\"No Intersection\");var length=points.length;var inter;for(var i=0;i<length;i++){var a1=points[i];var a2=points[(i+1)%length];inter=Intersection.intersectCircleLine(c,r,a1,a2);result.appendPoints(inter.points);}if(result.points.length>0)result.status=\"Intersection\";else result.status=inter.status;return result;};\r\nIntersection.intersectCircleRectangle=function(c,r,r1,r2){var min=r1.min(r2);var max=r1.max(r2);var topRight=new Point2D(max.x,min.y);var bottomLeft=new Point2D(min.x,max.y);var inter1=Intersection.intersectCircleLine(c,r,min,topRight);var inter2=Intersection.intersectCircleLine(c,r,topRight,max);var inter3=Intersection.intersectCircleLine(c,r,max,bottomLeft);var inter4=Intersection.intersectCircleLine(c,r,bottomLeft,min);var result=new Intersection(\"No Intersection\");result.appendPoints(inter1.points);result.appendPoints(inter2.points);result.appendPoints(inter3.points);result.appendPoints(inter4.points);if(result.points.length>0)result.status=\"Intersection\";else result.status=inter1.status;return result;};\r\nIntersection.intersectEllipseEllipse=function(c1,rx1,ry1,c2,rx2,ry2){var a=[ry1*ry1,0,rx1*rx1,-2*ry1*ry1*c1.x,-2*rx1*rx1*c1.y,ry1*ry1*c1.x*c1.x+rx1*rx1*c1.y*c1.y-rx1*rx1*ry1*ry1];var b=[ry2*ry2,0,rx2*rx2,-2*ry2*ry2*c2.x,-2*rx2*rx2*c2.y,ry2*ry2*c2.x*c2.x+rx2*rx2*c2.y*c2.y-rx2*rx2*ry2*ry2];var yPoly=Intersection.bezout(a,b);var yRoots=yPoly.getRoots();var epsilon=1e-3;var norm0=(a[0]*a[0]+2*a[1]*a[1]+a[2]*a[2])*epsilon;var norm1=(b[0]*b[0]+2*b[1]*b[1]+b[2]*b[2])*epsilon;var result=new Intersection(\"No Intersection\");for(var y=0;y<yRoots.length;y++){var xPoly=new Polynomial(a[0],a[3]+yRoots[y]*a[1],a[5]+yRoots[y]*(a[4]+yRoots[y]*a[2]));var xRoots=xPoly.getRoots();for(var x=0;x<xRoots.length;x++){var test=(a[0]*xRoots[x]+a[1]*yRoots[y]+a[3])*xRoots[x]+(a[2]*yRoots[y]+a[4])*yRoots[y]+a[5];if(Math.abs(test)<norm0){test=(b[0]*xRoots[x]+b[1]*yRoots[y]+b[3])*xRoots[x]+(b[2]*yRoots[y]+b[4])*yRoots[y]+b[5];if(Math.abs(test)<norm1){result.appendPoint(new Point2D(xRoots[x],yRoots[y]));}}}}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectEllipseLine=function(c,rx,ry,a1,a2){var result;var origin=new Vector2D(a1.x,a1.y);var dir=Vector2D.fromPoints(a1,a2);var center=new Vector2D(c.x,c.y);var diff=origin.subtract(center);var mDir=new Vector2D(dir.x/(rx*rx),  dir.y/(ry*ry));var mDiff=new Vector2D(diff.x/(rx*rx), diff.y/(ry*ry));var a=dir.dot(mDir);var b=dir.dot(mDiff);var c=diff.dot(mDiff)-1.0;var d=b*b-a*c;if(d<0){result=new Intersection(\"Outside\");}else if(d>0){var root=Math.sqrt(d);var t_a=(-b-root)/a;var t_b=(-b+root)/a;if((t_a<0||1<t_a)&&(t_b<0||1<t_b)){if((t_a<0&&t_b<0)||(t_a>1&&t_b>1))result=new Intersection(\"Outside\");else result=new Intersection(\"Inside\");}else{result=new Intersection(\"Intersection\");if(0<=t_a&&t_a<=1)result.appendPoint(a1.lerp(a2,t_a));if(0<=t_b&&t_b<=1)result.appendPoint(a1.lerp(a2,t_b));}}else{var t=-b/a;if(0<=t&&t<=1){result=new Intersection(\"Intersection\");result.appendPoint(a1.lerp(a2,t));}else{result=new Intersection(\"Outside\");}}return result;};\r\nIntersection.intersectEllipsePolygon=function(c,rx,ry,points){var result=new Intersection(\"No Intersection\");var length=points.length;for(var i=0;i<length;i++){var b1=points[i];var b2=points[(i+1)%length];var inter=Intersection.intersectEllipseLine(c,rx,ry,b1,b2);result.appendPoints(inter.points);}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectEllipseRectangle=function(c,rx,ry,r1,r2){var min=r1.min(r2);var max=r1.max(r2);var topRight=new Point2D(max.x,min.y);var bottomLeft=new Point2D(min.x,max.y);var inter1=Intersection.intersectEllipseLine(c,rx,ry,min,topRight);var inter2=Intersection.intersectEllipseLine(c,rx,ry,topRight,max);var inter3=Intersection.intersectEllipseLine(c,rx,ry,max,bottomLeft);var inter4=Intersection.intersectEllipseLine(c,rx,ry,bottomLeft,min);var result=new Intersection(\"No Intersection\");result.appendPoints(inter1.points);result.appendPoints(inter2.points);result.appendPoints(inter3.points);result.appendPoints(inter4.points);if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectLineLine=function(a1,a2,b1,b2){var result;var ua_t=(b2.x-b1.x)*(a1.y-b1.y)-(b2.y-b1.y)*(a1.x-b1.x);var ub_t=(a2.x-a1.x)*(a1.y-b1.y)-(a2.y-a1.y)*(a1.x-b1.x);var u_b=(b2.y-b1.y)*(a2.x-a1.x)-(b2.x-b1.x)*(a2.y-a1.y);if(u_b!=0){var ua=ua_t/u_b;var ub=ub_t/u_b;if(0<=ua&&ua<=1&&0<=ub&&ub<=1){result=new Intersection(\"Intersection\");result.points.push(new Point2D(a1.x+ua*(a2.x-a1.x),a1.y+ua*(a2.y-a1.y)));}else{result=new Intersection(\"No Intersection\");}}else{if(ua_t==0||ub_t==0){result=new Intersection(\"Coincident\");}else{result=new Intersection(\"Parallel\");}}return result;};\r\nIntersection.intersectLinePolygon=function(a1,a2,points){var result=new Intersection(\"No Intersection\");var length=points.length;for(var i=0;i<length;i++){var b1=points[i];var b2=points[(i+1)%length];var inter=Intersection.intersectLineLine(a1,a2,b1,b2);result.appendPoints(inter.points);}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectLineRectangle=function(a1,a2,r1,r2){var min=r1.min(r2);var max=r1.max(r2);var topRight=new Point2D(max.x,min.y);var bottomLeft=new Point2D(min.x,max.y);var inter1=Intersection.intersectLineLine(min,topRight,a1,a2);var inter2=Intersection.intersectLineLine(topRight,max,a1,a2);var inter3=Intersection.intersectLineLine(max,bottomLeft,a1,a2);var inter4=Intersection.intersectLineLine(bottomLeft,min,a1,a2);var result=new Intersection(\"No Intersection\");result.appendPoints(inter1.points);result.appendPoints(inter2.points);result.appendPoints(inter3.points);result.appendPoints(inter4.points);if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectPolygonPolygon=function(points1,points2){var result=new Intersection(\"No Intersection\");var length=points1.length;for(var i=0;i<length;i++){var a1=points1[i];var a2=points1[(i+1)%length];var inter=Intersection.intersectLinePolygon(a1,a2,points2);result.appendPoints(inter.points);}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectPolygonRectangle=function(points,r1,r2){var min=r1.min(r2);var max=r1.max(r2);var topRight=new Point2D(max.x,min.y);var bottomLeft=new Point2D(min.x,max.y);var inter1=Intersection.intersectLinePolygon(min,topRight,points);var inter2=Intersection.intersectLinePolygon(topRight,max,points);var inter3=Intersection.intersectLinePolygon(max,bottomLeft,points);var inter4=Intersection.intersectLinePolygon(bottomLeft,min,points);var result=new Intersection(\"No Intersection\");result.appendPoints(inter1.points);result.appendPoints(inter2.points);result.appendPoints(inter3.points);result.appendPoints(inter4.points);if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.intersectRayRay=function(a1,a2,b1,b2){var result;var ua_t=(b2.x-b1.x)*(a1.y-b1.y)-(b2.y-b1.y)*(a1.x-b1.x);var ub_t=(a2.x-a1.x)*(a1.y-b1.y)-(a2.y-a1.y)*(a1.x-b1.x);var u_b=(b2.y-b1.y)*(a2.x-a1.x)-(b2.x-b1.x)*(a2.y-a1.y);if(u_b!=0){var ua=ua_t/u_b;result=new Intersection(\"Intersection\");result.points.push(new Point2D(a1.x+ua*(a2.x-a1.x),a1.y+ua*(a2.y-a1.y)));}else{if(ua_t==0||ub_t==0){result=new Intersection(\"Coincident\");}else{result=new Intersection(\"Parallel\");}}return result;};\r\nIntersection.intersectRectangleRectangle=function(a1,a2,b1,b2){var min=a1.min(a2);var max=a1.max(a2);var topRight=new Point2D(max.x,min.y);var bottomLeft=new Point2D(min.x,max.y);var inter1=Intersection.intersectLineRectangle(min,topRight,b1,b2);var inter2=Intersection.intersectLineRectangle(topRight,max,b1,b2);var inter3=Intersection.intersectLineRectangle(max,bottomLeft,b1,b2);var inter4=Intersection.intersectLineRectangle(bottomLeft,min,b1,b2);var result=new Intersection(\"No Intersection\");result.appendPoints(inter1.points);result.appendPoints(inter2.points);result.appendPoints(inter3.points);result.appendPoints(inter4.points);if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nIntersection.bezout=function(e1,e2){var AB=e1[0]*e2[1]-e2[0]*e1[1];var AC=e1[0]*e2[2]-e2[0]*e1[2];var AD=e1[0]*e2[3]-e2[0]*e1[3];var AE=e1[0]*e2[4]-e2[0]*e1[4];var AF=e1[0]*e2[5]-e2[0]*e1[5];var BC=e1[1]*e2[2]-e2[1]*e1[2];var BE=e1[1]*e2[4]-e2[1]*e1[4];var BF=e1[1]*e2[5]-e2[1]*e1[5];var CD=e1[2]*e2[3]-e2[2]*e1[3];var DE=e1[3]*e2[4]-e2[3]*e1[4];var DF=e1[3]*e2[5]-e2[3]*e1[5];var BFpDE=BF+DE;var BEmCD=BE-CD;return new Polynomial(AB*BC-AC*AC,AB*BEmCD+AD*BC-2*AC*AE,AB*BFpDE+AD*BEmCD-AE*AE-2*AC*AF,AB*DF+AD*BFpDE-2*AE*AF,AD*DF-AF*AF);};\r\nfunction IntersectionParams(name,params){if(arguments.length>0)this.init(name,params);}\r\nIntersectionParams.prototype.init=function(name,params){this.name=name;this.params=params;};\r\nfunction Point2D(x,y){if(arguments.length>0){this.x=x;this.y=y;}}\r\nPoint2D.prototype.clone=function(){return new Point2D(this.x,this.y);};\r\nPoint2D.prototype.add=function(that){return new Point2D(this.x+that.x,this.y+that.y);};\r\nPoint2D.prototype.addEquals=function(that){this.x+=that.x;this.y+=that.y;return this;};\r\nPoint2D.prototype.offset=function(a,b){var result=0;if(!(b.x<=this.x||this.x+a.x<=0)){var t=b.x*a.y-a.x*b.y;var s;var d;if(t>0){if(this.x<0){s=this.x*a.y;d=s/a.x-this.y;}else if(this.x>0){s=this.x*b.y;d=s/b.x-this.y}else{d=-this.y;}}else{if(b.x<this.x+a.x){s=(b.x-this.x)*a.y;d=b.y-(this.y+s/a.x);}else if(b.x>this.x+a.x){s=(a.x+this.x)*b.y;d=s/b.x-(this.y+a.y);}else{d=b.y-(this.y+a.y);}}if(d>0){result=d;}}return result;};\r\nPoint2D.prototype.rmoveto=function(dx,dy){this.x+=dx;this.y+=dy;};\r\nPoint2D.prototype.scalarAdd=function(scalar){return new Point2D(this.x+scalar,this.y+scalar);};\r\nPoint2D.prototype.scalarAddEquals=function(scalar){this.x+=scalar;this.y+=scalar;return this;};\r\nPoint2D.prototype.subtract=function(that){return new Point2D(this.x-that.x,this.y-that.y);};\r\nPoint2D.prototype.subtractEquals=function(that){this.x-=that.x;this.y-=that.y;return this;};\r\nPoint2D.prototype.scalarSubtract=function(scalar){return new Point2D(this.x-scalar,this.y-scalar);};\r\nPoint2D.prototype.scalarSubtractEquals=function(scalar){this.x-=scalar;this.y-=scalar;return this;};\r\nPoint2D.prototype.multiply=function(scalar){return new Point2D(this.x*scalar,this.y*scalar);};\r\nPoint2D.prototype.multiplyEquals=function(scalar){this.x*=scalar;this.y*=scalar;return this;};\r\nPoint2D.prototype.divide=function(scalar){return new Point2D(this.x/scalar, this.y/scalar);};\r\nPoint2D.prototype.divideEquals=function(scalar){this.x/=scalar;this.y/=scalar;return this;};\r\nPoint2D.prototype.compare=function(that){return(this.x-that.x||this.y-that.y);};\r\nPoint2D.prototype.eq=function(that){return(this.x==that.x&&this.y==that.y);};\r\nPoint2D.prototype.lt=function(that){return(this.x<that.x&&this.y<that.y);};\r\nPoint2D.prototype.lte=function(that){return(this.x<=that.x&&this.y<=that.y);};\r\nPoint2D.prototype.gt=function(that){return(this.x>that.x&&this.y>that.y);};\r\nPoint2D.prototype.gte=function(that){return(this.x>=that.x&&this.y>=that.y);};\r\nPoint2D.prototype.lerp=function(that,t){return new Point2D(this.x+(that.x-this.x)*t,this.y+(that.y-this.y)*t);};\r\nPoint2D.prototype.distanceFrom=function(that){var dx=this.x-that.x;var dy=this.y-that.y;return Math.sqrt(dx*dx+dy*dy);};\r\nPoint2D.prototype.min=function(that){return new Point2D(Math.min(this.x,that.x),Math.min(this.y,that.y));};\r\nPoint2D.prototype.max=function(that){return new Point2D(Math.max(this.x,that.x),Math.max(this.y,that.y));};\r\nPoint2D.prototype.toString=function(){return this.x+\",\"+this.y;};\r\nPoint2D.prototype.setXY=function(x,y){this.x=x;this.y=y;};\r\nPoint2D.prototype.setFromPoint=function(that){this.x=that.x;this.y=that.y;};\r\nPoint2D.prototype.swap=function(that){var x=this.x;var y=this.y;this.x=that.x;this.y=that.y;that.x=x;that.y=y;};\r\nPolynomial.TOLERANCE=1e-6;\r\nPolynomial.ACCURACY=6;\r\nPolynomial.interpolate=function(xs,ys,n,offset,x){if(xs.constructor!==Array||ys.constructor!==Array)throw new Error(\"Polynomial.interpolate: xs and ys must be arrays\");if(isNaN(n)||isNaN(offset)||isNaN(x))throw new Error(\"Polynomial.interpolate: n, offset, and x must be numbers\");var y=0;var dy=0;var c=new Array(n);var d=new Array(n);var ns=0;var result;var diff=Math.abs(x-xs[offset]);for(var i=0;i<n;i++){var dift=Math.abs(x-xs[offset+i]);if(dift<diff){ns=i;diff=dift;}c[i]=d[i]=ys[offset+i];}y=ys[offset+ns];ns--;for(var m=1;m<n;m++){for(var i=0;i<n-m;i++){var ho=xs[offset+i]-x;var hp=xs[offset+i+m]-x;var w=c[i+1]-d[i];var den=ho-hp;if(den==0.0){result={y:0,dy:0};break;}den=w/den;d[i]=hp*den;c[i]=ho*den;}dy=(2*(ns+1)<(n-m))?c[ns+1]:d[ns--];y+=dy;}return{y:y,dy:dy};};\r\nfunction Polynomial(){this.init(arguments);}\r\nPolynomial.prototype.init=function(coefs){this.coefs=new Array();for(var i=coefs.length-1;i>=0;i--)this.coefs.push(coefs[i]);this._variable=\"t\";this._s=0;};\r\nPolynomial.prototype.eval=function(x){if(isNaN(x))throw new Error(\"Polynomial.eval: parameter must be a number\");var result=0;for(var i=this.coefs.length-1;i>=0;i--)result=result*x+this.coefs[i];return result;};\r\nPolynomial.prototype.add=function(that){var result=new Polynomial();var d1=this.getDegree();var d2=that.getDegree();var dmax=Math.max(d1,d2);for(var i=0;i<=dmax;i++){var v1=(i<=d1)?this.coefs[i]:0;var v2=(i<=d2)?that.coefs[i]:0;result.coefs[i]=v1+v2;}return result;};\r\nPolynomial.prototype.multiply=function(that){var result=new Polynomial();for(var i=0;i<=this.getDegree()+that.getDegree();i++)result.coefs.push(0);for(var i=0;i<=this.getDegree();i++)for(var j=0;j<=that.getDegree();j++)result.coefs[i+j]+=this.coefs[i]*that.coefs[j];return result;};\r\nPolynomial.prototype.divide_scalar=function(scalar){for(var i=0;i<this.coefs.length;i++)this.coefs[i]/=scalar;};\r\nPolynomial.prototype.simplify=function(){for(var i=this.getDegree();i>=0;i--){if(Math.abs(this.coefs[i])<=Polynomial.TOLERANCE)this.coefs.pop();else break;}};\r\nPolynomial.prototype.bisection=function(min,max){var minValue=this.eval(min);var maxValue=this.eval(max);var result;if(Math.abs(minValue)<=Polynomial.TOLERANCE)result=min;else if(Math.abs(maxValue)<=Polynomial.TOLERANCE)result=max;else if(minValue*maxValue<=0){var tmp1=Math.log(max-min);var tmp2=Math.LN10*Polynomial.ACCURACY;var iters=Math.ceil((tmp1+tmp2)/Math.LN2);for(var i=0;i<iters;i++){result=0.5*(min+max);var value=this.eval(result);if(Math.abs(value)<=Polynomial.TOLERANCE){break;}if(value*minValue<0){max=result;maxValue=value;}else{min=result;minValue=value;}}}return result;};\r\nPolynomial.prototype.toString=function(){var coefs=new Array();var signs=new Array();for(var i=this.coefs.length-1;i>=0;i--){var value=Math.round(this.coefs[i]*1000)/1000;if(value!=0){var sign=(value<0)?\" - \":\" + \";value=Math.abs(value);if(i>0)if(value==1)value=this._variable;else value+=this._variable;if(i>1)value+=\"^\"+i;signs.push(sign);coefs.push(value);}}signs[0]=(signs[0]==\" + \")?\"\":\"-\";var result=\"\";for(var i=0;i<coefs.length;i++)result+=signs[i]+coefs[i];return result;};\r\nPolynomial.prototype.trapezoid=function(min,max,n){if(isNaN(min)||isNaN(max)||isNaN(n))throw new Error(\"Polynomial.trapezoid: parameters must be numbers\");var range=max-min;var TOLERANCE=1e-7;if(n==1){var minValue=this.eval(min);var maxValue=this.eval(max);this._s=0.5*range*(minValue+maxValue);}else{var it=1<<(n-2);var delta=range/it;var x=min+0.5*delta;var sum=0;for(var i=0;i<it;i++){sum+=this.eval(x);x+=delta;}this._s=0.5*(this._s+range*sum/it);}if(isNaN(this._s))throw new Error(\"Polynomial.trapezoid: this._s is NaN\");return this._s;};\r\nPolynomial.prototype.simpson=function(min,max){if(isNaN(min)||isNaN(max))throw new Error(\"Polynomial.simpson: parameters must be numbers\");var range=max-min;var st=0.5*range*(this.eval(min)+this.eval(max));var t=st;var s=4.0*st/3.0;var os=s;var ost=st;var TOLERANCE=1e-7;var it=1;for(var n=2;n<=20;n++){var delta=range/it;var x=min+0.5*delta;var sum=0;for(var i=1;i<=it;i++){sum+=this.eval(x);x+=delta;}t=0.5*(t+range*sum/it);st=t;s=(4.0*st-ost)/3.0;if(Math.abs(s-os)<TOLERANCE*Math.abs(os))break;os=s;ost=st;it<<=1;}return s;};\r\nPolynomial.prototype.romberg=function(min,max){if(isNaN(min)||isNaN(max))throw new Error(\"Polynomial.romberg: parameters must be numbers\");var MAX=20;var K=3;var TOLERANCE=1e-6;var s=new Array(MAX+1);var h=new Array(MAX+1);var result={y:0,dy:0};h[0]=1.0;for(var j=1;j<=MAX;j++){s[j-1]=this.trapezoid(min,max,j);if(j>=K){result=Polynomial.interpolate(h,s,K,j-K,0.0);if(Math.abs(result.dy)<=TOLERANCE*result.y)break;}s[j]=s[j-1];h[j]=0.25*h[j-1];}return result.y;};\r\nPolynomial.prototype.getDegree=function(){return this.coefs.length-1;};\r\nPolynomial.prototype.getDerivative=function(){var derivative=new Polynomial();for(var i=1;i<this.coefs.length;i++){derivative.coefs.push(i*this.coefs[i]);}return derivative;};\r\nPolynomial.prototype.getRoots=function(){var result;this.simplify();switch(this.getDegree()){case 0:result=new Array();break;case 1:result=this.getLinearRoot();break;case 2:result=this.getQuadraticRoots();break;case 3:result=this.getCubicRoots();break;case 4:result=this.getQuarticRoots();break;default:result=new Array();}return result;};\r\nPolynomial.prototype.getRootsInInterval=function(min,max){var roots=new Array();var root;if(this.getDegree()==1){root=this.bisection(min,max);if(root!=null)roots.push(root);}else{var deriv=this.getDerivative();var droots=deriv.getRootsInInterval(min,max);if(droots.length>0){root=this.bisection(min,droots[0]);if(root!=null)roots.push(root);for(i=0;i<=droots.length-2;i++){root=this.bisection(droots[i],droots[i+1]);if(root!=null)roots.push(root);}root=this.bisection(droots[droots.length-1],max);if(root!=null)roots.push(root);}else{root=this.bisection(min,max);if(root!=null)roots.push(root);}}return roots;};\r\nPolynomial.prototype.getLinearRoot=function(){var result=new Array();var a=this.coefs[1];if(a!=0)result.push(-this.coefs[0]/a);return result;};\r\nPolynomial.prototype.getQuadraticRoots=function(){var results=new Array();if(this.getDegree()==2){var a=this.coefs[2];var b=this.coefs[1]/a;var c=this.coefs[0]/a;var d=b*b-4*c;if(d>0){var e=Math.sqrt(d);results.push(0.5*(-b+e));results.push(0.5*(-b-e));}else if(d==0){results.push(0.5*-b);}}return results;};\r\nPolynomial.prototype.getCubicRoots=function(){var results=new Array();if(this.getDegree()==3){var c3=this.coefs[3];var c2=this.coefs[2]/c3;var c1=this.coefs[1]/c3;var c0=this.coefs[0]/c3;var a=(3*c1-c2*c2)/3;var b=(2*c2*c2*c2-9*c1*c2+27*c0)/27;var offset=c2/3;var discrim=b*b/4 + a*a*a/27;var halfB=b/2;if(Math.abs(discrim)<=Polynomial.TOLERANCE)disrim=0;if(discrim>0){var e=Math.sqrt(discrim);var tmp;var root;tmp=-halfB+e;if(tmp>=0)root=Math.pow(tmp,1/3);else root=-Math.pow(-tmp,1/3);tmp=-halfB-e;if(tmp>=0)root+=Math.pow(tmp,1/3);else root-=Math.pow(-tmp,1/3);results.push(root-offset);}else if(discrim<0){var distance=Math.sqrt(-a/3);var angle=Math.atan2(Math.sqrt(-discrim),-halfB)/3;var cos=Math.cos(angle);var sin=Math.sin(angle);var sqrt3=Math.sqrt(3);results.push(2*distance*cos-offset);results.push(-distance*(cos+sqrt3*sin)-offset);results.push(-distance*(cos-sqrt3*sin)-offset);}else{var tmp;if(halfB>=0)tmp=-Math.pow(halfB,1/3);else tmp=Math.pow(-halfB,1/3);results.push(2*tmp-offset);results.push(-tmp-offset);}}return results;};\r\nPolynomial.prototype.getQuarticRoots=function(){var results=new Array();if(this.getDegree()==4){var c4=this.coefs[4];var c3=this.coefs[3]/c4;var c2=this.coefs[2]/c4;var c1=this.coefs[1]/c4;var c0=this.coefs[0]/c4;var resolveRoots=new Polynomial(1,-c2,c3*c1-4*c0,-c3*c3*c0+4*c2*c0-c1*c1).getCubicRoots();var y=resolveRoots[0];var discrim=c3*c3/4-c2+y;if(Math.abs(discrim)<=Polynomial.TOLERANCE)discrim=0;if(discrim>0){var e=Math.sqrt(discrim);var t1=3*c3*c3/4-e*e-2*c2;var t2=(4*c3*c2-8*c1-c3*c3*c3)/(4*e);var plus=t1+t2;var minus=t1-t2;if(Math.abs(plus)<=Polynomial.TOLERANCE)plus=0;if(Math.abs(minus)<=Polynomial.TOLERANCE)minus=0;if(plus>=0){var f=Math.sqrt(plus);results.push(-c3/4 + (e+f)/2);results.push(-c3/4 + (e-f)/2);}if(minus>=0){var f=Math.sqrt(minus);results.push(-c3/4 + (f-e)/2);results.push(-c3/4 - (f+e)/2);}}else if(discrim<0){}else{var t2=y*y-4*c0;if(t2>=-Polynomial.TOLERANCE){if(t2<0)t2=0;t2=2*Math.sqrt(t2);t1=3*c3*c3/4-2*c2;if(t1+t2>=Polynomial.TOLERANCE){var d=Math.sqrt(t1+t2);results.push(-c3/4 + d/2);results.push(-c3/4 - d/2);}if(t1-t2>=Polynomial.TOLERANCE){var d=Math.sqrt(t1-t2);results.push(-c3/4 + d/2);results.push(-c3/4 - d/2);}}}}return results;};\r\nfunction Vector2D(x,y){if(arguments.length>0){this.x=x;this.y=y;}}\r\nVector2D.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y);};\r\nVector2D.prototype.dot=function(that){return this.x*that.x+this.y*that.y;};\r\nVector2D.prototype.cross=function(that){return this.x*that.y-this.y*that.x;}\r\nVector2D.prototype.unit=function(){return this.divide(this.length());};\r\nVector2D.prototype.unitEquals=function(){this.divideEquals(this.length());return this;};\r\nVector2D.prototype.add=function(that){return new Vector2D(this.x+that.x,this.y+that.y);};\r\nVector2D.prototype.addEquals=function(that){this.x+=that.x;this.y+=that.y;return this;};\r\nVector2D.prototype.subtract=function(that){return new Vector2D(this.x-that.x,this.y-that.y);};\r\nVector2D.prototype.subtractEquals=function(that){this.x-=that.x;this.y-=that.y;return this;};\r\nVector2D.prototype.multiply=function(scalar){return new Vector2D(this.x*scalar,this.y*scalar);};\r\nVector2D.prototype.multiplyEquals=function(scalar){this.x*=scalar;this.y*=scalar;return this;};\r\nVector2D.prototype.divide=function(scalar){return new Vector2D(this.x/ scalar, this.y /scalar);};\r\nVector2D.prototype.divideEquals=function(scalar){this.x/=scalar;this.y/=scalar;return this;};\r\nVector2D.prototype.perp=function(){return new Vector2D(-this.y,this.x);};\r\nVector2D.prototype.perpendicular=function(that){return this.subtract(this.project(that));};\r\nVector2D.prototype.project=function(that){var percent=this.dot(that)/that.dot(that);return that.multiply(percent);};\r\nVector2D.prototype.toString=function(){return this.x+\",\"+this.y;};\r\nVector2D.fromPoints=function(p1,p2){return new Vector2D(p2.x-p1.x,p2.y-p1.y);};\r\nShape.prototype=new EventHandler();\r\nShape.prototype.constructor=Shape;\r\nShape.superclass=EventHandler.prototype;\r\nfunction Shape(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nShape.prototype.init=function(svgNode){this.svgNode=svgNode;this.locked=false;this.visible=true;this.selected=false;this.callback=null;this.lastUpdate=null;}\r\nShape.prototype.show=function(state){var display=(state)?\"inline\":\"none\";this.visible=state;this.svgNode.setAttributeNS(null,\"display\",display);};\r\nShape.prototype.refresh=function(){};\r\nShape.prototype.update=function(){this.refresh();if(this.owner)this.owner.update(this);if(this.callback!=null)this.callback(this);};\r\nShape.prototype.translate=function(delta){};\r\nShape.prototype.select=function(state){this.selected=state;};\r\nShape.prototype.registerHandles=function(){};\r\nShape.prototype.unregisterHandles=function(){};\r\nShape.prototype.selectHandles=function(select){};\r\nShape.prototype.showHandles=function(state){};\r\nShape.prototype.mousedown=function(e){if(!this.locked){if(e.shiftKey){if(this.selected){mouser.unregisterShape(this);}else{mouser.registerShape(this);this.showHandles(true);this.selectHandles(true);this.registerHandles();}}else{if(this.selected){this.selectHandles(true);this.registerHandles();}else{mouser.unregisterShapes();mouser.registerShape(this);this.showHandles(true);this.selectHandles(false);}}}};\r\nCircle.prototype=new Shape();\r\nCircle.prototype.constructor=Circle;\r\nCircle.superclass=Shape.prototype;\r\nfunction Circle(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nCircle.prototype.init=function(svgNode){if(svgNode.localName==\"circle\"){Circle.superclass.init.call(this,svgNode);var cx=parseFloat(svgNode.getAttributeNS(null,\"cx\"));var cy=parseFloat(svgNode.getAttributeNS(null,\"cy\"));var r=parseFloat(svgNode.getAttributeNS(null,\"r\"));this.center=new Handle(cx,cy,this);this.last=new Point2D(cx,cy);this.radius=new Handle(cx+r,cy,this);}else{throw new Error(\"Circle.init: Invalid SVG Node: \"+svgNode.localName);}};\r\nCircle.prototype.realize=function(){if(this.svgNode!=null){this.center.realize();this.radius.realize();this.center.show(false);this.radius.show(false);this.svgNode.addEventListener(\"mousedown\",this,false);}};\r\nCircle.prototype.translate=function(delta){this.center.translate(delta);this.radius.translate(delta);this.refresh();};\r\nCircle.prototype.refresh=function(){var r=this.radius.point.distanceFrom(this.center.point);this.svgNode.setAttributeNS(null,\"cx\",this.center.point.x);this.svgNode.setAttributeNS(null,\"cy\",this.center.point.y);this.svgNode.setAttributeNS(null,\"r\",r);};\r\nCircle.prototype.registerHandles=function(){mouser.register(this.center);mouser.register(this.radius);};\r\nCircle.prototype.unregisterHandles=function(){mouser.unregister(this.center);mouser.unregister(this.radius);};\r\nCircle.prototype.selectHandles=function(select){this.center.select(select);this.radius.select(select);};\r\nCircle.prototype.showHandles=function(state){this.center.show(state);this.radius.show(state);};\r\nCircle.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Circle\",[this.center.point,parseFloat(this.svgNode.getAttributeNS(null,\"r\"))]);};\r\nEllipse.prototype=new Shape();\r\nEllipse.prototype.constructor=Ellipse;\r\nEllipse.superclass=Shape.prototype;\r\nfunction Ellipse(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nEllipse.prototype.init=function(svgNode){if(svgNode==null||svgNode.localName!=\"ellipse\")throw new Error(\"Ellipse.init: Invalid localName: \"+svgNode.localName);Ellipse.superclass.init.call(this,svgNode);var cx=parseFloat(svgNode.getAttributeNS(null,\"cx\"));var cy=parseFloat(svgNode.getAttributeNS(null,\"cy\"));var rx=parseFloat(svgNode.getAttributeNS(null,\"rx\"));var ry=parseFloat(svgNode.getAttributeNS(null,\"ry\"));this.center=new Handle(cx,cy,this);this.radiusX=new Handle(cx+rx,cy,this);this.radiusY=new Handle(cx,cy+ry,this);};\r\nEllipse.prototype.realize=function(){this.center.realize();this.radiusX.realize();this.radiusY.realize();this.center.show(false);this.radiusX.show(false);this.radiusY.show(false);this.svgNode.addEventListener(\"mousedown\",this,false);};\r\nEllipse.prototype.refresh=function(){var rx=Math.abs(this.center.point.x-this.radiusX.point.x);var ry=Math.abs(this.center.point.y-this.radiusY.point.y);this.svgNode.setAttributeNS(null,\"cx\",this.center.point.x);this.svgNode.setAttributeNS(null,\"cy\",this.center.point.y);this.svgNode.setAttributeNS(null,\"rx\",rx);this.svgNode.setAttributeNS(null,\"ry\",ry);};\r\nEllipse.prototype.registerHandles=function(){mouser.register(this.center);mouser.register(this.radiusX);mouser.register(this.radiusY);};\r\nEllipse.prototype.unregisterHandles=function(){mouser.unregister(this.center);mouser.unregister(this.radiusX);mouser.unregister(this.radiusY);};\r\nEllipse.prototype.selectHandles=function(select){this.center.select(select);this.radiusX.select(select);this.radiusY.select(select);};\r\nEllipse.prototype.showHandles=function(state){this.center.show(state);this.radiusX.show(state);this.radiusY.show(state);};\r\nEllipse.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Ellipse\",[this.center.point,parseFloat(this.svgNode.getAttributeNS(null,\"rx\")),parseFloat(this.svgNode.getAttributeNS(null,\"ry\"))]);};\r\nHandle.prototype=new Shape();\r\nHandle.prototype.constructor=Handle;\r\nHandle.superclass=Shape.prototype;\r\nHandle.NO_CONSTRAINTS=0;\r\nHandle.CONSTRAIN_X=1;\r\nHandle.CONSTRAIN_Y=2;\r\nfunction Handle(x,y,owner){if(arguments.length>0){this.init(x,y,owner);}}\r\nHandle.prototype.init=function(x,y,owner){Handle.superclass.init.call(this,null);this.point=new Point2D(x,y);this.owner=owner;this.constrain=Handle.NO_CONSTRAINTS;}\r\nHandle.prototype.realize=function(){if(this.svgNode==null){var svgns=\"http://www.w3.org/2000/svg\";var handle=svgDocument.createElementNS(svgns,\"rect\");var parent;if(this.owner!=null&&this.owner.svgNode!=null){parent=this.owner.svgNode.parentNode;}else{parent=svgDocument.documentElement;}handle.setAttributeNS(null,\"x\",this.point.x-2);handle.setAttributeNS(null,\"y\",this.point.y-2);handle.setAttributeNS(null,\"width\",4);handle.setAttributeNS(null,\"height\",4);handle.setAttributeNS(null,\"stroke\",\"black\");handle.setAttributeNS(null,\"fill\",\"white\");handle.addEventListener(\"mousedown\",this,false);parent.appendChild(handle);this.svgNode=handle;this.show(this.visible);}};\r\nHandle.prototype.unrealize=function(){this.svgNode.removeEventListener(\"mousedown\",this,false);this.svgNode.parentNode.removeChild(this.svgNode);};\r\nHandle.prototype.translate=function(delta){if(this.constrain==Handle.CONSTRAIN_X){this.point.x+=delta.x;}else if(this.constrain==Handle.CONSTRAIN_Y){this.point.y+=delta.y;}else{this.point.addEquals(delta);}this.refresh();};\r\nHandle.prototype.refresh=function(){this.svgNode.setAttributeNS(null,\"x\",this.point.x-2);this.svgNode.setAttributeNS(null,\"y\",this.point.y-2);};\r\nHandle.prototype.select=function(state){Handle.superclass.select.call(this,state);if(state){this.svgNode.setAttributeNS(null,\"fill\",\"black\");}else{this.svgNode.setAttributeNS(null,\"fill\",\"white\");}};\r\nHandle.prototype.mousedown=function(e){if(!this.locked){if(e.shiftKey){if(this.selected){mouser.unregister(this);}else{mouser.register(this);mouser.beginDrag(e);}}else{if(!this.selected){var owner=this.owner;mouser.unregisterAll();mouser.register(this);}mouser.beginDrag(e);}}};\r\nLever.prototype=new Shape();\r\nLever.prototype.constructor=Lever;\r\nLever.superclass=Shape.prototype;\r\nfunction Lever(x1,y1,x2,y2,owner){if(arguments.length>0){this.init(x1,y1,x2,y2,owner);}}\r\nLever.prototype.init=function(x1,y1,x2,y2,owner){Lever.superclass.init.call(this,null);this.point=new Handle(x1,y1,this);this.lever=new LeverHandle(x2,y2,this);this.owner=owner;};\r\nLever.prototype.realize=function(){if(this.svgNode==null){var svgns=\"http://www.w3.org/2000/svg\";var line=svgDocument.createElementNS(svgns,\"line\");var parent;if(this.owner!=null&&this.owner.svgNode!=null){parent=this.owner.svgNode.parentNode;}else{parent=svgDocument.documentElement;}line.setAttributeNS(null,\"x1\",this.point.point.x);line.setAttributeNS(null,\"y1\",this.point.point.y);line.setAttributeNS(null,\"x2\",this.lever.point.x);line.setAttributeNS(null,\"y2\",this.lever.point.y);line.setAttributeNS(null,\"stroke\",\"black\");parent.appendChild(line);this.svgNode=line;this.point.realize();this.lever.realize();this.show(this.visible);}};\r\nLever.prototype.refresh=function(){this.svgNode.setAttributeNS(null,\"x1\",this.point.point.x);this.svgNode.setAttributeNS(null,\"y1\",this.point.point.y);this.svgNode.setAttributeNS(null,\"x2\",this.lever.point.x);this.svgNode.setAttributeNS(null,\"y2\",this.lever.point.y);};\r\nLeverHandle.prototype=new Handle();\r\nLeverHandle.prototype.constructor=LeverHandle;\r\nLeverHandle.superclass=Handle.prototype;\r\nfunction LeverHandle(x,y,owner){if(arguments.length>0){this.init(x,y,owner);}}\r\nLeverHandle.prototype.realize=function(){if(this.svgNode==null){var svgns=\"http://www.w3.org/2000/svg\";var handle=svgDocument.createElementNS(svgns,\"circle\");var parent;if(this.owner!=null&&this.owner.svgNode!=null){parent=this.owner.svgNode.parentNode;}else{parent=svgDocument.documentElement;}handle.setAttributeNS(null,\"cx\",this.point.x);handle.setAttributeNS(null,\"cy\",this.point.y);handle.setAttributeNS(null,\"r\",2.5);handle.setAttributeNS(null,\"fill\",\"black\");handle.addEventListener(\"mousedown\",this,false);parent.appendChild(handle);this.svgNode=handle;this.show(this.visible);}};\r\nLeverHandle.prototype.refresh=function(){this.svgNode.setAttributeNS(null,\"cx\",this.point.x);this.svgNode.setAttributeNS(null,\"cy\",this.point.y);};\r\nLeverHandle.prototype.select=function(state){LeverHandle.superclass.select.call(this,state);this.svgNode.setAttributeNS(null,\"fill\",\"black\");};\r\nLine.prototype=new Shape();\r\nLine.prototype.constructor=Line;\r\nLine.superclass=Shape.prototype;\r\nfunction Line(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nLine.prototype.init=function(svgNode){if(svgNode==null||svgNode.localName!=\"line\")throw new Error(\"Line.init: Invalid localName: \"+svgNode.localName);Line.superclass.init.call(this,svgNode);var x1=parseFloat(svgNode.getAttributeNS(null,\"x1\"));var y1=parseFloat(svgNode.getAttributeNS(null,\"y1\"));var x2=parseFloat(svgNode.getAttributeNS(null,\"x2\"));var y2=parseFloat(svgNode.getAttributeNS(null,\"y2\"));this.p1=new Handle(x1,y1,this);this.p2=new Handle(x2,y2,this);};\r\nLine.prototype.realize=function(){this.p1.realize();this.p2.realize();this.p1.show(false);this.p2.show(false);this.svgNode.addEventListener(\"mousedown\",this,false);};\r\nLine.prototype.refresh=function(){this.svgNode.setAttributeNS(null,\"x1\",this.p1.point.x);this.svgNode.setAttributeNS(null,\"y1\",this.p1.point.y);this.svgNode.setAttributeNS(null,\"x2\",this.p2.point.x);this.svgNode.setAttributeNS(null,\"y2\",this.p2.point.y);};\r\nLine.prototype.registerHandles=function(){mouser.register(this.p1);mouser.register(this.p2);};\r\nLine.prototype.unregisterHandles=function(){mouser.unregister(this.p1);mouser.unregister(this.p2);};\r\nLine.prototype.selectHandles=function(select){this.p1.select(select);this.p2.select(select);};\r\nLine.prototype.showHandles=function(state){this.p1.show(state);this.p2.show(state);};\r\nLine.prototype.cut=function(t){var cutPoint=this.p1.point.lerp(this.p2.point,t);var newLine=this.svgNode.cloneNode(true);this.p2.point.setFromPoint(cutPoint);this.p2.update();if(this.svgNode.nextSibling!=null)this.svgNode.parentNode.insertBefore(newLine,this.svgNode.nextSibling);else this.svgNode.parentNode.appendChild(newLine);var line=new Line(newLine);line.realize();line.p1.point.setFromPoint(cutPoint);line.p1.update();};\r\nLine.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Line\",[this.p1.point,this.p2.point]);};\r\nfunction Token(type,text){if(arguments.length>0){this.init(type,text);}}\r\nToken.prototype.init=function(type,text){this.type=type;this.text=text;};\r\nToken.prototype.typeis=function(type){return this.type==type;}\r\nPath.prototype=new Shape();\r\nPath.prototype.constructor=Path;\r\nPath.superclass=Shape.prototype;\r\nPath.COMMAND=0;\r\nPath.NUMBER=1;\r\nPath.EOD=2;\r\nPath.PARAMS={A:[\"rx\",\"ry\",\"x-axis-rotation\",\"large-arc-flag\",\"sweep-flag\",\"x\",\"y\"],a:[\"rx\",\"ry\",\"x-axis-rotation\",\"large-arc-flag\",\"sweep-flag\",\"x\",\"y\"],C:[\"x1\",\"y1\",\"x2\",\"y2\",\"x\",\"y\"],c:[\"x1\",\"y1\",\"x2\",\"y2\",\"x\",\"y\"],H:[\"x\"],h:[\"x\"],L:[\"x\",\"y\"],l:[\"x\",\"y\"],M:[\"x\",\"y\"],m:[\"x\",\"y\"],Q:[\"x1\",\"y1\",\"x\",\"y\"],q:[\"x1\",\"y1\",\"x\",\"y\"],S:[\"x2\",\"y2\",\"x\",\"y\"],s:[\"x2\",\"y2\",\"x\",\"y\"],T:[\"x\",\"y\"],t:[\"x\",\"y\"],V:[\"y\"],v:[\"y\"],Z:[],z:[]};\r\nfunction Path(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nPath.prototype.init=function(svgNode){if(svgNode==null||svgNode.localName!=\"path\")throw new Error(\"Path.init: Invalid localName: \"+svgNode.localName);Path.superclass.init.call(this,svgNode);this.segments=null;this.parseData(svgNode.getAttributeNS(null,\"d\"));};\r\nPath.prototype.realize=function(){for(var i=0;i<this.segments.length;i++){this.segments[i].realize();}this.svgNode.addEventListener(\"mousedown\",this,false);};\r\nPath.prototype.unrealize=function(){for(var i=0;i<this.segments.length;i++){this.segments[i].unrealize();}this.svgNode.removeEventListener(\"mousedown\",this,false);};\r\nPath.prototype.refresh=function(){var d=new Array();for(var i=0;i<this.segments.length;i++){d.push(this.segments[i].toString());}this.svgNode.setAttributeNS(null,\"d\",d.join(\" \"));};\r\nPath.prototype.registerHandles=function(){for(var i=0;i<this.segments.length;i++){this.segments[i].registerHandles();}};\r\nPath.prototype.unregisterHandles=function(){for(var i=0;i<this.segments.length;i++){this.segments[i].unregisterHandles();}};\r\nPath.prototype.selectHandles=function(select){for(var i=0;i<this.segments.length;i++){this.segments[i].selectHandles(select);}};\r\nPath.prototype.showHandles=function(state){for(var i=0;i<this.segments.length;i++){this.segments[i].showHandles(state);}};\r\nPath.prototype.appendPathSegment=function(segment){segment.previous=this.segments[this.segments.length-1];this.segments.push(segment);};\r\nPath.prototype.parseData=function(d){var tokens=this.tokenize(d);var index=0;var token=tokens[index];var mode=\"BOD\";this.segments=new Array();while(!token.typeis(Path.EOD)){var param_length;var params=new Array();if(mode==\"BOD\"){if(token.text==\"M\"||token.text==\"m\"){index++;param_length=Path.PARAMS[token.text].length;mode=token.text;}else{throw new Error(\"Path data must begin with a moveto command\");}}else{if(token.typeis(Path.NUMBER)){param_length=Path.PARAMS[mode].length;}else{index++;param_length=Path.PARAMS[token.text].length;mode=token.text;}}if((index+param_length)<tokens.length){for(var i=index;i<index+param_length;i++){var number=tokens[i];if(number.typeis(Path.NUMBER))params[params.length]=number.text;else throw new Error(\"Parameter type is not a number: \"+mode+\",\"+number.text);}var segment;var length=this.segments.length;var previous=(length==0)?null:this.segments[length-1];switch(mode){case\"A\":segment=new AbsoluteArcPath(params,this,previous);break;case\"C\":segment=new AbsoluteCurveto3(params,this,previous);break;case\"c\":segment=new RelativeCurveto3(params,this,previous);break;case\"H\":segment=new AbsoluteHLineto(params,this,previous);break;case\"L\":segment=new AbsoluteLineto(params,this,previous);break;case\"l\":segment=new RelativeLineto(params,this,previous);break;case\"M\":segment=new AbsoluteMoveto(params,this,previous);break;case\"m\":segment=new RelativeMoveto(params,this,previous);break;case\"Q\":segment=new AbsoluteCurveto2(params,this,previous);break;case\"q\":segment=new RelativeCurveto2(params,this,previous);break;case\"S\":segment=new AbsoluteSmoothCurveto3(params,this,previous);break;case\"s\":segment=new RelativeSmoothCurveto3(params,this,previous);break;case\"T\":segment=new AbsoluteSmoothCurveto2(params,this,previous);break;case\"t\":segment=new RelativeSmoothCurveto2(params,this,previous);break;case\"Z\":segment=new RelativeClosePath(params,this,previous);break;case\"z\":segment=new RelativeClosePath(params,this,previous);break;default:throw new Error(\"Unsupported segment type: \"+mode);};this.segments.push(segment);index+=param_length;token=tokens[index];if(mode==\"M\")mode=\"L\";if(mode==\"m\")mode=\"l\";}else{throw new Error(\"Path data ended before all parameters were found\");}}}\r\nPath.prototype.tokenize=function(d){var tokens=new Array();while(d!=\"\"){if(d.match(/^([ \\t\\r\\n,]+)/)){d=d.substr(RegExp.$1.length);}else if(d.match(/^([aAcChHlLmMqQsStTvVzZ])/)){tokens[tokens.length]=new Token(Path.COMMAND,RegExp.$1);d=d.substr(RegExp.$1.length);}else if(d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)){tokens[tokens.length]=new Token(Path.NUMBER,parseFloat(RegExp.$1));d=d.substr(RegExp.$1.length);}else{throw new Error(\"Unrecognized segment command: \"+d);}}tokens[tokens.length]=new Token(Path.EOD,null);return tokens;}\r\nPath.prototype.intersectShape=function(shape){var result=new Intersection(\"No Intersection\");for(var i=0;i<this.segments.length;i++){var inter=Intersection.intersectShapes(this.segments[i],shape);result.appendPoints(inter.points);}if(result.points.length>0)result.status=\"Intersection\";return result;};\r\nPath.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Path\",[]);};\r\nfunction AbsolutePathSegment(command,params,owner,previous){if(arguments.length>0)this.init(command,params,owner,previous);};\r\nAbsolutePathSegment.prototype.init=function(command,params,owner,previous){this.command=command;this.owner=owner;this.previous=previous;this.handles=new Array();var index=0;while(index<params.length){var handle=new Handle(params[index],params[index+1],owner);this.handles.push(handle);index+=2;}};\r\nAbsolutePathSegment.prototype.realize=function(){for(var i=0;i<this.handles.length;i++){var handle=this.handles[i];handle.realize();handle.show(false);}};\r\nAbsolutePathSegment.prototype.unrealize=function(){for(var i=0;i<this.handles.length;i++){this.handles[i].unrealize();}};\r\nAbsolutePathSegment.prototype.registerHandles=function(){for(var i=0;i<this.handles.length;i++){mouser.register(this.handles[i]);}};\r\nAbsolutePathSegment.prototype.unregisterHandles=function(){for(var i=0;i<this.handles.length;i++){mouser.unregister(this.handles[i]);}};\r\nAbsolutePathSegment.prototype.selectHandles=function(select){for(var i=0;i<this.handles.length;i++){this.handles[i].select(select);}};\r\nAbsolutePathSegment.prototype.showHandles=function(state){for(var i=0;i<this.handles.length;i++){this.handles[i].show(state);}};\r\nAbsolutePathSegment.prototype.toString=function(){var points=new Array();var command=\"\";if(this.previous==null||this.previous.constructor!=this.constuctor)command=this.command;for(var i=0;i<this.handles.length;i++){points.push(this.handles[i].point.toString());}return command+points.join(\" \");};\r\nAbsolutePathSegment.prototype.getLastPoint=function(){return this.handles[this.handles.length-1].point;};\r\nAbsolutePathSegment.prototype.getIntersectionParams=function(){return null;};\r\nAbsoluteArcPath.prototype=new AbsolutePathSegment();\r\nAbsoluteArcPath.prototype.constructor=AbsoluteArcPath;\r\nAbsoluteArcPath.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteArcPath(params,owner,previous){if(arguments.length>0){this.init(\"A\",params,owner,previous);}}\r\nAbsoluteArcPath.prototype.init=function(command,params,owner,previous){var point=new Array();var y=params.pop();var x=params.pop();point.push(x,y);AbsoluteArcPath.superclass.init.call(this,command,point,owner,previous);this.rx=parseFloat(params.shift());this.ry=parseFloat(params.shift());this.angle=parseFloat(params.shift());this.arcFlag=parseFloat(params.shift());this.sweepFlag=parseFloat(params.shift());};\r\nAbsoluteArcPath.prototype.toString=function(){var points=new Array();var command=\"\";if(this.previous.constructor!=this.constuctor)command=this.command;return command+[this.rx,this.ry,this.angle,this.arcFlag,this.sweepFlag,this.handles[0].point.toString()].join(\",\");};\r\nAbsoluteArcPath.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Ellipse\",[this.getCenter(),this.rx,this.ry]);};\r\nAbsoluteArcPath.prototype.getCenter=function(){var startPoint=this.previous.getLastPoint();var endPoint=this.handles[0].point;var rx=this.rx;var ry=this.ry;var angle=this.angle*Math.PI/180;var c=Math.cos(angle);var s=Math.sin(angle);var TOLERANCE=1e-6;var halfDiff=startPoint.subtract(endPoint).divide(2);var x1p=halfDiff.x*c+halfDiff.y*s;var y1p=halfDiff.x*-s+halfDiff.y*c;var x1px1p=x1p*x1p;var y1py1p=y1p*y1p;var lambda=(x1px1p/ (rx*rx) ) + ( y1py1p /(ry*ry));if(lambda>1){var factor=Math.sqrt(lambda);rx*=factor;ry*=factor;}var rxrx=rx*rx;var ryry=ry*ry;var rxy1=rxrx*y1py1p;var ryx1=ryry*x1px1p;var factor=(rxrx*ryry-rxy1-ryx1)/(rxy1+ryx1);if(Math.abs(factor)<TOLERANCE)factor=0;var sq=Math.sqrt(factor);if(this.arcFlag==this.sweepFlag)sq=-sq;var mid=startPoint.add(endPoint).divide(2);var cxp=sq*rx*y1p/ry;var cyp=sq*-ry*x1p/rx;return new Point2D(cxp*c-cyp*s+mid.x,cxp*s+cyp*c+mid.y);};\r\nAbsoluteCurveto2.prototype=new AbsolutePathSegment();\r\nAbsoluteCurveto2.prototype.constructor=AbsoluteCurveto2;\r\nAbsoluteCurveto2.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteCurveto2(params,owner,previous){if(arguments.length>0){this.init(\"Q\",params,owner,previous);}}\r\nAbsoluteCurveto2.prototype.getControlPoint=function(){return this.handles[0].point;};\r\nAbsoluteCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier2\",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point]);};\r\nAbsoluteCurveto3.prototype=new AbsolutePathSegment();\r\nAbsoluteCurveto3.prototype.constructor=AbsoluteCurveto3;\r\nAbsoluteCurveto3.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteCurveto3(params,owner,previous){if(arguments.length>0){this.init(\"C\",params,owner,previous);}}\r\nAbsoluteCurveto3.prototype.getLastControlPoint=function(){return this.handles[1].point;};\r\nAbsoluteCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier3\",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point,this.handles[2].point]);};\r\nAbsoluteHLineto.prototype=new AbsolutePathSegment();\r\nAbsoluteHLineto.prototype.constructor=AbsoluteHLineto;\r\nAbsoluteHLineto.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteHLineto(params,owner,previous){if(arguments.length>0){this.init(\"H\",params,owner,previous);}}\r\nAbsoluteHLineto.prototype.init=function(command,params,owner,previous){var prevPoint=previous.getLastPoint();var point=new Array();point.push(params.pop(),prevPoint.y);AbsoluteHLineto.superclass.init.call(this,command,point,owner,previous);};\r\nAbsoluteHLineto.prototype.toString=function(){var points=new Array();var command=\"\";if(this.previous.constructor!=this.constuctor)command=this.command;return command+this.handles[0].point.x;};\r\nAbsoluteLineto.prototype=new AbsolutePathSegment();\r\nAbsoluteLineto.prototype.constructor=AbsoluteLineto;\r\nAbsoluteLineto.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteLineto(params,owner,previous){if(arguments.length>0){this.init(\"L\",params,owner,previous);}}\r\nAbsoluteLineto.prototype.toString=function(){var points=new Array();var command=\"\";if(this.previous.constructor!=this.constuctor)if(this.previous.constructor!=AbsoluteMoveto)command=this.command;return command+this.handles[0].point.toString();};\r\nAbsoluteLineto.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Line\",[this.previous.getLastPoint(),this.handles[0].point]);};\r\nAbsoluteMoveto.prototype=new AbsolutePathSegment();\r\nAbsoluteMoveto.prototype.constructor=AbsoluteMoveto;\r\nAbsoluteMoveto.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteMoveto(params,owner,previous){if(arguments.length>0){this.init(\"M\",params,owner,previous);}}\r\nAbsoluteMoveto.prototype.toString=function(){return\"M\"+this.handles[0].point.toString();};\r\nAbsoluteSmoothCurveto2.prototype=new AbsolutePathSegment();\r\nAbsoluteSmoothCurveto2.prototype.constructor=AbsoluteSmoothCurveto2;\r\nAbsoluteSmoothCurveto2.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteSmoothCurveto2(params,owner,previous){if(arguments.length>0){this.init(\"T\",params,owner,previous);}}\r\nAbsoluteSmoothCurveto2.prototype.getControlPoint=function(){var lastPoint=this.previous.getLastPoint();var point;if(this.previous.command.match(/^[QqTt]$/)){var ctrlPoint=this.previous.getControlPoint();var diff=ctrlPoint.subtract(lastPoint);point=lastPoint.subtract(diff);}else{point=lastPoint;}return point;};\r\nAbsoluteSmoothCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier2\",[this.previous.getLastPoint(),this.getControlPoint(),this.handles[0].point]);};\r\nAbsoluteSmoothCurveto3.prototype=new AbsolutePathSegment();\r\nAbsoluteSmoothCurveto3.prototype.constructor=AbsoluteSmoothCurveto3;\r\nAbsoluteSmoothCurveto3.superclass=AbsolutePathSegment.prototype;\r\nfunction AbsoluteSmoothCurveto3(params,owner,previous){if(arguments.length>0){this.init(\"S\",params,owner,previous);}}\r\nAbsoluteSmoothCurveto3.prototype.getFirstControlPoint=function(){var lastPoint=this.previous.getLastPoint();var point;if(this.previous.command.match(/^[SsCc]$/)){var lastControl=this.previous.getLastControlPoint();var diff=lastControl.subtract(lastPoint);point=lastPoint.subtract(diff);}else{point=lastPoint;}return point;};\r\nAbsoluteSmoothCurveto3.prototype.getLastControlPoint=function(){return this.handles[0].point;};\r\nAbsoluteSmoothCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier3\",[this.previous.getLastPoint(),this.getFirstControlPoint(),this.handles[0].point,this.handles[1].point]);};\r\nRelativePathSegment.prototype=new AbsolutePathSegment();\r\nRelativePathSegment.prototype.constructor=RelativePathSegment;\r\nRelativePathSegment.superclass=AbsolutePathSegment.prototype;\r\nfunction RelativePathSegment(command,params,owner,previous){if(arguments.length>0)this.init(command,params,owner,previous);}\r\nRelativePathSegment.prototype.init=function(command,params,owner,previous){this.command=command;this.owner=owner;this.previous=previous;this.handles=new Array();var lastPoint;if(this.previous)lastPoint=this.previous.getLastPoint();else lastPoint=new Point2D(0,0);var index=0;while(index<params.length){var handle=new Handle(lastPoint.x+params[index],lastPoint.y+params[index+1],owner);this.handles.push(handle);index+=2;}};\r\nRelativePathSegment.prototype.toString=function(){var points=new Array();var command=\"\";var lastPoint;if(this.previous)lastPoint=this.previous.getLastPoint();else lastPoint=new Point2D(0,0);if(this.previous==null||this.previous.constructor!=this.constructor)command=this.command;for(var i=0;i<this.handles.length;i++){var point=this.handles[i].point.subtract(lastPoint);points.push(point.toString());}return command+points.join(\" \");};\r\nRelativeClosePath.prototype=new RelativePathSegment();\r\nRelativeClosePath.prototype.constructor=RelativeClosePath;\r\nRelativeClosePath.superclass=RelativePathSegment.prototype;\r\nfunction RelativeClosePath(params,owner,previous){if(arguments.length>0){this.init(\"z\",params,owner,previous);}}\r\nRelativeClosePath.prototype.getLastPoint=function(){var current=this.previous;var point;while(current){if(current.command.match(/^[mMzZ]$/)){point=current.getLastPoint();break;}current=current.previous;}return point;};\r\nRelativeClosePath.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Line\",[this.previous.getLastPoint(),this.getLastPoint()]);};\r\nRelativeCurveto2.prototype=new RelativePathSegment();\r\nRelativeCurveto2.prototype.constructor=RelativeCurveto2;\r\nRelativeCurveto2.superclass=RelativePathSegment.prototype;\r\nfunction RelativeCurveto2(params,owner,previous){if(arguments.length>0){this.init(\"q\",params,owner,previous);}}\r\nRelativeCurveto2.prototype.getControlPoint=function(){return this.handles[0].point;};\r\nRelativeCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier2\",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point]);};\r\nRelativeCurveto3.prototype=new RelativePathSegment();\r\nRelativeCurveto3.prototype.constructor=RelativeCurveto3;\r\nRelativeCurveto3.superclass=RelativePathSegment.prototype;\r\nfunction RelativeCurveto3(params,owner,previous){if(arguments.length>0){this.init(\"c\",params,owner,previous);}}\r\nRelativeCurveto3.prototype.getLastControlPoint=function(){return this.handles[1].point;};\r\nRelativeCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier3\",[this.previous.getLastPoint(),this.handles[0].point,this.handles[1].point,this.handles[2].point]);};\r\nRelativeLineto.prototype=new RelativePathSegment();\r\nRelativeLineto.prototype.constructor=RelativeLineto;\r\nRelativeLineto.superclass=RelativePathSegment.prototype;\r\nfunction RelativeLineto(params,owner,previous){if(arguments.length>0){this.init(\"l\",params,owner,previous);}}\r\nRelativeLineto.prototype.toString=function(){var points=new Array();var command=\"\";var lastPoint;var point;if(this.previous)lastPoint=this.previous.getLastPoint();else lastPoint=new Point(0,0);point=this.handles[0].point.subtract(lastPoint);if(this.previous.constructor!=this.constuctor)if(this.previous.constructor!=RelativeMoveto)cmd=this.command;return cmd+point.toString();};\r\nRelativeLineto.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Line\",[this.previous.getLastPoint(),this.handles[0].point]);};\r\nRelativeMoveto.prototype=new RelativePathSegment();\r\nRelativeMoveto.prototype.constructor=RelativeMoveto;\r\nRelativeMoveto.superclass=RelativePathSegment.prototype;\r\nfunction RelativeMoveto(params,owner,previous){if(arguments.length>0){this.init(\"m\",params,owner,previous);}}\r\nRelativeMoveto.prototype.toString=function(){return\"m\"+this.handles[0].point.toString();};\r\nRelativeSmoothCurveto2.prototype=new RelativePathSegment();\r\nRelativeSmoothCurveto2.prototype.constructor=RelativeSmoothCurveto2;\r\nRelativeSmoothCurveto2.superclass=RelativePathSegment.prototype;\r\nfunction RelativeSmoothCurveto2(params,owner,previous){if(arguments.length>0){this.init(\"t\",params,owner,previous);}}\r\nRelativeSmoothCurveto2.prototype.getControlPoint=function(){var lastPoint=this.previous.getLastPoint();var point;if(this.previous.command.match(/^[QqTt]$/)){var ctrlPoint=this.previous.getControlPoint();var diff=ctrlPoint.subtract(lastPoint);point=lastPoint.subtract(diff);}else{point=lastPoint;}return point;};\r\nRelativeSmoothCurveto2.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier2\",[this.previous.getLastPoint(),this.getControlPoint(),this.handles[0].point]);};\r\nRelativeSmoothCurveto3.prototype=new RelativePathSegment();\r\nRelativeSmoothCurveto3.prototype.constructor=RelativeSmoothCurveto3;\r\nRelativeSmoothCurveto3.superclass=RelativePathSegment.prototype;\r\nfunction RelativeSmoothCurveto3(params,owner,previous){if(arguments.length>0){this.init(\"s\",params,owner,previous);}}\r\nRelativeSmoothCurveto3.prototype.getFirstControlPoint=function(){var lastPoint=this.previous.getLastPoint();var point;if(this.previous.command.match(/^[SsCc]$/)){var lastControl=this.previous.getLastControlPoint();var diff=lastControl.subtract(lastPoint);point=lastPoint.subtract(diff);}else{point=lastPoint;}return point;};\r\nRelativeSmoothCurveto3.prototype.getLastControlPoint=function(){return this.handles[0].point;};\r\nRelativeSmoothCurveto3.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Bezier3\",[this.previous.getLastPoint(),this.getFirstControlPoint(),this.handles[0].point,this.handles[1].point]);};\r\nPolygon.prototype=new Shape();\r\nPolygon.prototype.constructor=Polygon;\r\nPolygon.superclass=Shape.prototype;\r\nfunction Polygon(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nPolygon.prototype.init=function(svgNode){if(svgNode.localName==\"polygon\"){Polygon.superclass.init.call(this,svgNode);var points=svgNode.getAttributeNS(null,\"points\").split(/[\\s,]+/);this.handles=new Array();for(var i=0;i<points.length;i+=2){var x=parseFloat(points[i]);var y=parseFloat(points[i+1]);this.handles.push(new Handle(x,y,this));}}else{throw new Error(\"Polygon.init: Invalid SVG Node: \"+svgNode.localName);}};\r\nPolygon.prototype.realize=function(){if(this.svgNode!=null){for(var i=0;i<this.handles.length;i++){this.handles[i].realize();this.handles[i].show(false);}this.svgNode.addEventListener(\"mousedown\",this,false);}};\r\nPolygon.prototype.refresh=function(){var points=new Array();for(var i=0;i<this.handles.length;i++){points.push(this.handles[i].point.toString());}this.svgNode.setAttributeNS(null,\"points\",points.join(\" \"));};\r\nPolygon.prototype.registerHandles=function(){for(var i=0;i<this.handles.length;i++)mouser.register(this.handles[i]);};\r\nPolygon.prototype.unregisterHandles=function(){for(var i=0;i<this.handles.length;i++)mouser.unregister(this.handles[i]);};\r\nPolygon.prototype.selectHandles=function(select){for(var i=0;i<this.handles.length;i++)this.handles[i].select(select);};\r\nPolygon.prototype.showHandles=function(state){for(var i=0;i<this.handles.length;i++)this.handles[i].show(state);};\r\nPolygon.prototype.pointInPolygon=function(point){var length=this.handles.length;var counter=0;var x_inter;var p1=this.handles[0].point;for(var i=1;i<=length;i++){var p2=this.handles[i%length].point;if(point.y>Math.min(p1.y,p2.y)){if(point.y<=Math.max(p1.y,p2.y)){if(point.x<=Math.max(p1.x,p2.x)){if(p1.y!=p2.y){x_inter=(point.y-p1.y)*(p2.x-p1.x)/(p2.y-p1.y)+p1.x;if(p1.x==p2.x||point.x<=x_inter){counter++;}}}}}p1=p2;}return(counter%2==1);};\r\nPolygon.prototype.getIntersectionParams=function(){var points=new Array();for(var i=0;i<this.handles.length;i++){points.push(this.handles[i].point);}return new IntersectionParams(\"Polygon\",[points]);};\r\nPolygon.prototype.getArea=function(){var area=0;var length=this.handles.length;var neg=0;var pos=0;for(var i=0;i<length;i++){var h1=this.handles[i].point;var h2=this.handles[(i+1)%length].point;area+=(h1.x*h2.y-h2.x*h1.y);}return area/2;};\r\nPolygon.prototype.getCentroid=function(){var length=this.handles.length;var area6x=6*this.getArea();var x_sum=0;var y_sum=0;for(var i=0;i<length;i++){var p1=this.handles[i].point;var p2=this.handles[(i+1)%length].point;var cross=(p1.x*p2.y-p2.x*p1.y);x_sum+=(p1.x+p2.x)*cross;y_sum+=(p1.y+p2.y)*cross;}return new Point2D(x_sum/ area6x, y_sum /area6x);};\r\nPolygon.prototype.isClockwise=function(){return this.getArea()<0;};\r\nPolygon.prototype.isCounterClockwise=function(){return this.getArea()>0;};\r\nPolygon.prototype.isConcave=function(){var positive=0;var negative=0;var length=this.handles.length;for(var i=0;i<length;i++){var p0=this.handles[i].point;var p1=this.handles[(i+1)%length].point;var p2=this.handles[(i+2)%length].point;var v0=Vector2D.fromPoints(p0,p1);var v1=Vector2D.fromPoints(p1,p2);var cross=v0.cross(v1);if(cross<0){negative++;}else{positive++;}}return(negative!=0&&positive!=0);};\r\nPolygon.prototype.isConvex=function(){return!this.isConcave();};\r\nRectangle.prototype=new Shape();\r\nRectangle.prototype.constructor=Rectangle;\r\nRectangle.superclass=Shape.prototype;\r\nfunction Rectangle(svgNode){if(arguments.length>0){this.init(svgNode);}}\r\nRectangle.prototype.init=function(svgNode){if(svgNode.localName==\"rect\"){Rectangle.superclass.init.call(this,svgNode);var x=parseFloat(svgNode.getAttributeNS(null,\"x\"));var y=parseFloat(svgNode.getAttributeNS(null,\"y\"));var width=parseFloat(svgNode.getAttributeNS(null,\"width\"));var height=parseFloat(svgNode.getAttributeNS(null,\"height\"));this.p1=new Handle(x,y,this);this.p2=new Handle(x+width,y+height,this);}else{throw new Error(\"Rectangle.init: Invalid SVG Node: \"+svgNode.localName);}};\r\nRectangle.prototype.realize=function(){if(this.svgNode!=null){this.p1.realize();this.p2.realize();this.p1.show(false);this.p2.show(false);this.svgNode.addEventListener(\"mousedown\",this,false);}};\r\nRectangle.prototype.refresh=function(){var min=this.p1.point.min(this.p2.point);var max=this.p1.point.max(this.p2.point);this.svgNode.setAttributeNS(null,\"x\",min.x);this.svgNode.setAttributeNS(null,\"y\",min.y);this.svgNode.setAttributeNS(null,\"width\",max.x-min.x);this.svgNode.setAttributeNS(null,\"height\",max.y-min.y);};\r\nRectangle.prototype.registerHandles=function(){mouser.register(this.p1);mouser.register(this.p2);};\r\nRectangle.prototype.unregisterHandles=function(){mouser.unregister(this.p1);mouser.unregister(this.p2);};\r\nRectangle.prototype.selectHandles=function(select){this.p1.select(select);this.p2.select(select);};\r\nRectangle.prototype.showHandles=function(state){this.p1.show(state);this.p2.show(state);};\r\nRectangle.prototype.getIntersectionParams=function(){return new IntersectionParams(\"Rectangle\",[this.p1.point,this.p2.point]);};","FHgame/game1/lib/kevlindev/Path.js":"/*****\r\n*\r\n*   Path.js\r\n*\r\n*   copyright 2002, Kevin Lindsey\r\n*   Modified 2011 by Ben Mather\r\n*****/\r\n\r\n/*****\r\n*\r\n*   Setup inheritance\r\n*\r\n*****/\r\nPath.prototype             = new Shape();\r\nPath.prototype.constructor = Path;\r\nPath.superclass            = Shape.prototype;\r\n\r\n\r\n/*****\r\n*\r\n*   Class constants\r\n*\r\n*****/\r\nPath.COMMAND = 0;\r\nPath.NUMBER  = 1;\r\nPath.EOD     = 2;\r\n\r\nPath.PARAMS = {\r\n    A: [ \"rx\", \"ry\", \"x-axis-rotation\", \"large-arc-flag\", \"sweep-flag\", \"x\", \"y\" ],\r\n    a: [ \"rx\", \"ry\", \"x-axis-rotation\", \"large-arc-flag\", \"sweep-flag\", \"x\", \"y\" ],\r\n    C: [ \"x1\", \"y1\", \"x2\", \"y2\", \"x\", \"y\" ],\r\n    c: [ \"x1\", \"y1\", \"x2\", \"y2\", \"x\", \"y\" ],\r\n    H: [ \"x\" ],\r\n    h: [ \"x\" ],\r\n    L: [ \"x\", \"y\" ],\r\n    l: [ \"x\", \"y\" ],\r\n    M: [ \"x\", \"y\" ],\r\n    m: [ \"x\", \"y\" ],\r\n    Q: [ \"x1\", \"y1\", \"x\", \"y\" ],\r\n    q: [ \"x1\", \"y1\", \"x\", \"y\" ],\r\n    S: [ \"x2\", \"y2\", \"x\", \"y\" ],\r\n    s: [ \"x2\", \"y2\", \"x\", \"y\" ],\r\n    T: [ \"x\", \"y\" ],\r\n    t: [ \"x\", \"y\" ],\r\n    V: [ \"y\" ],\r\n    v: [ \"y\" ],\r\n    Z: [],\r\n    z: []\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   constructor\r\n*\r\n*****/\r\nfunction Path(svgNode) {\r\n    if ( arguments.length > 0 ) {\r\n        this.init(svgNode);\r\n    }\r\n}\r\n\r\n\r\n/*****\r\n*\r\n*   init\r\n*\r\n*****/\r\nPath.prototype.init = function(svgNode) {\r\n    if ( svgNode == null || svgNode.localName != \"path\" )\r\n        throw new Error(\"Path.init: Invalid localName: \" + svgNode.localName);\r\n    \r\n    // Call superclass method\r\n    Path.superclass.init.call(this, svgNode);\r\n    \r\n    // Convert path data to segments\r\n    this.segments = null;\r\n    this.parseData( svgNode.getAttributeNS(null, \"d\") );\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   realize\r\n*\r\n*****/\r\nPath.prototype.realize = function() {\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        this.segments[i].realize();\r\n    }\r\n\r\n    this.svgNode.addEventListener(\"mousedown\", this, false);\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   unrealize\r\n*\r\n*****/\r\nPath.prototype.unrealize = function() {\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        this.segments[i].unrealize();\r\n    }\r\n\r\n    this.svgNode.removeEventListener(\"mousedown\", this, false);\r\n};\r\n\r\n\r\n\r\n/*****\r\n*\r\n*   refresh\r\n*\r\n*****/\r\nPath.prototype.refresh = function() {\r\n    var d = new Array();\r\n\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        d.push( this.segments[i].toString() );\r\n    }\r\n\r\n    this.svgNode.setAttributeNS(null, \"d\", d.join(\" \"));\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   registerHandles\r\n*\r\n*****/\r\nPath.prototype.registerHandles = function() {\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        this.segments[i].registerHandles();\r\n    }\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   unregisterHandles\r\n*\r\n*****/\r\nPath.prototype.unregisterHandles = function() {\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        this.segments[i].unregisterHandles();\r\n    }\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   selectHandles\r\n*\r\n*****/\r\nPath.prototype.selectHandles = function(select) {\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        this.segments[i].selectHandles(select);\r\n    }\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   showHandles\r\n*\r\n*****/\r\nPath.prototype.showHandles = function(state) {\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        this.segments[i].showHandles(state);\r\n    }\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   appendPathSegment\r\n*\r\n*****/\r\nPath.prototype.appendPathSegment = function(segment) {\r\n    segment.previous = this.segments[this.segments.length-1];\r\n\r\n    this.segments.push(segment);\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   parseData\r\n*\r\n*****/\r\n/* XXX BM. This function has been heavilly hacked to get elliptical arcs working XXX */\r\n\r\nPath.prototype.parseData = function(d) {\r\n    // convert path data to token array\r\n    var tokens = this.tokenize(d);\r\n\r\n    // point to first token in array\r\n    var index = 0;\r\n\r\n    // get the current token\r\n    var token = tokens[index];\r\n\r\n    // set mode to signify new path\r\n    var mode = \"BOD\";\r\n\r\n    // init segment array\r\n    // NOTE: should destroy previous segment handles here\r\n    this.segments = new Array();\r\n\r\n    // Process all tokens\r\n    while ( !token.typeis(Path.EOD) ) {\r\n        var param_length;\r\n        var params = new Array();\r\n\r\n        if ( mode == \"BOD\" ) {\r\n            // Start of new path.  Must be a moveto command\r\n            if ( token.text == \"M\" || token.text == \"m\" ) {\r\n                // Advance past command token\r\n                index++;\r\n\r\n                // Get count of numbers that must follow this command\r\n                param_length = Path.PARAMS[token.text].length;\r\n\r\n                // Set new parsing mode\r\n                mode = token.text;\r\n            } else {\r\n                // Oops.  New path didn't start with a moveto command\r\n                throw new Error(\"Path data must begin with a moveto command\");\r\n            }\r\n        } else {\r\n            // Currently in a path definition\r\n            if ( token.typeis(Path.NUMBER) ) {\r\n                // Many commands allow you to keep repeating parameters\r\n                // without specifying the command again.  This handles\r\n                // that case.\r\n                param_length = Path.PARAMS[mode].length;\r\n            } else {\r\n                // Advance past command token\r\n                index++; \r\n\r\n                // Get count of numbers that must follow this command\r\n                param_length = Path.PARAMS[token.text].length;\r\n\r\n                // Set new parsing mode\r\n                mode = token.text;\r\n            }\r\n        }\r\n        \r\n        // Make sure we have enough tokens left to satisfy the number\r\n        // of parameters we need for the last command\r\n        if ( (index + param_length) < tokens.length ) {\r\n            // Get each parameter\r\n            for (var i = index; i < index + param_length; i++) {\r\n                var number = tokens[i];\r\n                \r\n                // Make sure each parameter is a number.\r\n                if ( number.typeis(Path.NUMBER) )\r\n                    params[params.length] = number.text;\r\n                else\r\n                    throw new Error(\"Parameter type is not a number: \" + mode + \",\" + number.text);\r\n            }\r\n            \r\n            // NOTE: Should create add an appendPathSegment (careful, that\r\n            // effects RelativePathSegments\r\n            var segment;\r\n            var length   = this.segments.length;\r\n            var previous = ( length == 0 ) ? null : this.segments[length-1];\r\n            switch (mode) {\r\n                case \"A\":\r\n                    var startPoint = previous.getLastPoint();\r\n                    var x1 = startPoint.x;\r\n                    var y1 = startPoint.y;\r\n                    var bezier_param_list = arcToCurve.apply(this,[x1,y1].concat(params));\r\n                    for (var i=0; i<bezier_param_list.length/6; i++) {\r\n                        var bezier_params = new Array();\r\n                        for (var j=0; j<6; j++) {\r\n                            bezier_params.push(bezier_param_list.shift());\r\n                        }\r\n                        this.segments.push(new AbsoluteCurveto3(bezier_params, this, previous));\r\n                        previous = this.segments[length-1];\r\n                    }\r\n                    break;\r\n\r\n                case \"C\": this.segments.push(new AbsoluteCurveto3(       params, this, previous )); break;\r\n                case \"c\": this.segments.push(new RelativeCurveto3(       params, this, previous )); break;\r\n                case \"H\": this.segments.push(new AbsoluteHLineto(        params, this, previous )); break;\r\n                case \"L\": this.segments.push(new AbsoluteLineto(         params, this, previous )); break;\r\n                case \"l\": this.segments.push(new RelativeLineto(         params, this, previous )); break;\r\n                case \"M\": this.segments.push(new AbsoluteMoveto(         params, this, previous )); break;\r\n                case \"m\": this.segments.push(new RelativeMoveto(         params, this, previous )); break;\r\n                case \"Q\": this.segments.push(new AbsoluteCurveto2(       params, this, previous )); break;\r\n                case \"q\": this.segments.push(new RelativeCurveto2(       params, this, previous )); break;\r\n                case \"S\": this.segments.push(new AbsoluteSmoothCurveto3( params, this, previous )); break;\r\n                case \"s\": this.segments.push(new RelativeSmoothCurveto3( params, this, previous )); break;\r\n                case \"T\": this.segments.push(new AbsoluteSmoothCurveto2( params, this, previous )); break;\r\n                case \"t\": this.segments.push(new RelativeSmoothCurveto2( params, this, previous )); break;\r\n                case \"Z\": this.segments.push(new RelativeClosePath(      params, this, previous )); break;\r\n                case \"z\": this.segments.push(new RelativeClosePath(      params, this, previous )); break;\r\n                default:\r\n                    throw new Error(\"Unsupported segment type: \" + mode);\r\n            };\r\n\r\n            // advance to the next unused token\r\n            index += param_length;\r\n\r\n            // get current token\r\n            token = tokens[index];\r\n\r\n            // Lineto's follow moveto when no command follows moveto params\r\n            if ( mode == \"M\" ) mode = \"L\";\r\n            if ( mode == \"m\" ) mode = \"l\";\r\n        } else {\r\n            throw new Error(\"Path data ended before all parameters were found\");\r\n        }\r\n    }\r\n}\r\n\r\n\r\n/*****\r\n*\r\n*   tokenize\r\n*\r\n*   Need to add support for scientific notation\r\n*\r\n*****/\r\nPath.prototype.tokenize = function(d) {\r\n    var tokens = new Array();\r\n\r\n    while ( d != \"\" ) {\r\n        if ( d.match(/^([ \\t\\r\\n,]+)/) )\r\n        {\r\n            d = d.substr(RegExp.$1.length);\r\n        }\r\n        else if ( d.match(/^([aAcChHlLmMqQsStTvVzZ])/) )\r\n        {\r\n            tokens[tokens.length] = new Token(Path.COMMAND, RegExp.$1);\r\n            d = d.substr(RegExp.$1.length);\r\n        }\r\n        else if ( d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/) )\r\n        {\r\n            tokens[tokens.length] = new Token(Path.NUMBER, parseFloat(RegExp.$1));\r\n            d = d.substr(RegExp.$1.length);\r\n        }\r\n        else\r\n        {\r\n            throw new Error(\"Unrecognized segment command: \" + d);\r\n            //d = \"\";\r\n        }\r\n    }\r\n\r\n    tokens[tokens.length] = new Token(Path.EOD, null);\r\n\r\n    return tokens;\r\n}\r\n\r\n\r\n/*****\r\n*\r\n*   intersection methods\r\n*\r\n*****/\r\n\r\n/*****\r\n*\r\n*   intersectShape\r\n*\r\n*****/\r\nPath.prototype.intersectShape = function(shape) {\r\n    var result = new Intersection(\"No Intersection\");\r\n\r\n    for ( var i = 0; i < this.segments.length; i++ ) {\r\n        var inter = Intersection.intersectShapes(this.segments[i],shape);\r\n\r\n        result.appendPoints(inter.points);\r\n    }\r\n\r\n    if ( result.points.length > 0 ) result.status = \"Intersection\";\r\n\r\n    return result;\r\n};\r\n\r\n\r\n/*****\r\n*\r\n*   get/set methods\r\n*\r\n*****/\r\n\r\n/*****\r\n*\r\n*   getIntersectionParams\r\n*\r\n*****/\r\nPath.prototype.getIntersectionParams = function() {\r\n    return new IntersectionParams(\r\n        \"Path\",\r\n        []\r\n    );\r\n};\r\n\r\n\r\n\r\n\r\nfunction arcToCurve (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\r\n    // for more information of where this math came from visit:\r\n    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\r\n    var _120 = Math.PI * 120 / 180,\r\n        rad = Math.PI / 180 * (+angle || 0),\r\n        res = [],\r\n        xy,\r\n        rotate = function (x, y, rad) {\r\n            var X = x * Math.cos(rad) - y * Math.sin(rad),\r\n                Y = x * Math.sin(rad) + y * Math.cos(rad);\r\n            return {x: X, y: Y};\r\n        },\r\n        f1, f2,\r\n        cx, cy;\r\n    if (!recursive) {\r\n        xy = rotate(x1, y1, -rad);\r\n        x1 = xy.x;\r\n        y1 = xy.y;\r\n        xy = rotate(x2, y2, -rad);\r\n        x2 = xy.x;\r\n        y2 = xy.y;\r\n        var cos = Math.cos(Math.PI / 180 * angle),\r\n            sin = Math.sin(Math.PI / 180 * angle),\r\n            x = (x1 - x2) / 2,\r\n            y = (y1 - y2) / 2;\r\n        var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);\r\n        if (h > 1) {\r\n            h = Math.sqrt(h);\r\n            rx = h * rx;\r\n            ry = h * ry;\r\n        }\r\n        var rx2 = rx * rx,\r\n            ry2 = ry * ry,\r\n            k = (large_arc_flag == sweep_flag ? -1 : 1) *\r\n                Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));\r\n\r\n        cx = k * rx * y / ry + (x1 + x2) / 2;\r\n        cy = k * -ry * x / rx + (y1 + y2) / 2;\r\n\r\n        f1 = Math.asin(((y1 - cy) / ry).toFixed(9));\r\n        f2 = Math.asin(((y2 - cy) / ry).toFixed(9));\r\n        f1 = x1 < cx ? Math.PI - f1 : f1;\r\n        f2 = x2 < cx ? Math.PI - f2 : f2;\r\n//        f1 < 0 && (f1 = Math.PI * 2 + f1);\r\n        f1 = f1 < 0 ? Math.PI * 2 + f1 : f1;\r\n        f2 = f2 < 0 ? Math.PI * 2 + f2 : f2;\r\n        if (sweep_flag && f1 > f2) {\r\n            f1 = f1 - Math.PI * 2;\r\n        }\r\n        if (!sweep_flag && f2 > f1) {\r\n            f2 = f2 - Math.PI * 2;\r\n        }\r\n    } else {\r\n        f1 = recursive[0];\r\n        f2 = recursive[1];\r\n        cx = recursive[2];\r\n        cy = recursive[3];\r\n    }\r\n    var df = f2 - f1;\r\n    if (Math.abs(df) > _120) {\r\n        var f2old = f2,\r\n            x2old = x2,\r\n            y2old = y2;\r\n        f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\r\n        x2 = cx + rx * Math.cos(f2);\r\n        y2 = cy + ry * Math.sin(f2);\r\n        res = arcToCurve(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\r\n    }\r\n    df = f2 - f1;\r\n    var c1 = Math.cos(f1),\r\n        s1 = Math.sin(f1),\r\n        c2 = Math.cos(f2),\r\n        s2 = Math.sin(f2),\r\n        t = Math.tan(df / 4),\r\n        hx = 4 / 3 * rx * t,\r\n        hy = 4 / 3 * ry * t,\r\n        m1 = [x1, y1],\r\n        m2 = [x1 + hx * s1, y1 - hy * c1],\r\n        m3 = [x2 + hx * s2, y2 - hy * c2],\r\n        m4 = [x2, y2];\r\n    m2[0] = 2 * m1[0] - m2[0];\r\n    m2[1] = 2 * m1[1] - m2[1];\r\n    if (recursive) {\r\n        return [m2, m3, m4].concat(res);\r\n    } else {\r\n        res = [m2, m3, m4].concat(res).join().split(\",\");\r\n        var newres = [];\r\n        for (var i = 0, ii = res.length; i < ii; i++) {\r\n            newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\r\n        }\r\n        return newres;\r\n    }\r\n}\r\n","FHgame/game1index.html":"<a href=\"https://fenghuaworker{$rthSuffix}\">返回首页</a>\r\n<hr>\r\n仅供学习，原站http://missile-game.bwhmather.com/<br>\r\n<a href=\"https://fenghuaworker{$rthSuffix}/FHgame/game1/index.htm\">游戏1:hole</a>\r\n<hr>\r\n开源<br>\r\n<a href=\"https://fenghuaworker{$rthSuffix}/FHgame/game/game.html\">游戏2:贪吃蛇</a>\r\n<footer>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>","FHgame/game/":"","FHgame/game/game.html":"<!DOCTYPE html>\r\n<html>\r\n<head>\r\n\t<title>贪吃蛇</title>\r\n\t<meta charset=\"UTF-8\">\r\n\t<meta name=\"keywords\" content=\"贪吃蛇\">\r\n\t<meta name=\"Description\" content=\"这是一个初学者用来学习的小游戏\">\r\n\t<style type=\"text/css\">\r\n\t*{margin:0;}\r\n\t.map{margin:100px auto;\r\n\t\theight:600px;\r\n\t\twidth:900px;\r\n\t\tbackground:#00D0FF;\r\n\t\tborder:10px solid #AFAEB2;\r\n\t\tborder-radius:8px;\r\n\t}\r\n\t</style>\r\n \r\n \r\n \r\n</head>\r\n \r\n<body>\r\n<div class=\"map\">\r\n<canvas id=\"canvas\" height=\"600\" width=\"900\">\r\n\t\r\n</canvas>\r\n</div>\r\n \r\n<script type=\"text/javascript\">\r\n //获取绘制工具\r\n\t/*\r\n\tvar canvas = document.getElementById(\"canvas\");\r\n\tvar ctx = canvas.getContext(\"2d\");//获取上下文\r\n\tctx.moveTo(0,0);\r\n\tctx.lineTo(450,450);*/\r\n\tvar c=document.getElementById(\"canvas\");\r\n    var ctx=c.getContext(\"2d\");\r\n    /*ctx.beginPath();\r\n    ctx.moveTo(0,0);\r\n    ctx.lineTo(450,450);\r\n    ctx.stroke();\r\n    */\r\n \r\n    var snake =[];//定义一条蛇，画蛇的身体\r\n    var snakeCount = 6;//初始化蛇的长度\r\n\tvar foodx =0;\r\n\tvar foody =0;\r\n    var togo =0;\r\n    function drawtable()//画地图的函数\r\n    {\r\n \r\n \r\n    \tfor(var i=0;i<60;i++)//画竖线\r\n    \t{\r\n    \t\tctx.strokeStyle=\"black\";\r\n    \t\tctx.beginPath();\r\n    \t\tctx.moveTo(15*i,0);\r\n    \t\tctx.lineTo(15*i,600);\r\n    \t\tctx.closePath();\r\n    \t\tctx.stroke();\r\n    \t}\r\n        for(var j=0;j<40;j++)//画横线\r\n    \t{\r\n    \t\tctx.strokeStyle=\"black\";\r\n    \t\tctx.beginPath();\r\n    \t\tctx.moveTo(0,15*j);\r\n    \t\tctx.lineTo(900,15*j);\r\n    \t\tctx.closePath();\r\n    \t\tctx.stroke();\r\n    \t}\r\n    \t\r\n    \tfor(var k=0;k<snakeCount;k++)//画蛇的身体\r\n\t\t\t{\r\n\t\t\tctx.fillStyle=\"#000\";\r\n\t\t\tif (k==snakeCount-1)\r\n\t\t\t{\r\n\t\t\t\tctx.fillStyle=\"red\";//蛇头的颜色与身体区分开\r\n\t\t\t}\r\n\t\t\tctx.fillRect(snake[k].x,snake[k].y,15,15);//前两个数是矩形的起始坐标，后两个数是矩形的长宽。\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t//绘制食物\t\r\n    \t\tctx.fillStyle =\"black\";\r\n\t     ctx.fillRect(foodx,foody,15,15);\r\n\t     ctx.fill();\r\n    \t\r\n    }\r\n \r\n    \r\n    function start()//定义蛇的坐标\r\n    {\r\n    \t//var snake =[];//定义一条蛇，画蛇的身体\r\n        //var snakeCount = 6;//初始化蛇的长度\r\n\t\t\r\n\t\tfor(var k=0;k<snakeCount;k++)\r\n    \t\t{\r\n    \t\t\tsnake[k]={x:k*15,y:0};\r\n    \t\t\t\r\n            }\r\n\t\t\t\r\n\t\t  drawtable();\r\n          addfood();//在start中调用添加食物函数\r\n \r\n    }\r\n \r\n    function addfood()\r\n\t{\r\n\tfoodx = Math.floor(Math.random()*60)*15; //随机产生一个0-1之间的数\r\n\tfoody = Math.floor(Math.random()*40)*15;\r\n\t\t\r\n\t\tfor (var k=0;k<snake;k++)\r\n\t\t{\r\n\t\t\tif (foodx==snake[k].x&&foody==sanke[k].y)//防止产生的随机食物落在蛇身上\r\n\t\t\t{\t\r\n\t\t\taddfood();\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\r\n\t}\t\r\n    \t\t\r\n   function move()\r\n   {\r\n\tswitch (togo)\r\n\t{\r\n\tcase 1: snake.push({x:snake[snakeCount-1].x-15,y:snake[snakeCount-1].y}); break;//向左走\r\n\tcase 2: snake.push({x:snake[snakeCount-1].x,y:snake[snakeCount-1].y-15}); break;\r\n\tcase 3: snake.push({x:snake[snakeCount-1].x+15,y:snake[snakeCount-1].y}); break;\r\n\tcase 4: snake.push({x:snake[snakeCount-1].x,y:snake[snakeCount-1].y+15}); break;\r\n\tcase 5: snake.push({x:snake[snakeCount-1].x-15,y:snake[snakeCount-1].y-15}); break;\r\n\tcase 6: snake.push({x:snake[snakeCount-1].x+15,y:snake[snakeCount-1].y+15}); break;\r\n\tdefault: snake.push({x:snake[snakeCount-1].x+15,y:snake[snakeCount-1].y});\r\n\t}\r\n    snake.shift();//删除数组第一个元素\r\n   \tctx.clearRect(0,0,900,600);//清除画布重新绘制\r\n   \tisEat();\r\n\tisDead();\r\n\tdrawtable();\r\n   } \t\t\t\r\n   \r\n   function keydown(e)\r\n   {\r\n   switch(e.keyCode)\r\n\t\t{\r\n         case 37: togo=1; break;\r\n\t\t case 38: togo=2; break;\r\n\t\t case 39: togo=3; break;\r\n\t\t case 40: togo=4; break;\r\n\t\t case 65: togo=5; break;\r\n\t\t case 68: togo=6; break;\r\n\t\t}\r\n   }\r\n   \r\n   function isEat()//吃到食物后长度加1\r\n   {\r\n    if(snake[snakeCount-1].x==foodx&&snake[snakeCount-1].y==foody)\r\n   {\r\n\t\taddfood();\r\n\t\tsnakeCount++;\r\n\t\tsnake.unshift({x:-15,y:-15});\r\n   }\r\n   \r\n   }\r\n   \r\n   function isDead()\r\n   {\r\n    if (snake[snakeCount-1].x>885||snake[snakeCount-1].y>585||snake[snakeCount-1].x<0||snake[snakeCount-1].y<0)\r\n\t\t{\r\n\t\talert(\"You are dead,GAME OVER!!!\");\r\n\t\twindow.location.reload();\r\n\t\t}\r\n   }\r\n   \r\n    document.onkeydown=function(e)\r\n{\r\n\tkeydown(e);\r\n \r\n} \r\nwindow.onload = function()//调用函数\r\n{ \r\n\tstart();\r\n\tsetInterval(move,150);\r\n\tdrawtable();\r\n\t\r\n\t\r\n \r\n}\r\n</script>\r\n<footer>\r\n    <p>版权所有 &copy; 2024 FengHuaStation</p>\r\n</footer>\r\n</body>\r\n</html>\r\n","FHgame/game2/":""}